/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./klass","./arrays","./objects","./types"],function(t,n,i,e){var s=Array.prototype.slice,r=n.compact,o=e.isDefined,h=e.isPlainObject,a=e.isFunction,u=e.isString,l=e.isEmptyObject,f=i.mixin;return t({on:function(t,n,i,e,s,r){var o=this,l=this._hub||(this._hub={});return h(t)?(s=e,each(t,function(t,e){o.on(t,n,i,e,s,r)}),this):(u(n)||a(e)||(s=e,e=i,i=n,n=void 0),a(i)&&(s=e,e=i,i=null),u(t)&&(t=t.split(/\s/)),t.forEach(function(t){(l[t]||(l[t]=[])).push({fn:e,selector:n,data:i,ctx:s,one:r})}),this)},one:function(t,n,i,e,s){return this.on(t,n,i,e,s,1)},trigger:function(t){if(!this._hub)return this;var n=this;u(t)&&(t=new CustomEvent(t)),Object.defineProperty(t,"target",{value:this});var i=s.call(arguments,1);return i=o(i)?[t].concat(i):[t],[t.type||t.name,"all"].forEach(function(e){var s=n._hub[e];if(s){for(var o=s.length,h=!1,a=0;a<o;a++){var u=s[a];t.data?u.data&&(t.data=f({},u.data,t.data)):t.data=u.data||null,u.fn.apply(u.ctx,i),u.one&&(s[a]=null,h=!0)}h&&(n._hub[e]=r(s))}}),this},listened:function(t){return((this._hub||(this._events={}))[t]||[]).length>0},listenTo:function(t,n,i,e){if(!t)return this;u(i)&&(i=this[i]),e?t.one(n,i,this):t.on(n,i,this);for(var s,r=this._listeningTo||(this._listeningTo=[]),o=0;o<r.length;o++)if(r[o].obj==t){s=r[o];break}s||r.push(s={obj:t,events:{}});var h=s.events,a=h[n]=h[n]||[];return-1==a.indexOf(i)&&a.push(i),this},listenToOnce:function(t,n,i){return this.listenTo(t,n,i,1)},off:function(t,n){var i=this._hub||(this._hub={});return u(t)&&(t=t.split(/\s/)),t.forEach(function(t){var e=i[t],s=[];if(e&&n)for(var r=0,o=e.length;r<o;r++)e[r].fn!==n&&e[r].fn._!==n&&s.push(e[r]);s.length?i[t]=s:delete i[t]}),this},unlistenTo:function(t,n,i){var e=this._listeningTo;if(!e)return this;for(var s=0;s<e.length;s++){var o=e[s];if(!t||t==o.obj){var h=o.events;for(var a in h)if(!n||n==a){for(var u=h[a],f=0;f<u.length;f++)i&&i!=u[s]||(o.obj.off(a,u[s],this),u[s]=null);u=h[a]=r(u),l(u)&&(h[a]=null)}l(h)&&(e[s]=null)}}return e=this._listeningTo=r(e),l(e)&&(this._listeningTo=null),this}})});
//# sourceMappingURL=sourcemaps/Evented.js.map
