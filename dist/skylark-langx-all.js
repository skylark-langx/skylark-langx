/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5
 * @link www.skylarkjs.org
 * @license MIT
 */
(function(factory,globals,define,require) {
  var isAmd = (typeof define === 'function' && define.amd),
      isCmd = (!isAmd && typeof exports !== 'undefined');

  if (!isAmd && !define) {
    var map = {};
    function absolute(relative, base) {
        if (relative[0]!==".") {
          return relative;
        }
        var stack = base.split("/"),
            parts = relative.split("/");
        stack.pop(); 
        for (var i=0; i<parts.length; i++) {
            if (parts[i] == ".")
                continue;
            if (parts[i] == "..")
                stack.pop();
            else
                stack.push(parts[i]);
        }
        return stack.join("/");
    }
    define = globals.define = function(id, deps, factory) {
        if (typeof factory == 'function') {
            map[id] = {
                factory: factory,
                deps: deps.map(function(dep){
                  return absolute(dep,id);
                }),
                resolved: false,
                exports: null
            };
            require(id);
        } else {
            map[id] = {
                factory : null,
                resolved : true,
                exports : factory
            };
        }
    };
    require = globals.require = function(id) {
        if (!map.hasOwnProperty(id)) {
            throw new Error('Module ' + id + ' has not been defined');
        }
        var module = map[id];
        if (!module.resolved) {
            var args = [];

            module.deps.forEach(function(dep){
                args.push(require(dep));
            })

            module.exports = module.factory.apply(globals, args) || null;
            module.resolved = true;
        }
        return module.exports;
    };
  }
  
  if (!define) {
     throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");
  }

  factory(define,require);

  if (!isAmd) {
    var skylarkjs = require("skylark-langx-ns");

    if (isCmd) {
      module.exports = skylarkjs;
    } else {
      globals.skylarkjs  = skylarkjs;
    }
  }

})(function(define,require) {

/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */

/**
     * https://github.com/cho45/micro-template.js
     * (c) cho45 http://cho45.github.com/mit-license
     *
    function template (id, data) {

        function include(name, args) {
            var stash = {};
            for (var key in template.context.stash) if (template.context.stash.hasOwnProperty(key)) {
                stash[key] = template.context.stash[key];
            }
            if (args) for (var key in args) if (args.hasOwnProperty(key)) {
                stash[key] = args[key];
            }
            var context = template.context;
            context.ret += template(name, stash);
            template.context = context;
        }

        function wrapper(name, fun) {
            var current = template.context.ret;
            template.context.ret = '';
            fun.apply(template.context);
            var content = template.context.ret;
            var orig_content = template.context.stash.content;
            template.context.stash.content = content;
            template.context.ret = current + template(name, template.context.stash);
            template.context.stash.content = orig_content;
        }

        var me = arguments.callee;
        if (!me.cache[id]) me.cache[id] = (function () {
            var name = id, string = /^[\w\-]+$/.test(id) ? me.get(id): (name = 'template(string)', id); // no warnings
            var line = 1, body = (
                "try { " +
                    (me.variable ?  "var " + me.variable + " = this.stash;" : "with (this.stash) { ") +
                        "this.ret += '"  +
                        string.
                            replace(/<%/g, '\x11').replace(/%>/g, '\x13'). // if you want other tag, just edit this line
                            replace(/'(?![^\x11\x13]+?\x13)/g, '\\x27').
                            replace(/^\s*|\s*$/g, '').
                            replace(/\n|\r\n/g, function () { return "';\nthis.line = " + (++line) + "; this.ret += '\\n" }).
                            replace(/\x11=raw(.+?)\x13/g, "' + ($1) + '").
                            replace(/\x11=(.+?)\x13/g, "' + this.escapeHTML($1) + '").
                            replace(/\x11(.+?)\x13/g, "'; $1; this.ret += '") +
                    "'; " + (me.variable ? "" : "}") + "return this.ret;" +
                "} catch (e) { throw 'TemplateError: ' + e + ' (on " + name + "' + ' line ' + this.line + ')'; } " +
                "//@ sourceURL=" + name + "\n" // source map
            ).replace(/this\.ret \+= '';/g, '');
            var func = new Function(body);
            var map  = { '&' : '&amp;', '<' : '&lt;', '>' : '&gt;', '\x22' : '&#x22;', '\x27' : '&#x27;' };
            var escapeHTML = function (string) { return (''+string).replace(/[&<>\'\"]/g, function (_) { return map[_] }) };
            return function (stash) { return func.call(me.context = { escapeHTML: escapeHTML, line: 1, ret : '', stash: stash }) };
        })();
        return data ? me.cache[id](data) : me.cache[id];
    }

    template.cache = {};
    

    template.get = function (id) {
        return document.getElementById(id).innerHTML;
    };
    **/

//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Underscore may be freely distributed under the MIT license.

define("skylark-langx-ns/_attach",[],function(){return function(t,n,r){for(var e=(n="string"==typeof n?n.split("."):n).length,i=t,s=0,a=n[s++];s<e;)i=i[a]=i[a]||{},a=n[s++];if(i[a]){if(r)throw new Error("This namespace already exists:"+n)}else i[a]=r||{};return i[a]}}),define("skylark-langx-ns/ns",["./_attach"],function(r){var e={attach:function(t,n){return r(e,t,n)}};return e}),define("skylark-langx-ns/main",["./ns"],function(t){return t}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),define("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),define("skylark-langx-arrays/arrays",["skylark-langx-ns"],function(t){return t.attach("langx.arrays")}),define("skylark-langx-arrays/base-find-index",["./arrays"],function(t){return t.baseFindIndex=function(t,n,r,e){for(var i=t.length,s=r+(e?1:-1);e?s--:++s<i;)if(n(t[s],s,t))return s;return-1}}),define("skylark-langx-arrays/base-indexof",["./arrays","./base-find-index"],function(t,s){function a(t){return t!=t}return t.baseIndexOf=function(t,n,r){if(n!=n)return s(t,a,r);for(var e=r-1,i=t.length;++e<i;)if(t[e]===n)return e;return-1}}),define("skylark-langx-arrays/filter",["./arrays"],function(t){var r=Array.prototype.filter;return t.filter=function(t,n){return r.call(t,n)}}),define("skylark-langx-arrays/compact",["./arrays","./filter"],function(t,n){return t.compact=function(t){return n(t,function(t){return null!=t})}}),define("skylark-langx-arrays/in-array",["./arrays"],function(t){return t.inArray=function(t,n){if(n){var r;if(n.indexOf)return n.indexOf(t);for(r=n.length;r--;)if(n[r]===t)return r}return-1}}),define("skylark-langx-arrays/contains",["./arrays","./in-array"],function(t,r){return t.contains=function(t,n){return r(n,t)}}),define("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(t,n,r){return t.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define("skylark-langx-funcs/rest-arguments",["./funcs"],function(t){return t.restArguments=function(i,s){return s=null==s?i.length-1:+s,function(){for(var t=Math.max(arguments.length-s,0),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+s];switch(s){case 0:return i.call(this,n);case 1:return i.call(this,arguments[0],n);case 2:return i.call(this,arguments[0],arguments[1],n)}for(var e=Array(s+1),r=0;r<s;r++)e[r]=arguments[r];return e[s]=n,i.apply(this,e)}}}),define("skylark-langx-funcs/bind-all",["./funcs","./rest-arguments"],function(t,n){return t.bindAll=n(function(t,n){var r=n.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var e=n[r];t[e]=t[e].bind(t)}})}),define("skylark-langx-types/types",["skylark-langx-ns"],function(t){var n,r=Array.isArray,e={}.toString,i=(n={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){n["[object "+t+"]"]=t.toLowerCase()}),function(t){return null==t?String(t):n[e.call(t)]||"object"});function s(t){for(var n in t)if(null!==t[n])return!1;return!0}function a(t){return"function"==i(t)}function o(t){return t&&t.nodeType}function u(t){return"number"==typeof t}function h(t){var n=typeof t;return"function"==n||"object"==n&&!!t}function l(t){return"string"==typeof t}function c(t){return t&&t==t.window}function f(t){return"symbol"==typeof t}var y=NaN,g=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,m=/^0o[0-7]+$/i,x=parseInt;function k(t){return t?(t=v(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function v(t){if("number"==typeof t)return t;if(f(t))return y;if("string"!=typeof(t=h(t)?h(n="function"==typeof t.valueOf?t.valueOf():t)?n+"":n:t))return 0===t?t:+t;t=t.replace(g,"");var n=d.test(t);return n||m.test(t)?x(t.slice(2),n?2:8):p.test(t)?y:+t}return t.attach("langx.types",{isArray:r||function(t){return object&&object.constructor===Array},isArrayLike:function(t){return!l(t)&&!o(t)&&"number"==typeof t.length&&!a(t)},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===e.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:s,isEmptyObject:s,isFunction:a,isHtmlNode:o,isInstanceOf:function(t,n){return void 0!==t&&(null===t||n==Object||("number"==typeof t?n===Number:"string"==typeof t?n===String:"boolean"==typeof t?n===Boolean:"string"==typeof t?n===String:t instanceof n||!(!t||!t.isInstanceOf)&&t.isInstanceOf(n)))},isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:u,isNumeric:u,isObject:h,isPlainObject:function(t){return h(t)&&!c(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:l,isSameOrigin:function(t){var n;if(t)return n=location.protocol+"//"+location.hostname,location.port&&(n+=":"+location.port),t.startsWith(n)},isSymbol:f,isUndefined:function(t){return void 0===t},isWindow:c,type:i,toFinite:k,toNumber:v,toInteger:function(t){var n=(t=k(t))%1;return t==t?n?t-n:t:0}})}),define("skylark-langx-types/main",["./types"],function(t){return t}),define("skylark-langx-types",["skylark-langx-types/main"],function(t){return t}),define("skylark-langx-funcs/defer",["skylark-langx-types","./funcs"],function(u,t){return t.defer=function(t,n,r,e){var i,s,a={cancel:null},o=t;return u.isNumber(n)||u.isFunction(n)||(e=r,r=n,n=0),r&&(o=function(){t.apply(e,r)}),u.isFunction(n)?(i=!1,n(function(){i||o()}),a.cancel=function(){i=!0}):0==n&&requestAnimationFrame?(s=requestAnimationFrame(o),a.cancel=function(){return cancelAnimationFrame(s)}):(s=setTimeout(o,n),a.cancel=function(){return clearTimeout(s)}),a}}),define("skylark-langx-funcs/debounce",["./funcs","./defer"],function(t,u){return t.debounce=function(r,e,i){function t(){var t=this,n=arguments;return o(),s=setTimeout(function(){s=null,i?a=u(r,n,t):r.apply(t,n)},e),{cancel:o}}var s,a,o=t.cancel=function(){s&&clearTimeout(s),a&&a.cancel(),a=s=void 0};return t}}),define("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(t,n){return t.attach("langx.objects",{attach:t.attach})}),define("skylark-langx-objects/all-keys",["skylark-langx-types","./objects"],function(e,t){return t.allKeys=function(t){if(!e.isObject(t))return[];var n,r=[];for(n in t)r.push(n);return r}}),define("skylark-langx-objects/assign",["skylark-langx-types","./objects"],function(t,n){return n.assign=Object.assign}),define("skylark-langx-objects/to-key",["skylark-langx-types","./objects"],function(t,n){const r=t.isSymbol,e=t.isString;return n.toKey=function(t){var n;return e(t)||r(t)?t:"0"==(n=""+t)&&1/t==-1/0?"-0":n}}),define("skylark-langx-objects/is-key",["skylark-langx-types","./objects"],function(t,n){const e=t.isSymbol,i=t.isArray,s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;return n.isKey=function(t,n){var r;return!i(t)&&(!("number"!=(r=typeof t)&&"boolean"!=r&&null!=t&&!e(t))||a.test(t)||!s.test(t)||null!=n&&t in Object(n))}}),define("skylark-langx-objects/_cast_path",["skylark-langx-types","./objects","./is-key"],function(r,t,e){const i=".".charCodeAt(0),a=/\\(\\)?/g,o=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g");return function(t,n){if(r.isArray(t))return t;if(e(t,n))return[t];{n=t;const s=[];return n.charCodeAt(0)===i&&s.push(""),n.replace(o,(t,n,r,e)=>{let i=t;r?i=e.replace(a,"$1"):n&&(i=n.trim()),s.push(i)}),s}}}),define("skylark-langx-objects/get",["skylark-langx-types","./objects","./to-key","./_cast_path"],function(t,n,i,s){return n.get=function(t,n,r){return void 0===(t=null==t?void 0:function(t,n){let r=0;for(var e=(n=s(n,t)).length;null!=t&&r<e;)t=t[i(n[r++])];return r&&r==e?t:void 0}(t,n))?r:t}}),define("skylark-langx-objects/base-at",["./objects","./get"],function(t,a){return t.baseAt=function(t,n){let r=-1;for(var e=n.length,i=new Array(e),s=null==t;++r<e;)i[r]=s?void 0:a(t,n[r]);return i}}),define("skylark-langx-objects/clone",["skylark-langx-types","./objects"],function(t,n){var a=t.isPlainObject,o=t.isArray;return n.clone=function t(n,r){if(null==n)e=n;else if(r&&n.clone)e=n.clone();else if(o(n))for(var e=[],i=0;i<n.length;i++)e.push(t(n[i]));else if(a(n))for(var s in e={},n)e[s]=t(n[s]);else e=n;return e}}),define("skylark-langx-objects/defaults",["./objects","./all-keys"],function(t,n){return t.defaults=(u=n,h=!0,function(t){var n=arguments.length;if(h&&(t=Object(t)),!(n<2||null==t))for(var r=1;r<n;r++)for(var e=arguments[r],i=u(e),s=i.length,a=0;a<s;a++){var o=i[a];h&&void 0!==t[o]||(t[o]=e[o])}return t});var u,h}),define("skylark-langx-objects/each",["./objects"],function(t){return t.each=function(t,n,r){var e,i,s,a;if(t)if(void 0===(e=t.length)){for(i in t)if(t.hasOwnProperty(i)&&(a=t[i],!1===(r?n.call(a,a,i):n.call(a,i,a))))break}else for(s=0;s<e&&(a=t[s],!1!==(r?n.call(a,a,s):n.call(a,s,a)));s++);return this}}),define("skylark-langx-objects/_mixin",["skylark-langx-types","./objects"],function(t,n){var a=t.isPlainObject;return function t(n,r,e,i){for(var s in r)i&&void 0!==n[s]||(e&&a(r[s])?(a(n[s])||(n[s]={}),t(n[s],r[s],e,i)):void 0!==r[s]&&(n[s]=r[s]));return n}}),define("skylark-langx-objects/_parse_mixin_args",["skylark-langx-types","./objects"],function(t,n){var i=Array.prototype.slice,s=t.isBoolean;return function(t){var n=i.call(arguments,0),r=n.shift(),e=!1;return s(n[n.length-1])&&(e=n.pop()),{target:r,sources:n,deep:e}}}),define("skylark-langx-objects/mixin",["skylark-langx-types","./objects","./_mixin","./_parse_mixin_args"],function(t,n,r,e){return n.mixin=function(){var n=e.apply(this,arguments);return n.sources.forEach(function(t){r(n.target,t,n.deep,!1)}),n.target}}),define("skylark-langx-objects/extend",["./objects","./mixin"],function(t,e){var i=Array.prototype.slice;return t.extend=function(n){var r,t=i.call(arguments,1);return"boolean"==typeof n&&(r=n,n=t.shift()),0==t.length&&(t=[n],n=this),t.forEach(function(t){e(n,t,r)}),n}}),define("skylark-langx-objects/for-each",["./objects","./each"],function(t,r){return t.forEach=function(t,n){t&&(t.forEach?t.forEach(n):r(t,n,!0))}}),define("skylark-langx-objects/has",["skylark-langx-types","./objects"],function(s,t){var a=Object.prototype.hasOwnProperty;return t.has=function(t,n){if(!s.isArray(n))return null!=t&&a.call(t,n);for(var r=n.length,e=0;e<r;e++){var i=n[e];if(null==t||!a.call(t,i))return!1;t=t[i]}return!!r}}),define("skylark-langx-objects/includes",["./objects"],function(t){return t.includes=function(t,n,r,e){return t=isArrayLike(t)?t:values(t),r=r&&!e?toInteger(r):0,e=t.length,r<0&&(r=nativeMax(e+r,0)),isString(t)?r<=e&&-1<t.indexOf(n,r):!!e&&-1<baseIndexOf(t,n,r)}}),define("skylark-langx-objects/is-equal",["skylark-langx-types","./objects"],function(t,n){var l,s,c=t.isFunction,f="undefined"!=typeof Symbol?Symbol.prototype:null;return l=function(t,n,r,e){var i;return t===n?0!==t||1/t==1/n:null!=t&&null!=n&&(t!=t?n!=n:("function"==(i=typeof t)||"object"==i||"object"==typeof n)&&s(t,n,r,e))},s=function(t,n,r,e){var i=toString.call(t);if(i!==toString.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(n)}i="[object Array]"===i;if(!i){if("object"!=typeof t||"object"!=typeof n)return!1;var s=t.constructor,a=n.constructor;if(s!==a&&!(c(s)&&s instanceof s&&c(a)&&a instanceof a)&&"constructor"in t&&"constructor"in n)return!1}e=e||[];for(var o=(r=r||[]).length;o--;)if(r[o]===t)return e[o]===n;if(r.push(t),e.push(n),i){if((o=t.length)!==n.length)return!1;for(;o--;)if(!l(t[o],n[o],r,e))return!1}else{var u,h=Object.keys(t),o=h.length;if(Object.keys(n).length!==o)return!1;for(;o--;)if(void 0===n[u=h[o]]||!l(t[u],n[u],r,e))return!1}return r.pop(),e.pop(),!0},n.isEqual=function(t,n){return l(t,n)}}),define("skylark-langx-objects/keys",["skylark-langx-types","./objects","./has"],function(e,t,i){return t.keys=function(t){if(!e.isObject(t))return[];var n,r=[];for(n in t)i(t,n)&&r.push(n);return r}}),define("skylark-langx-objects/is-match",["skylark-langx-types","./objects","./keys"],function(t,n,r){return n.isMatch=function(t,n){var r=(void 0)(n),e=r.length;if(null==t)return!e;for(var i=Object(t),s=0;s<e;s++){var a=r[s];if(n[a]!==i[a]||!(a in i))return!1}return!0}}),define("skylark-langx-objects/omit",["./objects","./mixin"],function(t,a){return t.omit=function(t,n,r){if(!t)return null;for(var e=a({},t),i=1;i<arguments.length;i++){var s=arguments[i];s in t&&delete e[s]}return e}}),define("skylark-langx-objects/pick",["./objects"],function(t){return t.pick=function(t,n,r){if(!t)return null;for(var e={},i=1;i<arguments.length;i++){var s=arguments[i];s in t&&(e[s]=t[s])}return e}}),define("skylark-langx-objects/remove-items",["skylark-langx-types","./objects"],function(i,t){return t.removeItem=function(t,n){if(i.isArray(t)){var r=t.indexOf(n);-1!=r&&t.splice(r,1)}else if(i.isPlainObject(t))for(var e in t)if(t[e]==n){delete t[e];break}return this}}),define("skylark-langx-objects/result",["skylark-langx-types","./objects","./to-key","./_cast_path"],function(t,n,a,o){t.isArray;var u=t.isFunction;return n.result=function(n,r,e){let i=-1,s=(r=o(r,n)).length;for(s||(s=1,n=void 0);++i<s;){let t=null==n?void 0:n[a(r[i])];void 0===t&&(i=s,t=e),n=u(t)?t.call(n):t}return n}}),define("skylark-langx-objects/safe-mixin",["./objects","./_mixin","./_parse_mixin_args"],function(t,r,e){return t.safeMixin=function(){var n=e.apply(this,arguments);return n.sources.forEach(function(t){r(n.target,t,n.deep,!0)}),n.target}}),define("skylark-langx-objects/scall",["./objects"],function(t){const s=Array.prototype.slice;return t.scall=function(t,n,r,e){var i;if(t&&t[n])return i=s.call(arguments,2),t[n].apply(t,i)}}),define("skylark-langx-objects/is-index",["skylark-langx-types","./objects"],function(t,n){const e=/^(?:0|[1-9]\d*)$/;return n.isIndex=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&-1<t&&t%1==0&&t<n}}),define("skylark-langx-objects/set",["skylark-langx-types","./objects","./_cast_path","./is-index","./to-key"],function(l,t,c,f,y){return t.set=function(t,n,r){if(null!=t){var e=n,i=r,s=void 0;if(l.isObject(t)){var a=(e=c(e,t)).length,o=a-1;let n=-1,r=t;for(;null!=r&&++n<a;){var u,h=y(e[n]);let t=i;n!=o&&(u=r[h],void 0===(t=s?s(u,h,r):void 0))&&(t=l.isObject(u)?u:f(e[n+1])?[]:{}),r[h]=t,r=r[h]}}}return t}}),define("skylark-langx-objects/shadow",["./objects"],function(t){return t.shadow=function(t,n,r){return Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}}),define("skylark-langx-objects/unset",["skylark-langx-types","./objects","./set"],function(t,n,r){return n.unset=function(t,n){return null==t||r(t,n,void 0)}}),define("skylark-langx-objects/values",["skylark-langx-types","./objects","./all-keys"],function(t,n,s){return n.values=function(t){for(var n=s(t),r=n.length,e=Array(r),i=0;i<r;i++)e[i]=t[n[i]];return e}}),define("skylark-langx-objects/main",["./objects","./all-keys","./assign","./base-at","./clone","./defaults","./each","./extend","./for-each","./get","./has","./includes","./is-equal","./is-key","./is-match","./keys","./mixin","./omit","./pick","./remove-items","./result","./safe-mixin","./scall","./set","./shadow","./to-key","./unset","./values"],function(t){return t}),define("skylark-langx-objects",["skylark-langx-objects/main"],function(t){return t}),define("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(t,n){var r=t.mixin;function e(){}return n.delegate=function(t,n){e.prototype=t;t=new e;return e.prototype=null,n&&r(t,n),t}}),define("skylark-langx-funcs/loop",["./funcs"],function(t){function n(t){this.callback=t,this.running=!1,this.id=-1}return n.prototype.start=function(){var n;this.running||(this.running=!0,n=this,function t(){n.callback(),n.running&&(n.id=requestAnimationFrame(t))}())},n.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new n(t)}}),define("skylark-langx-funcs/negate",["./funcs"],function(t){return t.negate=function(n){if("function"!=typeof n)throw new TypeError("Expected a function");return function(...t){return!n.apply(this,t)}}}),define("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(t,n){var e=Array.prototype.slice,i=t.isFunction,s=t.isString;function a(t,n){var r=2 in arguments&&e.call(arguments,2);if(i(t))return function(){return t.apply(n,r?r.concat(e.call(arguments)):arguments)};if(s(n))return r?(r.unshift(t[n],t),a.apply(null,r)):a(t[n],t);throw new TypeError("expected function")}return n.bind=n.proxy=a}),define("skylark-langx-funcs/template",["skylark-langx-objects","./funcs","./proxy"],function(e,t,i){Array.prototype.slice;var u={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},h=/(.)^/,l={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},c=/\\|'|\r|\n|\t|\u2028|\u2029/g;function n(s,t){t=e.defaults({},t,u);var n,r=RegExp([(t.escape||h).source,(t.interpolate||h).source,(t.evaluate||h).source].join("|")+"|$","g"),a=0,o="__p+='";s.replace(r,function(t,n,r,e,i){return o+=s.slice(a,i).replace(c,function(t){return"\\"+l[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),e&&(o+="';\n"+e+"\n__p+='"),a=i+t.length,t}),o+="';\n",o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(o=t.variable?o:"with(obj||{}){\n"+o+"}\n")+"return __p;\n";try{n=new Function(t.variable||"obj","_",o)}catch(t){throw t.source=o,t}r=i(function(t){return n.call(this,t,this)},this),t=t.variable||"obj";return r.source="function("+t+"){\n"+o+"}",r}return n.templateSettings=t.templateSettings=u,t.template=n}),define("skylark-langx-funcs/throttle",["./funcs"],function(t){return t.throttle=function(r,e){let i=window.performance.now();return function(...t){var n=window.performance.now();n-i>=e&&(r(...t),i=n)}}}),define("skylark-langx-funcs/main",["./funcs","./bind-all","./debounce","./defer","./delegate","./loop","./negate","./proxy","./rest-arguments","./template","./throttle"],function(t){return t}),define("skylark-langx-funcs",["skylark-langx-funcs/main"],function(t){return t}),define("skylark-langx-arrays/flatten",["skylark-langx-types","./arrays"],function(s,t){return t.flatten=function(t){if(s.isArrayLike(t)){for(var n=[],r=0;r<t.length;r++){var e=t[r];if(s.isArrayLike(e))for(var i=0;i<e.length;i++)n.push(e[i]);else n.push(e)}return n}return t}}),define("skylark-langx-arrays/difference",["skylark-langx-funcs","./arrays","./flatten","./filter","./contains"],function(t,n,r,e,i){t=t.restArguments(function(t,n){return n=r(n,!0,!0),e(t,function(t){return!i(n,t)})});return n.difference=t}),define("skylark-langx-arrays/find",["./arrays"],function(t){var r=Array.prototype.find;return t.find=function(t,n){return r.call(t,n)}}),define("skylark-langx-arrays/first",["./arrays"],function(t){return t.first=function(t,n){return n?t.slice(0,n):t[0]}}),define("skylark-langx-arrays/grep",["skylark-langx-objects","./arrays"],function(n,t){return t.grep=function(t,r){var e=[];return n.each(t,function(t,n){r(n,t)&&e.push(n)}),e}}),define("skylark-langx-arrays/indexof",["./arrays"],function(t){return t.indexOf=function(t,n){return t.indexOf(n)}}),define("skylark-langx-arrays/last",["./arrays"],function(t){return t.last=function(t){return t[t.length-1]}}),define("skylark-langx-arrays/make-array",["skylark-langx-types","./arrays"],function(e,t){return t.makeArray=function(t,n,r){return e.isArrayLike(t)?(r||[]).concat(Array.prototype.slice.call(t,n||0)):[t]}}),define("skylark-langx-arrays/map",["skylark-langx-types","./arrays","./flatten"],function(a,t,o){return t.map=function(t,n){var r,e,i,s=[];if(a.isArrayLike(t))for(e=0;e<t.length;e++)null!=(r=n.call(t[e],t[e],e))&&s.push(r);else for(i in t)null!=(r=n.call(t[i],t[i],i))&&s.push(r);return o(s)}}),define("skylark-langx-arrays/merge",["./arrays"],function(t){return t.merge=function(t,n){var r=n.length,e=t.length,i=0;if("number"==typeof r)for(;i<r;i++)t[e++]=n[i];else for(;void 0!==n[i];)t[e++]=n[i++];return t.length=e,t}}),define("skylark-langx-arrays/pull-at",["skylark-langx-types","skylark-langx-objects","./arrays"],function(t,e,n){return n.pullAt=function(n,...r){null!=n&&n.length;var t=e.baseAt(n,r);r.sort(function(t,n){return t-n});for(let t=r.length-1;0<=t;t--)n.slice(r[t],1);return t}}),define("skylark-langx-arrays/reduce",["./arrays"],function(t){return t.reduce=function(t,n,r){return Array.prototype.reduce.call(t,n,r)}}),define("skylark-langx-arrays/uniq",["./arrays","./filter"],function(t,n){return t.uniq=function(r){return n(r,function(t,n){return r.indexOf(t)==n})}}),define("skylark-langx-arrays/without",["skylark-langx-funcs","./arrays","./difference"],function(t,n,r){t=t.restArguments(function(t,n){return r(t,n)});return n.without=t}),define("skylark-langx-arrays/main",["./arrays","./base-find-index","./base-indexof","./compact","./contains","./difference","./filter","./find","./first","./flatten","./grep","./in-array","./indexof","./last","./make-array","./map","./merge","./pull-at","./reduce","./uniq","./without"],function(t){return t}),define("skylark-langx-arrays",["skylark-langx-arrays/main"],function(t){return t}),define("skylark-langx/arrays",["skylark-langx-arrays"],function(t){return t}),define("skylark-langx-constructs/constructs",["skylark-langx-ns"],function(t){return t.attach("langx.constructs",{})}),define("skylark-langx-constructs/inherit",["./constructs"],function(t){return t.inherit=function(t,n){if("function"!=typeof n&&n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Object.setPrototypeOf(t,n)}}),define("skylark-langx-constructs/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","./constructs","./inherit"],function(t,h,n,r,e,l){var c=r.uniq,f=n.has,y=n.mixin,g=h.isArray,p=h.isDefined;function d(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return e.klass=function e(t,n,r,i){g(n)&&(i=r,r=n,n=null),n=n||Object,p(r)&&!g(r)&&(i=r,r=!1);var s,a,o=n,u=(r&&(s=o,a=[],r.forEach(function(t){if(f(t,"__mixins__"))throw new Error("nested mixins");for(var n=[];t;)n.unshift(t),t=t.superclass;a=a.concat(n)}),r=0<(a=(a=c(a)).filter(function(t){for(var n=s;n;){if(t===n)return!1;if(f(n,"__mixins__"))for(var r=n.__mixins__,e=0;e<r.length;e++)if(r[e]===t)return!1;n=n.superclass}return!0})).length&&a),r&&(o=function(t,n){for(var r=t,e=0;e<n.length;e++){var i=new Function;l(i,r),i.superclass=null,y(i.prototype,n[e].prototype),i.prototype.__mixin__=n[e],r=i}return r}(o,r)),t.klassName||""),u=new Function("return function "+u+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return l(u,o),u.superclass=n,u._constructor||(u._constructor=d),r&&(u.__mixins__=r),u.partial||(u.partial=function(t,n){var r,e,i=this,s=t,t=n,a=i.prototype,o=i.superclass.prototype,u=t&&t.noOverrided;for(r in t&&t.overrides,s)"constructor"!==r&&(e=s[r],"function"==typeof s[r]?a[r]=e._constructor||u||"function"!=typeof o[r]?e:function(r,e){return function(){var t=this.overrided,n=(this.overrided=e,r.apply(this,arguments));return this.overrided=t,n}}(e,o[r]):h.isPlainObject(e)&&null!==e&&e.get?Object.defineProperty(a,r,e):a[r]=e);return i}),u.inherit||(u.inherit=function(t,n,r){return e(t,this,n,r)}),u.partial(t,i),u}}),define("skylark-langx-constructs/main",["./constructs","./inherit","./klass"],function(t){return t}),define("skylark-langx-constructs",["skylark-langx-constructs/main"],function(t){return t}),define("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-constructs"],function(t,n){return t.attach("langx.klass",n.klass)}),define("skylark-langx-klass/main",["./klass"],function(t){return t}),define("skylark-langx-klass",["skylark-langx-klass/main"],function(t){return t}),define("skylark-langx/klass",["skylark-langx-klass"],function(t){return t}),define("skylark-langx/array-store",["./klass"],function(t){function s(e){var i;return e&&((i=!!e.then)&&(e=Object.delegate(e)),t("forEach"),t("filter"),t("map"),null==e.total)&&(e.total=Deferred.when(e,function(t){return t.length})),e;function t(r){e[r]=function(){var n=arguments,t=Deferred.when(e,function(t){return s(Array.prototype[r].apply(t,n))});if("forEach"!==r||i)return t}}}return t({klassName:"ArrayStore",queryEngine:function(r,e){switch(typeof r){default:throw new Error("Can not query with a "+typeof r);case"object":case"undefined":var i=r;r=function(t){for(var n in i){var r=i[n];if(r&&r.test){if(!r.test(t[n],t))return!1}else if(r!=t[n])return!1}return!0};break;case"string":if(!this[r])throw new Error("No filter function "+r+" was found in store");r=this[r];case"function":}function t(t){var n,t=function(t,n,r){var e,i=0,s=t&&t.length||0,a=[];if(s&&"string"==typeof t&&(t=t.split("")),"string"==typeof n&&(n=cache[n]||buildFn(n)),r)for(;i<s;++i)e=t[i],n.call(r,e,i,t)&&a.push(e);else for(;i<s;++i)n(e=t[i],i,t)&&a.push(e);return a}(t,r),a=e&&e.sort;return a&&t.sort("function"==typeof a?a:function(t,n){for(var r,e=0;r=a[e];e++){var i=t[r.attribute],s=n[r.attribute];if((i=null!=i?i.valueOf():i)!=(s=null!=s?s.valueOf():s))return!!r.descending==(null==i||s<i)?-1:1}return 0}),e&&(e.start||e.count)&&(n=t.length,(t=t.slice(e.start||0,(e.start||0)+(e.count||1/0))).total=n),t}return t.matches=r,t},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,n){var r=this.data,e=this.index,i=this.idProperty,i=t[i]=n&&"id"in n?n.id:i in t?t[i]:Math.random();if(i in e){if(n&&!1===n.overwrite)throw new Error("Object already exists");r[e[i]]=t}else e[i]=r.push(t)-1;return i},add:function(t,n){return(n=n||{}).overwrite=!1,this.put(t,n)},remove:function(t){var n=this.index,r=this.data;if(t in n)return r.splice(n[t],1),this.setData(r),!0},query:function(t,n){return s(this.queryEngine(t,n)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var n=0,r=t.length;n<r;n++)this.index[t[n][this.idProperty]]=n},init:function(t){for(var n in t)this[n]=t[n];this.setData(this.data||[])}})}),define("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(t){var u=0;function n(s){return function(t,n,r,e){var a,i=t[n],n=(i&&i.target==t||(t[n]=a=function(){for(var t=u,n=arguments,r=a.before;r;)n=r.advice.apply(this,n)||n,r=r.next;a.around&&(i=a.around.advice(this,n));for(var e,i,s=a.after;s&&s.id<t;)i=s.receiveArguments?void 0===(e=s.advice.apply(this,n))?i:e:s.advice.call(this,i,n),s=s.next;return i},i&&(a.around={advice:function(t,n){return i.apply(t,n)}}),a.target=t),function(r,e,i,t){var s,a,o=r[e],n="around"==e;if(a=n?(s=i(function(){return o.advice(this,arguments)}),{remove:function(){s=s&&(r=i=null)},advice:function(t,n){return s?s.apply(t,n):o.advice(t,n)}}):{remove:function(){var t,n;a.advice&&(t=a.previous,(n=a.next)||t?(t?t.next=n:r[e]=n,n&&(n.previous=t)):delete r[e],r=i=a.advice=null)},id:u++,advice:i,receiveArguments:t},o&&!n)if("after"==e){for(;o.next&&(o=o.next););(o.next=a).previous=o}else"before"==e&&(((r[e]=a).next=o).previous=a);else r[e]=a;return a}(a||i,s,r,e));return r=null,n}}return t.attach("langx.aspect",{after:n("after"),around:n("around"),before:n("before")})}),define("skylark-langx-aspect/main",["./aspect"],function(t){return t}),define("skylark-langx-aspect",["skylark-langx-aspect/main"],function(t){return t}),define("skylark-langx/aspect",["skylark-langx-aspect"],function(t){return t}),define("skylark-langx-async/async",["skylark-langx-ns"],function(t){return t.attach("langx.async")}),define("skylark-langx-async/deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects","./async"],function(t,n,r,e){"use strict";function a(){var r=this;this.promise=h(new Promise(function(t,n){r._resolve=t,r._reject=n}))}var i=Array.prototype.slice,o=n.proxy,s=t.makeArray,u=r.result;(0,r.mixin)(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});function h(t){var n,r,e,i,s;return t.isResolved||(e=r=!(n=!0),(t=t.then(function(t){return n=!(e=!0),t},function(t){throw n=!(r=!0),t})).isResolved=function(){return e},t.isPending=function(){return n},t.isRejected=function(){return r},t.state=function(){return e?"resolved":r?"rejected":"pending"},i=[],s=[],t.then=function(n,r,t){return t&&this.progress(t),h(Promise.prototype.then.call(this,n&&function(t){return t&&void 0!==t.__ctx__?n.apply(t.__ctx__,t):n(t)},r&&function(t){return t&&void 0!==t.__ctx__?r.apply(t.__ctx__,t):r(t)}))},t.progress=function(n){return i.forEach(function(t){n(t)}),s.push(n),this},t.pipe=t.then,t.notify=function(n){try{return i.push(n),s.forEach(function(t){return t(n)})}catch(t){this.reject(t)}return this}),t}return a.prototype.resolve=function(t){var n=i.call(arguments);return this.resolveWith(null,n)},a.prototype.resolveWith=function(t,n){return(n=n?s(n):[]).__ctx__=t,this._resolve(n),this._resolved=!0,this},a.prototype.notify=function(t){return u(this,"promise").notify(t),this},a.prototype.reject=function(t){var n=i.call(arguments);return this.rejectWith(null,n)},a.prototype.rejectWith=function(t,n){return(n=n?s(n):[]).__ctx__=t,this._reject(n),this._rejected=!0,this},a.prototype.isResolved=function(){return u(this,"promise").isResolved()},a.prototype.isRejected=function(){return u(this,"promise").isRejected()},a.prototype.state=function(){return u(this,"promise").state()},a.prototype.then=function(t,n,r){return u(this,"promise").then(t,n,r)},a.prototype.progress=function(t){return u(this,"promise").progress(t)},a.prototype.catch=function(t){return u(this,"promise").catch(t)},a.prototype.always=function(){var t=u(this,"promise");return t.always.apply(t,arguments),this},a.prototype.done=function(){var t=u(this,"promise");return t.done.apply(t,arguments),this},a.prototype.fail=function(t){return u(this,"promise").fail(t),this},a.all=function(t){var n=new a;return Promise.all(t).then(n.resolve.bind(n),n.reject.bind(n)),u(n,"promise")},a.first=function(t){return h(Promise.race(t))},a.when=function(t,n,r,e){var i=t&&"function"==typeof t.then,s=i&&t instanceof Promise;return i?(s||(i=new a(t.cancel),t.then(o(i.resolve,i),o(i.reject,i),i.notify),t=i.promise),n||r||e?t.then(n,r,e):t):1<arguments.length?n?n(t):t:(new a).resolve(t)},a.reject=function(t){var n=new a;return n.reject(t),n.promise},a.immediate=a.resolve=function(t){var n=new a;return n.resolve.apply(n,arguments),n.promise},a.promise=function(t){var n=new a;return t(n.resolve.bind(n),n.reject.bind(n),n.progress.bind(n)),n.promise},e.Deferred=a}),define("skylark-langx-async/each",["./async"],function(t){return t.each=function(e,n,i){if(0===e.length)return i(void 0,e);var s=new Array(e.length),a=0,o=!1;e.forEach(function(t,r){n(t,function(t,n){if(!o)return t?(o=!0,i(t)):(s[r]=n,(a+=1)===e.length?i(void 0,s):void 0)})})}}),define("skylark-langx-async/parallel",["skylark-langx-objects","./async","./deferred"],function(n,t,s){return t.parallel=function(t,r,e){var i=[];return e=e||null,r=r||[],n.each(t,function(t,n){i.push(n.apply(e,r))}),s.all(i)}}),define("skylark-langx-async/series",["skylark-langx-objects","./async","./deferred"],function(a,t,o){return t.series=function(t,r,e){var i=[],n=new o,s=n.promise;return e=e||null,r=r||[],n.resolve(),a.each(t,function(t,n){s=s.then(function(){return n.apply(e,r)}),i.push(s)}),o.all(i)}}),define("skylark-langx-async/waterful",["skylark-langx-objects","./async","./deferred"],function(s,t,a){return t.waterful=function(t,n,r){var e=new a,i=e.promise;return e.resolveWith(r=r||null,n=n||[]),s.each(t,function(t,n){i=i.then(n)}),i}}),define("skylark-langx-async/main",["./async","./deferred","./each","./parallel","./series","./waterful"],function(t){return t}),define("skylark-langx-async",["skylark-langx-async/main"],function(t){return t}),define("skylark-langx/async",["skylark-langx-async"],function(t){return t}),define("skylark-langx-binary/binary",["skylark-langx-ns"],function(t){"use strict";return t.attach("langx.binary",{fromBase64:function(t){for(var n,r,e,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.length/4*3,o=new ArrayBuffer(a),u=new Uint8Array(o),h=0,l=0;h<a;h+=3)n=s.indexOf(t.charAt(l++)),r=s.indexOf(t.charAt(l++)),e=s.indexOf(t.charAt(l++)),i=s.indexOf(t.charAt(l++)),u[h]=n<<2|r>>4,64!==e&&(u[h+1]=(15&r)<<4|e>>2),64!==i&&(u[h+2]=(3&e)<<6|i);return o},fromBinaryString:function(t){for(var n=t.length,r=new ArrayBuffer(n),e=new Uint8Array(r),i=0;i<n;i++)e[i]=t.charCodeAt(i);return r},fromBuffer:function(t){for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),e=0;e<t.length;e++)r[e]=t[e];return n},readInt8:function(t,n){return t[n]<<24>>24},readUint16:function(t,n){return t[n]<<8|t[n+1]},readUint32:function(t,n){return(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0}})}),define("skylark-langx-binary/base64",[],function(){"use strict";var t={byteLength:function(t){var t=l(t),n=t[0],t=t[1];return 3*(n+t)/4-t}};t.toByteArray=function(t){var n,r,e=l(t),i=e[0],e=e[1],s=new h(function(t,n){return 3*(t+n)/4-n}(i,e)),a=0,o=0<e?i-4:i;for(r=0;r<o;r+=4)n=u[t.charCodeAt(r)]<<18|u[t.charCodeAt(r+1)]<<12|u[t.charCodeAt(r+2)]<<6|u[t.charCodeAt(r+3)],s[a++]=n>>16&255,s[a++]=n>>8&255,s[a++]=255&n;2===e&&(n=u[t.charCodeAt(r)]<<2|u[t.charCodeAt(r+1)]>>4,s[a++]=255&n);1===e&&(n=u[t.charCodeAt(r)]<<10|u[t.charCodeAt(r+1)]<<4|u[t.charCodeAt(r+2)]>>2,s[a++]=n>>8&255,s[a++]=255&n);return s},t.fromByteArray=function(t){for(var n,r=t.length,e=r%3,i=[],s=0,a=r-e;s<a;s+=16383)i.push(function(t,n,r){for(var e,i=[],s=n;s<r;s+=3)e=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(function(t){return o[t>>18&63]+o[t>>12&63]+o[t>>6&63]+o[63&t]}(e));return i.join("")}(t,s,a<s+16383?a:s+16383));1==e?(n=t[r-1],i.push(o[n>>2]+o[n<<4&63]+"==")):2==e&&(n=(t[r-2]<<8)+t[r-1],i.push(o[n>>10]+o[n>>4&63]+o[n<<2&63]+"="));return i.join("")};for(var o=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=n.length;r<e;++r)o[r]=n[r],u[n.charCodeAt(r)]=r;function l(t){var n=t.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),n=(t=-1===t?n:t)===n?0:4-t%4;return[t,n]}return u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63,t}),define("skylark-langx-binary/ieee754",[],function(){"use strict";var t={read:function(t,n,r,e,i){var s,a,o=8*i-e-1,u=(1<<o)-1,h=u>>1,l=-7,c=r?i-1:0,f=r?-1:1,i=t[n+c];for(c+=f,s=i&(1<<-l)-1,i>>=-l,l+=o;0<l;s=256*s+t[n+c],c+=f,l-=8);for(a=s&(1<<-l)-1,s>>=-l,l+=e;0<l;a=256*a+t[n+c],c+=f,l-=8);if(0===s)s=1-h;else{if(s===u)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,e),s-=h}return(i?-1:1)*a*Math.pow(2,s-e)},write:function(t,n,r,e,i,s){var a,o,u=8*s-i-1,h=(1<<u)-1,l=h>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=e?0:s-1,y=e?1:-1,s=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,a=h):(a=Math.floor(Math.log(n)/Math.LN2),n*(e=Math.pow(2,-a))<1&&(a--,e*=2),2<=(n+=1<=a+l?c/e:c*Math.pow(2,1-l))*e&&(a++,e/=2),h<=a+l?(o=0,a=h):1<=a+l?(o=(n*e-1)*Math.pow(2,i),a+=l):(o=n*Math.pow(2,l-1)*Math.pow(2,i),a=0));8<=i;t[r+f]=255&o,f+=y,o/=256,i-=8);for(a=a<<i|o,u+=i;0<u;t[r+f]=255&a,f+=y,a/=256,u-=8);t[r+f-y]|=128*s}};return t}),define("skylark-langx-binary/memory",["./binary","./base64","./ieee754"],function(t,M,s){"use strict";c.INSPECT_MAX_BYTES=50;var n=2147483647;function a(t){if(n<t)throw new RangeError("Invalid typed array length");t=new Uint8Array(t);return t.__proto__=c.prototype,t}function c(t,n,r){if("number"!=typeof t)return e(t,n,r);if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return o(t)}function e(t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if(E(t)||t&&E(t.buffer)){var e=t,i=n;if(i<0||e.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<i+(r||0))throw new RangeError('"length" is outside of buffer bounds');return(e=void 0===i&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,i):new Uint8Array(e,i,r)).__proto__=c.prototype,e}if("string"!=typeof t){i=t;if(c.isBuffer(i))return r=0|h(i.length),0!==(e=a(r)).length&&i.copy(e,0,0,r),e;if(i){if(ArrayBuffer.isView(i)||"length"in i)return"number"!=typeof i.length||C(i.length)?a(0):u(i);if("Memory"===i.type&&Array.isArray(i.data))return u(i.data)}throw new TypeError("The first argument must be one of type string, Memory, ArrayBuffer, Array, or Array-like Object.")}var s,r=t,t=n;if(c.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return n=0|l(r,t),s=a(n),s=(r=s.write(r,t))!==n?s.slice(0,r):s;throw new TypeError("Unknown encoding: "+t)}function i(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function o(t){return i(t),a(t<0?0:0|h(t))}function u(t){for(var n=t.length<0?0:0|h(t.length),r=a(n),e=0;e<n;e+=1)r[e]=255&t[e];return r}function h(t){if(n<=t)throw new RangeError("Attempt to allocate Memory larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function l(t,n){if(c.isMemory(t))return t.length;if(ArrayBuffer.isView(t)||E(t))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var e=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return A(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(t).length;default:if(e)return A(t).length;n=(""+n).toLowerCase(),e=!0}}function r(t,n,r){var e,i=!1;if((n=void 0===n||n<0?0:n)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(n>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var s=this,a=n,o=r,u=s.length;(!o||o<0||u<o)&&(o=u);for(var h="",l=a=!a||a<0?0:a;l<o;++l)h+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(s[l]);return h;case"utf8":case"utf-8":return z(this,n,r);case"ascii":var c=this,u=n,f=r,y="";f=Math.min(c.length,f);for(var g=u;g<f;++g)y+=String.fromCharCode(127&c[g]);return y;case"latin1":case"binary":var p=this,a=n,d=r,m="";d=Math.min(p.length,d);for(var x=a;x<d;++x)m+=String.fromCharCode(p[x]);return m;case"base64":return k=this,e=r,0===(v=n)&&e===k.length?M.fromByteArray(k):M.fromByteArray(k.slice(v,e));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var k=n,v=r,b=this.slice(k,v),w="",_=0;_<b.length;_+=2)w+=String.fromCharCode(b[_]+256*b[_+1]);return w;default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function f(t,n,r){var e=t[n];t[n]=t[r],t[r]=e}function y(t,n,r,e,i){if(0===t.length)return-1;if("string"==typeof r?(e=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=C(r=+r)?i?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof n&&(n=c.from(n,e)),c.isMemory(n))return 0===n.length?-1:g(t,n,r,e,i);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,n,r):g(t,[n],r,e,i);throw new TypeError("val must be string, number or Memory")}function g(t,n,r,e,i){var s=1,a=t.length,o=n.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(t.length<2||n.length<2)return-1;a/=s=2,o/=2,r/=2}function u(t,n){return 1===s?t[n]:t.readUInt16BE(n*s)}if(i)for(var h=-1,l=r;l<a;l++)if(u(t,l)===u(n,-1===h?0:l-h)){if(l-(h=-1===h?l:h)+1===o)return h*s}else-1!==h&&(l-=l-h),h=-1;else for(l=r=a<r+o?a-o:r;0<=l;l--){for(var c=!0,f=0;f<o;f++)if(u(t,l+f)!==u(n,f)){c=!1;break}if(c)return l}return-1}function d(t,n,r,e){return S(function(t){for(var n=[],r=0;r<t.length;++r)n.push(255&t.charCodeAt(r));return n}(n),t,r,e)}function m(t,n,r,e){return S(function(t,n){for(var r,e,i=[],s=0;s<t.length&&!((n-=2)<0);++s)r=t.charCodeAt(s),e=r>>8,i.push(r%256),i.push(e);return i}(n,t.length-r),t,r,e)}function z(t,n,r){r=Math.min(t.length,r);for(var e=[],i=n;i<r;){var s,a,o,u,h=t[i],l=null,c=239<h?4:223<h?3:191<h?2:1;if(i+c<=r)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(s=t[i+1]))&&127<(u=(31&h)<<6|63&s)&&(l=u);break;case 3:s=t[i+1],a=t[i+2],128==(192&s)&&128==(192&a)&&2047<(u=(15&h)<<12|(63&s)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:s=t[i+1],a=t[i+2],o=t[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&65535<(u=(15&h)<<18|(63&s)<<12|(63&a)<<6|63&o)&&u<1114112&&(l=u)}null===l?(l=65533,c=1):65535<l&&(e.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),e.push(l),i+=c}var f=e,y=f.length;if(y<=x)return String.fromCharCode.apply(String,f);for(var g="",p=0;p<y;)g+=String.fromCharCode.apply(String,f.slice(p,p+=x));return g}c.kMaxLength=n,(c.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{get:function(){if(this instanceof c)return this.buffer}}),Object.defineProperty(c.prototype,"offset",{get:function(){if(this instanceof c)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192,c.from=e,c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,c.alloc=function(t,n,r){return n=n,r=r,i(t=t),!(t<=0)&&void 0!==n?"string"==typeof r?a(t).fill(n,r):a(t).fill(n):a(t)},c.allocUnsafe=o,c.allocUnsafeSlow=o,c.isMemory=c.isBuffer=function(t){return null!=t&&!0===t._isBuffer},c.compare=function(t,n){if(!c.isMemory(t)||!c.isMemory(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,e=n.length,i=0,s=Math.min(r,e);i<s;++i)if(t[i]!==n[i]){r=t[i],e=n[i];break}return r<e?-1:e<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);if(void 0===n)for(i=n=0;i<t.length;++i)n+=t[i].length;for(var r=c.allocUnsafe(n),e=0,i=0;i<t.length;++i){var s=t[i];if(ArrayBuffer.isView(s)&&(s=c.from(s)),!c.isMemory(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,e),e+=s.length}return r},c.byteLength=l,c.toArrayBuffer=function(t){for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),e=0;e<t.length;e++)r[e]=t[e];return n},c.prototype._isMemory=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Memory size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)f(this,n,n+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Memory size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)f(this,n,n+3),f(this,n+1,n+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Memory size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)f(this,n,n+7),f(this,n+1,n+6),f(this,n+2,n+5),f(this,n+3,n+4);return this},c.prototype.toLocaleString=c.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?z(this,0,t):r.apply(this,arguments)},c.prototype.equals=function(t){if(c.isMemory(t))return this===t||0===c.compare(this,t);throw new TypeError("Argument must be a Memory")},c.prototype.inspect=function(){var t="",n=c.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(t+=" ... "),"<Memory "+t+">"},c.prototype.compare=function(t,n,r,e,i){if(!c.isMemory(t))throw new TypeError("Argument must be a Memory");if(void 0===r&&(r=t?t.length:0),void 0===e&&(e=0),void 0===i&&(i=this.length),(n=void 0===n?0:n)<0||r>t.length||e<0||i>this.length)throw new RangeError("out of range index");if(i<=e&&r<=n)return 0;if(i<=e)return-1;if(r<=n)return 1;if(this===t)return 0;for(var s=(i>>>=0)-(e>>>=0),a=(r>>>=0)-(n>>>=0),o=Math.min(s,a),u=this.slice(e,i),h=t.slice(n,r),l=0;l<o;++l)if(u[l]!==h[l]){s=u[l],a=h[l];break}return s<a?-1:a<s?1:0},c.prototype.includes=function(t,n,r){return-1!==this.indexOf(t,n,r)},c.prototype.indexOf=function(t,n,r){return y(this,t,n,r,!0)},c.prototype.lastIndexOf=function(t,n,r){return y(this,t,n,r,!1)},c.prototype.write=function(t,n,r,e){if(void 0===n)e="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)e=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Memory.write(string, encoding, offset[, length]) is no longer supported");n>>>=0,isFinite(r)?(r>>>=0,void 0===e&&(e="utf8")):(e=r,r=void 0)}var i=this.length-n;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");e=e||"utf8";for(var s,a,o,u=!1;;)switch(e){case"hex":var h=this,l=t,c=n,f=r,y=(c=Number(c)||0,h.length-c);(!f||y<(f=Number(f)))&&(f=y),(y=l.length)/2<f&&(f=y/2);for(var g=0;g<f;++g){var p=parseInt(l.substr(2*g,2),16);if(C(p))return g;h[c+g]=p}return g;case"utf8":case"utf-8":return y=n,o=r,S(A(t,(a=this).length-y),a,y,o);case"ascii":return d(this,t,n,r);case"latin1":case"binary":return d(this,t,n,r);case"base64":return a=this,o=n,s=r,S(j(t),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,n,r);default:if(u)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),u=!0}},c.prototype.toJSON=function(){return{type:"Memory",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function p(t,n,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+n)throw new RangeError("Trying to access beyond buffer length")}function k(t,n,r,e,i,s){if(!c.isMemory(t))throw new TypeError('"buffer" argument must be a Memory instance');if(i<n||n<s)throw new RangeError('"value" argument is out of bounds');if(r+e>t.length)throw new RangeError("Index out of range")}function v(t,n,r,e){if(r+e>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function b(t,n,r,e,i){return n=+n,r>>>=0,i||v(t,0,r,4),s.write(t,n,r,e,23,4),r+4}function w(t,n,r,e,i){return n=+n,r>>>=0,i||v(t,0,r,8),s.write(t,n,r,e,52,8),r+8}c.prototype.slice=function(t,n){var r=this.length,r=((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):r<n&&(n=r),n<t&&(n=t),this.subarray(t,n));return r.__proto__=c.prototype,r},c.prototype.readUIntLE=function(t,n,r){t>>>=0,n>>>=0,r||p(t,n,this.length);for(var e=this[t],i=1,s=0;++s<n&&(i*=256);)e+=this[t+s]*i;return e},c.prototype.readUIntBE=function(t,n,r){t>>>=0,n>>>=0,r||p(t,n,this.length);for(var e=this[t+--n],i=1;0<n&&(i*=256);)e+=this[t+--n]*i;return e},c.prototype.readUInt8=function(t,n){return t>>>=0,n||p(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,n){return t>>>=0,n||p(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,n){return t>>>=0,n||p(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,n){return t>>>=0,n||p(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,n){return t>>>=0,n||p(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,n,r){t>>>=0,n>>>=0,r||p(t,n,this.length);for(var e=this[t],i=1,s=0;++s<n&&(i*=256);)e+=this[t+s]*i;return(i*=128)<=e&&(e-=Math.pow(2,8*n)),e},c.prototype.readIntBE=function(t,n,r){t>>>=0,n>>>=0,r||p(t,n,this.length);for(var e=n,i=1,s=this[t+--e];0<e&&(i*=256);)s+=this[t+--e]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*n)),s},c.prototype.readInt8=function(t,n){return t>>>=0,n||p(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,n){t>>>=0,n||p(t,2,this.length);n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,n){t>>>=0,n||p(t,2,this.length);n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,n){return t>>>=0,n||p(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,n){return t>>>=0,n||p(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,n){return t>>>=0,n||p(t,4,this.length),s.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,n){return t>>>=0,n||p(t,4,this.length),s.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,n){return t>>>=0,n||p(t,8,this.length),s.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,n){return t>>>=0,n||p(t,8,this.length),s.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,n,r,e){t=+t,n>>>=0,r>>>=0,e||k(this,t,n,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[n]=255&t;++s<r&&(i*=256);)this[n+s]=t/i&255;return n+r},c.prototype.writeUIntBE=function(t,n,r,e){t=+t,n>>>=0,r>>>=0,e||k(this,t,n,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[n+i]=255&t;0<=--i&&(s*=256);)this[n+i]=t/s&255;return n+r},c.prototype.writeUInt8=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,1,255,0),this[n]=255&t,n+1},c.prototype.writeUInt16LE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,2,65535,0),this[n]=255&t,this[n+1]=t>>>8,n+2},c.prototype.writeUInt16BE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=255&t,n+2},c.prototype.writeUInt32LE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t,n+4},c.prototype.writeUInt32BE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t,n+4},c.prototype.writeIntLE=function(t,n,r,e){t=+t,n>>>=0,e||k(this,t,n,r,(e=Math.pow(2,8*r-1))-1,-e);var i=0,s=1,a=0;for(this[n]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[n+i-1]&&(a=1),this[n+i]=(t/s>>0)-a&255;return n+r},c.prototype.writeIntBE=function(t,n,r,e){t=+t,n>>>=0,e||k(this,t,n,r,(e=Math.pow(2,8*r-1))-1,-e);var i=r-1,s=1,a=0;for(this[n+i]=255&t;0<=--i&&(s*=256);)t<0&&0===a&&0!==this[n+i+1]&&(a=1),this[n+i]=(t/s>>0)-a&255;return n+r},c.prototype.writeInt8=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,1,127,-128),this[n]=255&(t=t<0?255+t+1:t),n+1},c.prototype.writeInt16LE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,2,32767,-32768),this[n]=255&t,this[n+1]=t>>>8,n+2},c.prototype.writeInt16BE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=255&t,n+2},c.prototype.writeInt32LE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,4,2147483647,-2147483648),this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4},c.prototype.writeInt32BE=function(t,n,r){return t=+t,n>>>=0,r||k(this,t,n,4,2147483647,-2147483648),this[n]=(t=t<0?4294967295+t+1:t)>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t,n+4},c.prototype.writeFloatLE=function(t,n,r){return b(this,t,n,!0,r)},c.prototype.writeFloatBE=function(t,n,r){return b(this,t,n,!1,r)},c.prototype.writeDoubleLE=function(t,n,r){return w(this,t,n,!0,r)},c.prototype.writeDoubleBE=function(t,n,r){return w(this,t,n,!1,r)},c.prototype.copy=function(t,n,r,e){if(!c.isMemory(t))throw new TypeError("argument should be a Memory");if(r=r||0,e||0===e||(e=this.length),n>=t.length&&(n=t.length),(e=0<e&&e<r?r:e)===r)return 0;if(0===t.length||0===this.length)return 0;if((n=n||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);var i=(e=t.length-n<e-r?t.length-n+r:e)-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,e);else if(this===t&&r<n&&n<e)for(var s=i-1;0<=s;--s)t[s+n]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,e),n);return i},c.prototype.fill=function(t,n,r,e){if("string"==typeof t){if("string"==typeof n?(e=n,n=0,r=this.length):"string"==typeof r&&(e=r,r=this.length),void 0!==e&&"string"!=typeof e)throw new TypeError("encoding must be a string");if("string"==typeof e&&!c.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var i;1===t.length&&(i=t.charCodeAt(0),"utf8"===e&&i<128||"latin1"===e)&&(t=i)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");var s;if(!(r<=n))if(n>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(s=n;s<r;++s)this[s]=t;else{var a=c.isMemory(t)?t:new c(t,e),o=a.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-n;++s)this[s+n]=a[s%o]}return this};var _=/[^+/0-9A-Za-z-_]/g;function A(t,n){n=n||1/0;for(var r,e=t.length,i=null,s=[],a=0;a<e;++a){if(55295<(r=t.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(n-=3)&&s.push(239,191,189);continue}if(a+1===e){-1<(n-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(n-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(n-=3)&&s.push(239,191,189);if(i=null,r<128){if(--n<0)break;s.push(r)}else if(r<2048){if((n-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function j(t){return M.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function S(t,n,r,e){for(var i=0;i<e&&!(i+r>=n.length||i>=t.length);++i)n[i+r]=t[i];return i}function E(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function C(t){return t!=t}return t.Memory=c}),define("skylark-langx-binary/get-type-of",["./binary","./memory"],function(t,n){return function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.isMemory(t)?"memory":t instanceof Uint8Array?"uint8array":t instanceof ArrayBuffer?"arraybuffer":void 0}}),define("skylark-langx-binary/arraylike-to-string",["./binary","./get-type-of"],function(t,i){var s={stringifyByChunk:function(t,n,r){var e=[],i=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;i<s;)e.push("array"===n||"nodebuffer"===n?String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,s))):String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,s)))),i+=r;return e.join("")},stringifyByChar:function(t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n},applyCanBeUsed:{uint8array:function(){try{return 1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return 1===String.fromCharCode.apply(null,Buffer.alloc(1)).length}catch(t){return!1}}()}};return t.arrayLikeToString=function(t){var n=65536,r=i(t),e=!0;if("uint8array"===r?e=s.applyCanBeUsed.uint8array:"memory"===r&&(e=s.applyCanBeUsed.nodebuffer),e)for(;1<n;)try{return s.stringifyByChunk(t,r,n)}catch(t){n=Math.floor(n/2)}return s.stringifyByChar(t)}}),define("skylark-langx-binary/buffer",["./memory"],function(t){return t}),define("skylark-langx-binary/string-to-arraylike",["./binary"],function(t){return t.stringToArrayLike=function(t,n){for(var r=0;r<t.length;++r)n[r]=255&t.charCodeAt(r);return n}}),define("skylark-langx-binary/string-to-binary",["./binary","./string-to-arraylike"],function(t,r){var e="undefined"!=typeof Uint8Array;return t.string2binary=function(t){var n=null,n=new(e?Uint8Array:Array)(t.length);return r(t,n)}}),define("skylark-langx-binary/transform",["./binary","./memory","./get-type-of","./string-to-arraylike","./arraylike-to-string"],function(t,n,e,r,i){function s(t){return t}function a(t,n){for(var r=0;r<t.length;r++)n[r]=t[r];return n}function o(t,n){var r;return n=n||"",t?(r=e(n),o[r][t](n)):n}return o.string={string:s,array:function(t){return r(t,new Array(t.length))},arraybuffer:function(t){return o.string.uint8array(t).buffer},uint8array:function(t){return r(t,new Uint8Array(t.length))},memory:function(t){return r(t,Buffer.alloc(t.length))}},o.array={string:i,array:s,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},memory:function(t){return n.from(t)}},o.arraybuffer={string:function(t){return i(new Uint8Array(t))},array:function(t){return a(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:s,uint8array:function(t){return new Uint8Array(t)},memory:function(t){return n.from(new Uint8Array(t))}},o.uint8array={string:i,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:s,memory:function(t){return n.from(t)}},o.memory={string:i,array:function(t){return a(t,new Array(t.length))},arraybuffer:function(t){return o.memory.uint8array(t).buffer},uint8array:function(t){return a(t,new Uint8Array(t.length))},memory:s},t.transform=o}),define("skylark-langx-binary/main",["./binary","./arraylike-to-string","./buffer","./string-to-arraylike","./string-to-binary","./transform"],function(t){return t}),define("skylark-langx-binary",["skylark-langx-binary/main"],function(t){return t}),define("skylark-langx/binary",["skylark-langx-binary"],function(t){return t}),define("skylark-langx-chars/chars",["skylark-langx-ns","skylark-langx-types"],function(t,n){return t.attach("langx.chars",{isWhiteSpace:function(t){return 32===t||9===t||13===t||10===t}})}),define("skylark-langx-chars/main",["./chars"],function(t){return t}),define("skylark-langx-chars",["skylark-langx-chars/main"],function(t){return t}),define("skylark-langx/chars",["skylark-langx-chars"],function(t){return t}),define("skylark-langx/constructs",["skylark-langx-constructs"],function(t){return t}),define("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(t){return t.attach("langx.datetimes",{parseMilliSeconds:function(t){var t=t.split(" "),n=parseInt(t[0]);if(isNaN(n))return 0;var r=36e5;switch(t[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return r*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),define("skylark-langx-datetimes/to_date",["skylark-langx-types","./datetimes"],function(h,t){let l;return t.toDate=function(t){if(!t||!h.isString(t))return null;if(!(t=(l=l||new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")).exec(t)))return null;var n=parseInt(t[1],10),r=1<=(r=parseInt(t[2],10))&&r<=12?r-1:0,e=1<=(e=parseInt(t[3],10))&&e<=31?e:1;let i=parseInt(t[4],10),s=(i=0<=i&&i<=23?i:0,parseInt(t[5],10));s=0<=s&&s<=59?s:0;var a=0<=(a=parseInt(t[6],10))&&a<=59?a:0,o=t[7]||"Z",u=0<=(u=parseInt(t[8],10))&&u<=23?u:0,t=0<=(t=parseInt(t[9],10)||0)&&t<=59?t:0;return"-"===o?(i+=u,s+=t):"+"===o&&(i-=u,s-=t),new Date(Date.UTC(n,r,e,i,s,a))}}),define("skylark-langx-datetimes/main",["./datetimes","./to_date"],function(t){return t}),define("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(t){return t}),define("skylark-langx/datetimes",["skylark-langx-datetimes"],function(t){return t}),define("skylark-langx/deferred",["skylark-langx-async"],function(t){return t.Deferred}),define("skylark-langx-events/events",["skylark-langx-ns"],function(t){return t.attach("langx.events",{})}),define("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(t){var n,r,e={isBrowser:!0,isNode:null,global:this,browser:null,node:null},i=("object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(e.isNode=!0,e.isBrowser=!1),e.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}(),null);return Object.defineProperty(e,"document",function(){var t;return i||(t="undefined"==typeof window?require("html-element"):window,i=t.document),i}),void 0===e.global.CustomEvent&&(e.global.CustomEvent=function(t,n){this.type=t,this.props=n}),e.isBrowser&&(r=(r=navigator.userAgent).toLowerCase(),r={browser:(r=/(chrome)[ \/]([\w.]+)/.exec(r)||/(webkit)[ \/]([\w.]+)/.exec(r)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(r)||/(msie) ([\w.]+)/.exec(r)||r.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(r)||[])[1]||"",version:r[2]||"0"},n=e.browser={},r.browser&&(n[r.browser]=!0,n.version=r.version),n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0)),e.detects={},t.attach("langx.hoster",e)}),define("skylark-langx-hoster/detects/mobile",["../hoster"],function(t){function i(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}var s=/iPhone/i,a=/iPod/i,o=/iPad/i,u=/\biOS-universal(?:.+)Mac\b/i,h=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,f=/Silk/i,y=/Windows Phone/i,g=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,d=/BB10/i,m=/Opera Mini/i,x=/\b(CriOS|Chrome)(?:.+)Mobile/i,k=/Mobile(?:.+)Firefox\b/i;return t.detects.mobile=function(t){var n,r={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?r.userAgent=t:t&&t.userAgent&&(r={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):r={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var e=(t=r.userAgent).split("[FBAN");return void 0!==(e=(t=void 0!==e[1]?e[0]:t).split("Twitter"))[1]&&(t=e[0]),n=t,(t={apple:{phone:(e=function(t){return t.test(n)})(s)&&!e(y),ipod:e(a),tablet:!e(s)&&(e(o)||i(r))&&!e(y),universal:e(u),device:(e(s)||e(a)||e(o)||e(u)||i(r))&&!e(y)},amazon:{phone:e(c),tablet:!e(c)&&e(f),device:e(c)||e(f)},android:{phone:!e(y)&&e(c)||!e(y)&&e(h),tablet:!e(y)&&!e(c)&&!e(h)&&(e(f)||e(l)),device:!e(y)&&(e(c)||e(f)||e(h)||e(l))||e(/\bokhttp\b/i)},windows:{phone:e(y),tablet:e(g),device:e(y)||e(g)},other:{blackberry:e(p),blackberry10:e(d),opera:e(m),firefox:e(k),chrome:e(x),device:e(p)||e(d)||e(m)||e(k)||e(x)},any:!1,phone:!1,tablet:!1}).any=t.apple.device||t.android.device||t.windows.device||t.other.device,t.phone=t.apple.phone||t.android.phone||t.windows.phone,t.tablet=t.apple.tablet||t.android.tablet||t.windows.tablet,t}}),define("skylark-langx-hoster/is-mobile",["./hoster","./detects/mobile"],function(t,n){return null==t.isMobile&&(t.isMobile=n()),t.isMobile}),define("skylark-langx-hoster/main",["./hoster","./is-mobile"],function(t){return t}),define("skylark-langx-hoster",["skylark-langx-hoster/main"],function(t){return t}),define("skylark-langx-events/event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(r,s,t,n){var a={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function e(e,i){return!i&&e.isDefaultPrevented||(i=i||e,r.each(a,function(t,n){var r=i[t];e[t]=function(){return this[n]=s.returnTrue,r&&r.apply(i,arguments)},e[n]=s.returnFalse})),e}class i extends CustomEvent{constructor(t,n){super(t,n),r.safeMixin(this,n),e(this)}}return i.compatible=e,n.Event=i}),define("skylark-langx-events/listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event"],function(y,t,n,r,e,i){Array.prototype.slice;var l=n.compact,g=(y.isDefined,y.isUndefined),p=(y.isPlainObject,y.isFunction,y.isBoolean),d=y.isString,c=y.isEmptyObject,n=(t.mixin,t.safeMixin,r({listenTo:function(t,n,r,e,i){if(t)if(y.isPlainObject(n)){y.isBoolean(r)?(i=r,r=null):y.isBoolean(e)&&(i=e);var s,a=n;for(s in a){var o=s.match(/^([\w:-]*)\s*(.*)$/),u=o[1],o=o[2]||r;o?this.listenTo(t,u,o,a[s],i):this.listenTo(t,u,a[s],i)}}else{p(e)?(i=e,e=r,r=null):p(r)?(i=r,e=r=null):g(e)&&(i=!1,e=r,r=null),d(e=e||"handleEvent")&&(e=this[e]);for(var h,l=this.ensureListenedEmitter(t),c=(i?r?l.one(n,r,e,this):l.one(n,e,this):r?l.on(n,r,e,this):l.on(n,e,this),this._listeningTo||(this._listeningTo=[])),f=0;f<c.length;f++)if(c[f].obj==t){h=c[f];break}h||c.push(h={obj:t,events:{}});l=h.events,l=l[n]=l[n]||[];-1==l.indexOf(e)&&l.push(e)}return this},listenToOnce:function(t,n,r,e){return this.listenTo(t,n,r,e,1)},unlistenTo:function(t,n,r){var e=this._listeningTo;if(e){d(r)&&(r=this[r]);for(var i=0;i<e.length;i++){var s=e[i];if(!t||t==s.obj){var a,o=s.events;for(a in o)if(!n||n==a){var u=o[a];if(u){for(var h=0;h<u.length;h++)r&&r!=u[i]||(this.ensureListenedEmitter(s.obj).off(a,u[i],this),u[i]=null);u=o[a]=l(u),c(u)&&(o[a]=null)}}c(o)&&(e[i]=null)}}e=this._listeningTo=l(e),c(e)&&(this._listeningTo=null)}return this},ensureListenedEmitter:function(t){return t}}));return e.Listener=n}),define("skylark-langx-events/emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event","./listener"],function(t,n,r,e,i,s,a){var o=Array.prototype.slice,f=r.compact,u=t.isDefined,y=t.isPlainObject,h=t.isFunction,g=t.isString,p=(t.isEmptyObject,n.mixin);n.safeMixin;function d(t){t=(""+t).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var l=new Map,r=a.inherit({_prepareArgs:function(t,n){return n=u(n)?[t].concat(n):[t]},on:function(t,r,e,i,s,a){var o=this,u=this._hub||(this._hub={});if(y(t))s=i,each(t,function(t,n){o.on(t,r,e,n,s,a)});else{if(g(r)||h(i)||(s=i,i=e,e=r,r=void 0),h(e)&&(s=i,i=e,e=null),!i)throw new Error("No callback function");if(!h(i))throw new Error("The callback  is not afunction");(t=g(t)?t.split(/\s/):t).forEach(function(t){var t=d(t),n=t.name,t=t.ns;(u[n]||(u[n]=[])).push({fn:i,selector:r,data:e,ctx:s,ns:t,one:a})})}return this},one:function(t,n,r,e,i){return this.on(t,n,r,e,i,1)},emit:function(h){var l,c;return this._hub&&(l=this,g(h)&&(h=new s(h)),Object.defineProperty(h,"target",{value:this}),c=o.call(arguments,1),c=this._prepareArgs(h,c),[h.type||h.name,"all"].forEach(function(t){var n=d(t),r=n.name,e=n.ns,i=l._hub[r];if(i){for(var s=i.length,a=!1,o=0;o<s;o++){if(h.isImmediatePropagationStopped&&h.isImmediatePropagationStopped())return this;var u=i[o];(!e||u.ns&&u.ns.startsWith(e))&&(u.data&&(h.data=p({},u.data,h.data)),2==c.length&&y(c[1])&&(h.data=h.data||{},p(h.data,c[1])),u.fn.apply(u.ctx,c),u.one)&&(a=!(i[o]=null))}a&&(l._hub[t]=f(i))}})),this},queueEmit:function(t){var n=t.type||t;let r=l.get(this);r||(r=new Map,l.set(this,r));var e=r.get(n),e=(r.delete(n),window.clearTimeout(e),window.setTimeout(()=>{0===r.size&&(r=null,l.delete(this)),this.trigger(t)},0));r.set(n,e)},listened:function(t){return 0<((this._hub||(this._events={}))[t]||[]).length},off:function(t,o){var u;if(t)return u=this._hub||(this._hub={}),(t=g(t)?t.split(/\s/):t).forEach(function(t){var t=d(t),n=t.name,r=t.ns,e=u[n];if(e){var i=[];if(o||r)for(var s=0,a=e.length;s<a;s++)(!o||e[s].fn===o||e[s].fn._===o)&&(!r||e[s].ns&&0==e[s].ns.indexOf(r))||i.push(e[s]);i.length?u[n]=i:delete u[n]}}),this;this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(t){return this.queueEmit.apply(this,arguments)}});return i.Emitter=r}),define("skylark-langx-events/create-event",["./events","./event"],function(t,r){return t.createEvent=function(t,n){return new r(t,n)}}),define("skylark-langx-events/main",["./events","./event","./listener","./emitter","./create-event"],function(t){return t}),define("skylark-langx-events",["skylark-langx-events/main"],function(t){return t}),define("skylark-langx/emitter",["skylark-langx-events"],function(t){return t.Emitter}),define("skylark-langx/evented",["./emitter"],function(t){return t}),define("skylark-langx/events",["skylark-langx-events"],function(t){return t}),define("skylark-langx/funcs",["skylark-langx-funcs"],function(t){return t}),define("skylark-langx-globals/globals",["skylark-langx-ns"],function(t){var n=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();return t.attach("langx.globals",n)}),define("skylark-langx-globals/console",["./globals"],function(t){return t.console=console}),define("skylark-langx-globals/document",["./globals"],function(t){var n;if("undefined"!=typeof document)n=document;else try{n=require("min-document")}catch(t){console.warn("min-document is not finded!",t)}return t.document=n}),define("skylark-langx-globals/window",["./globals"],function(t){var n="undefined"!=typeof window?window:{};return t.window=n}),define("skylark-langx-globals/main",["./globals","./console","./document","./window"],function(t){return t}),define("skylark-langx-globals",["skylark-langx-globals/main"],function(t){return t}),define("skylark-langx/globals",["skylark-langx-globals"],function(t){return t}),define("skylark-langx/hoster",["skylark-langx-hoster"],function(t){return t}),define("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(t,n){for(var r=0;r<256;r++)r,r.toString(16);var e={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,e,i){return e+(t-n)*(i-e)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:r<=t?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:r<=t?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*e.DEG2RAD},radToDeg:function(t){return t*e.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,r,e,i){var s=Math.cos,a=Math.sin,o=s(r/2),r=a(r/2),u=s((n+e)/2),h=a((n+e)/2),l=s((n-e)/2),c=a((n-e)/2),s=s((e-n)/2),a=a((e-n)/2);"XYX"===i?t.set(o*h,r*l,r*c,o*u):"YZY"===i?t.set(r*c,o*h,r*l,o*u):"ZXZ"===i?t.set(r*l,r*c,o*h,o*u):"XZX"===i?t.set(o*h,r*a,r*s,o*u):"YXY"===i?t.set(r*s,o*h,r*a,o*u):"ZYZ"===i?t.set(r*a,r*s,o*h,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return t.attach("langx.maths",e)}),define("skylark-langx-maths/main",["./maths"],function(t){return t}),define("skylark-langx-maths",["skylark-langx-maths/main"],function(t){return t}),define("skylark-langx/maths",["skylark-langx-maths"],function(t){return t}),define("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(t,n){return t.attach("langx.numerics",{toFinite:n.toFinite,toNumber:n.toNumber,toInteger:n.toInteger})}),define("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(t,n,r){for(var e=0;e<256;e++)e,e.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,e,i){return e+(t-n)*(i-e)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:r<=t?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:r<=t?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*i.DEG2RAD},radToDeg:function(t){return t*i.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,r,e,i){var s=Math.cos,a=Math.sin,o=s(r/2),r=a(r/2),u=s((n+e)/2),h=a((n+e)/2),l=s((n-e)/2),c=a((n-e)/2),s=s((e-n)/2),a=a((e-n)/2);"XYX"===i?t.set(o*h,r*l,r*c,o*u):"YZY"===i?t.set(r*c,o*h,r*l,o*u):"ZXZ"===i?t.set(r*l,r*c,o*h,o*u):"XZX"===i?t.set(o*h,r*a,r*s,o*u):"YXY"===i?t.set(r*s,o*h,r*a,o*u):"ZYZ"===i?t.set(r*a,r*s,o*h,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return r.maths=i}),define("skylark-langx-numerics/quaternion",["skylark-langx-klass","./numerics","./maths"],function(t,n,r){t=t({klassName:"Quaternion",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,n,r,e){return this._x=t,this._y=n,this._z=r,this._w=e,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,n){var r,e,i,s,a,o,u;if(t&&t.isEuler)return a=t._x,o=t._y,r=t._z,t=t.order,s=Math.cos,u=Math.sin,e=s(a/2),i=s(o/2),s=s(r/2),a=u(a/2),o=u(o/2),u=u(r/2),"XYZ"===t?(this._x=a*i*s+e*o*u,this._y=e*o*s-a*i*u,this._z=e*i*u+a*o*s,this._w=e*i*s-a*o*u):"YXZ"===t?(this._x=a*i*s+e*o*u,this._y=e*o*s-a*i*u,this._z=e*i*u-a*o*s,this._w=e*i*s+a*o*u):"ZXY"===t?(this._x=a*i*s-e*o*u,this._y=e*o*s+a*i*u,this._z=e*i*u+a*o*s,this._w=e*i*s-a*o*u):"ZYX"===t?(this._x=a*i*s-e*o*u,this._y=e*o*s+a*i*u,this._z=e*i*u-a*o*s,this._w=e*i*s+a*o*u):"YZX"===t?(this._x=a*i*s+e*o*u,this._y=e*o*s+a*i*u,this._z=e*i*u-a*o*s,this._w=e*i*s-a*o*u):"XZY"===t&&(this._x=a*i*s-e*o*u,this._y=e*o*s-a*i*u,this._z=e*i*u+a*o*s,this._w=e*i*s+a*o*u),!1!==n&&this._onChangeCallback(),this;throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,n){var n=n/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var n,t=t.elements,r=t[0],e=t[4],i=t[8],s=t[1],a=t[5],o=t[9],u=t[2],h=t[6],t=t[10],l=r+a+t;return 0<l?(n=.5/Math.sqrt(l+1),this._w=.25/n,this._x=(h-o)*n,this._y=(i-u)*n,this._z=(s-e)*n):a<r&&t<r?(n=2*Math.sqrt(1+r-a-t),this._w=(h-o)/n,this._x=.25*n,this._y=(e+s)/n,this._z=(i+u)/n):t<a?(n=2*Math.sqrt(1+a-r-t),this._w=(i-u)/n,this._x=(e+s)/n,this._y=.25*n,this._z=(o+h)/n):(n=2*Math.sqrt(1+t-r-a),this._w=(s-e)/n,this._x=(i+u)/n,this._y=(o+h)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,n){var r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0):(this._x=0,this._y=-t.z,this._z=t.y)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x),this._w=r,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(r.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,n){var r=this.angleTo(t);return 0!==r&&(n=Math.min(1,n/r),this.slerp(t,n)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(t=1/t),this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,n){return void 0!==n?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var r=t._x,e=t._y,i=t._z,t=t._w,s=n._x,a=n._y,o=n._z,n=n._w;return this._x=r*n+t*s+e*o-i*a,this._y=e*n+t*a+i*s-r*o,this._z=i*n+t*o+r*a-e*s,this._w=t*n-r*s-e*a-i*o,this._onChangeCallback(),this},slerp:function(t,n){if(0!==n){if(1===n)return this.copy(t);var r,e=this._x,i=this._y,s=this._z,a=this._w,o=a*t._w+e*t._x+i*t._y+s*t._z;o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o?(this._w=a,this._x=e,this._y=i,this._z=s):((t=1-o*o)<=Number.EPSILON?(this._w=(r=1-n)*a+n*this._w,this._x=r*e+n*this._x,this._y=r*i+n*this._y,this._z=r*s+n*this._z,this.normalize()):(r=Math.sqrt(t),t=Math.atan2(r,o),o=Math.sin((1-n)*t)/r,n=Math.sin(n*t)/r,this._w=a*o+this._w*n,this._x=e*o+this._x*n,this._y=i*o+this._y*n,this._z=s*o+this._z*n),this._onChangeCallback())}return this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return this._x=t[n=void 0===n?0:n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},fromBufferAttribute:function(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,n,r,e){this._x=t||0,this._y=n||0,this._z=r||0,this._w=void 0!==e?e:1}});return Object.assign(t,{slerp:function(t,n,r,e){return r.copy(t).slerp(n,e)},slerpFlat:function(t,n,r,e,i,s,a){var o,u,h,l=r[e+0],c=r[e+1],f=r[e+2],r=r[e+3],e=i[s+0],y=i[s+1],g=i[s+2],i=i[s+3];r===i&&l===e&&c===y&&f===g||(s=1-a,o=0<=(u=l*e+c*y+f*g+r*i)?1:-1,(h=1-u*u)>Number.EPSILON&&(h=Math.sqrt(h),u=Math.atan2(h,u*o),s=Math.sin(s*u)/h,a=Math.sin(a*u)/h),l=l*s+e*(u=a*o),c=c*s+y*u,f=f*s+g*u,r=r*s+i*u,s===1-a&&(l*=h=1/Math.sqrt(l*l+c*c+f*f+r*r),c*=h,f*=h,r*=h)),t[n]=l,t[n+1]=c,t[n+2]=f,t[n+3]=r}}),Object.assign(t.prototype,{}),n.Quaternion=t}),define("skylark-langx-numerics/vector3",["skylark-langx-klass","./numerics","./maths","./quaternion"],function(t,n,r,e){var i=new e,e=t({klassName:"Vector3",set:function(t,n,r){return this.x=t,this.y=n,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i.setFromEuler(t))},applyAxisAngle:function(t,n){return this.applyQuaternion(i.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,r=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[3]*r+t[6]*e,this.y=t[1]*n+t[4]*r+t[7]*e,this.z=t[2]*n+t[5]*r+t[8]*e,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var n=this.x,r=this.y,e=this.z,t=t.elements,i=1/(t[3]*n+t[7]*r+t[11]*e+t[15]);return this.x=(t[0]*n+t[4]*r+t[8]*e+t[12])*i,this.y=(t[1]*n+t[5]*r+t[9]*e+t[13])*i,this.z=(t[2]*n+t[6]*r+t[10]*e+t[14])*i,this},applyQuaternion:function(t){var n=this.x,r=this.y,e=this.z,i=t.x,s=t.y,a=t.z,t=t.w,o=t*n+s*e-a*r,u=t*r+a*n-i*e,h=t*e+i*r-s*n,n=-i*n-s*r-a*e;return this.x=o*t+n*-i+u*-a-h*-s,this.y=u*t+n*-s+h*-i-o*-a,this.z=h*t+n*-a+o*-s-u*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var n=this.x,r=this.y,e=this.z,t=t.elements;return this.x=t[0]*n+t[4]*r+t[8]*e,this.y=t[1]*n+t[5]*r+t[9]*e,this.z=t[2]*n+t[6]*r+t[10]*e,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},cross:function(t,n){return void 0!==n?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)},crossVectors:function(t,n){var r=t.x,e=t.y,t=t.z,i=n.x,s=n.y,n=n.z;return this.x=e*n-t*s,this.y=t*i-r*n,this.z=r*s-e*i,this},projectOnVector:function(t){var n=t.lengthSq();return 0===n?this.set(0,0,0):(n=t.dot(this)/n,this.copy(t).multiplyScalar(n))},projectOnPlane:function(t){return s.copy(this).projectOnVector(t),this.sub(s)},reflect:function(t){return this.sub(s.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===n?Math.PI/2:(t=this.dot(t)/n,Math.acos(MathUtils.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y,t=this.z-t.z;return n*n+r*r+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,n,r){var e=Math.sin(n)*t;return this.x=e*Math.sin(r),this.y=Math.cos(n)*t,this.z=e*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this},setFromMatrixPosition:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=t,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},setFromMatrix3Column:function(t,n){return this.fromArray(t.elements,3*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return this.x=t[n=void 0===n?0:n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this},_construct:function(t,n,r){this.x=t||0,this.y=n||0,this.z=r||0}}),s=new e;return n.Vector3=e}),define("skylark-langx-numerics/matrix4",["skylark-langx-klass","./numerics","./vector3"],function(t,n,r){var u=new r,e=new r(0,0,0),i=new r(1,1,1),s=new r,a=new r,o=new r,h=t({set:function(t,n,r,e,i,s,a,o,u,h,l,c,f,y,g,p){var d=this.elements;return d[0]=t,d[4]=n,d[8]=r,d[12]=e,d[1]=i,d[5]=s,d[9]=a,d[13]=o,d[2]=u,d[6]=h,d[10]=l,d[14]=c,d[3]=f,d[7]=y,d[11]=g,d[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new h).fromArray(this.elements)},copy:function(t){var n=this.elements,t=t.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],this},copyPosition:function(t){var n=this.elements,t=t.elements;return n[12]=t[12],n[13]=t[13],n[14]=t[14],this},extractBasis:function(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this},extractRotation:function(t){var n=this.elements,r=t.elements,e=1/u.setFromMatrixColumn(t,0).length(),i=1/u.setFromMatrixColumn(t,1).length(),t=1/u.setFromMatrixColumn(t,2).length();return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=0,n[4]=r[4]*i,n[5]=r[5]*i,n[6]=r[6]*i,n[7]=0,n[8]=r[8]*t,n[9]=r[9]*t,n[10]=r[10]*t,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n,r,e,i,s,a,o,u,h,l,c,f,y=this.elements,g=t.x,p=t.y,d=t.z,m=Math.cos(g),g=Math.sin(g),x=Math.cos(p),p=Math.sin(p),k=Math.cos(d),d=Math.sin(d);return"XYZ"===t.order?(s=m*k,a=m*d,o=g*k,u=g*d,y[0]=x*k,y[4]=-x*d,y[8]=p,y[1]=a+o*p,y[5]=s-u*p,y[9]=-g*x,y[2]=u-s*p,y[6]=o+a*p,y[10]=m*x):"YXZ"===t.order?(r=x*d,e=p*k,y[0]=(n=x*k)+(i=p*d)*g,y[4]=e*g-r,y[8]=m*p,y[1]=m*d,y[5]=m*k,y[9]=-g,y[2]=r*g-e,y[6]=i+n*g,y[10]=m*x):"ZXY"===t.order?(r=x*d,e=p*k,y[0]=(n=x*k)-(i=p*d)*g,y[4]=-m*d,y[8]=e+r*g,y[1]=r+e*g,y[5]=m*k,y[9]=i-n*g,y[2]=-m*p,y[6]=g,y[10]=m*x):"ZYX"===t.order?(s=m*k,a=m*d,o=g*k,u=g*d,y[0]=x*k,y[4]=o*p-a,y[8]=s*p+u,y[1]=x*d,y[5]=u*p+s,y[9]=a*p-o,y[2]=-p,y[6]=g*x,y[10]=m*x):"YZX"===t.order?(h=m*x,l=m*p,c=g*x,f=g*p,y[0]=x*k,y[4]=f-h*d,y[8]=c*d+l,y[1]=d,y[5]=m*k,y[9]=-g*k,y[2]=-p*k,y[6]=l*d+c,y[10]=h-f*d):"XZY"===t.order&&(h=m*x,l=m*p,c=g*x,f=g*p,y[0]=x*k,y[4]=-d,y[8]=p*k,y[1]=h*d+f,y[5]=m*k,y[9]=l*d-c,y[2]=c*d-l,y[6]=g*k,y[10]=f*d+h),y[3]=0,y[7]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(e,t,i)},lookAt:function(t,n,r){var e=this.elements;return o.subVectors(t,n),0===o.lengthSq()&&(o.z=1),o.normalize(),s.crossVectors(r,o),0===s.lengthSq()&&(1===Math.abs(r.z)?o.x+=1e-4:o.z+=1e-4,o.normalize(),s.crossVectors(r,o)),s.normalize(),a.crossVectors(o,s),e[0]=s.x,e[4]=a.x,e[8]=o.x,e[1]=s.y,e[5]=a.y,e[9]=o.y,e[2]=s.z,e[6]=a.z,e[10]=o.z,this},multiply:function(t,n){return void 0!==n?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var t=t.elements,n=n.elements,r=this.elements,e=t[0],i=t[4],s=t[8],a=t[12],o=t[1],u=t[5],h=t[9],l=t[13],c=t[2],f=t[6],y=t[10],g=t[14],p=t[3],d=t[7],m=t[11],t=t[15],x=n[0],k=n[4],v=n[8],b=n[12],w=n[1],_=n[5],M=n[9],z=n[13],A=n[2],j=n[6],S=n[10],E=n[14],C=n[3],T=n[7],O=n[11],n=n[15];return r[0]=e*x+i*w+s*A+a*C,r[4]=e*k+i*_+s*j+a*T,r[8]=e*v+i*M+s*S+a*O,r[12]=e*b+i*z+s*E+a*n,r[1]=o*x+u*w+h*A+l*C,r[5]=o*k+u*_+h*j+l*T,r[9]=o*v+u*M+h*S+l*O,r[13]=o*b+u*z+h*E+l*n,r[2]=c*x+f*w+y*A+g*C,r[6]=c*k+f*_+y*j+g*T,r[10]=c*v+f*M+y*S+g*O,r[14]=c*b+f*z+y*E+g*n,r[3]=p*x+d*w+m*A+t*C,r[7]=p*k+d*_+m*j+t*T,r[11]=p*v+d*M+m*S+t*O,r[15]=p*b+d*z+m*E+t*n,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this},determinant:function(){var t=this.elements,n=t[0],r=t[4],e=t[8],i=t[12],s=t[1],a=t[5],o=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14];return t[3]*(+i*o*l-e*u*l-i*a*c+r*u*c+e*a*f-r*o*f)+t[7]*(+n*o*f-n*u*c+i*s*c-e*s*f+e*u*h-i*o*h)+t[11]*(+n*u*l-n*a*f-i*s*l+r*s*f+i*a*h-r*u*h)+t[15]*(-e*a*h-n*o*l+n*a*c+e*s*l-r*s*c+r*o*h)},transpose:function(){var t=this.elements,n=t[1];return t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this},setPosition:function(t,n,r){var e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=n,e[14]=r),this},getInverse:function(t,n){void 0!==n&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,t=t.elements,r=t[0],e=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],y=t[11],g=t[12],p=t[13],d=t[14],t=t[15],m=c*d*h-p*f*h+p*u*y-o*d*y-c*u*t+o*f*t,x=g*f*h-l*d*h-g*u*y+a*d*y+l*u*t-a*f*t,k=l*p*h-g*c*h+g*o*y-a*p*y-l*o*t+a*c*t,v=g*c*u-l*p*u-g*o*f+a*p*f+l*o*d-a*c*d,b=r*m+e*x+i*k+s*v;return 0==b?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(n[0]=m*(m=1/b),n[1]=(p*f*s-c*d*s-p*i*y+e*d*y+c*i*t-e*f*t)*m,n[2]=(o*d*s-p*u*s+p*i*h-e*d*h-o*i*t+e*u*t)*m,n[3]=(c*u*s-o*f*s-c*i*h+e*f*h+o*i*y-e*u*y)*m,n[4]=x*m,n[5]=(l*d*s-g*f*s+g*i*y-r*d*y-l*i*t+r*f*t)*m,n[6]=(g*u*s-a*d*s-g*i*h+r*d*h+a*i*t-r*u*t)*m,n[7]=(a*f*s-l*u*s+l*i*h-r*f*h-a*i*y+r*u*y)*m,n[8]=k*m,n[9]=(g*c*s-l*p*s-g*e*y+r*p*y+l*e*t-r*c*t)*m,n[10]=(a*p*s-g*o*s+g*e*h-r*p*h-a*e*t+r*o*t)*m,n[11]=(l*o*s-a*c*s-l*e*h+r*c*h+a*e*y-r*o*y)*m,n[12]=v*m,n[13]=(l*p*i-g*c*i+g*e*f-r*p*f-l*e*d+r*c*d)*m,n[14]=(g*o*i-a*p*i-g*e*u+r*p*u+a*e*d-r*o*d)*m,n[15]=(a*c*i-l*o*i+l*e*u-r*c*u-a*e*f+r*o*f)*m,this)},scale:function(t){var n=this.elements,r=t.x,e=t.y,t=t.z;return n[0]*=r,n[4]*=e,n[8]*=t,n[1]*=r,n[5]*=e,n[9]*=t,n[2]*=r,n[6]*=e,n[10]*=t,n[3]*=r,n[7]*=e,n[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,t))},makeTranslation:function(t,n,r){return this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,n,-t,0,0,t,n,0,0,0,0,1),this},makeRotationY:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(n,0,t,0,0,1,0,0,-t,0,n,0,0,0,0,1),this},makeRotationZ:function(t){var n=Math.cos(t),t=Math.sin(t);return this.set(n,-t,0,0,t,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,n){var r=Math.cos(n),n=Math.sin(n),e=1-r,i=t.x,s=t.y,t=t.z,a=e*i,o=e*s;return this.set(a*i+r,a*s-n*t,a*t+n*s,0,a*s+n*t,o*s+r,o*t-n*i,0,a*t-n*s,o*t+n*i,e*t*t+r,0,0,0,0,1),this},makeScale:function(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,n,r){return this.set(1,n,r,0,t,1,r,0,t,n,1,0,0,0,0,1),this},compose:function(t,n,r){var e=this.elements,i=n._x,s=n._y,a=n._z,n=n._w,o=i+i,u=s+s,h=a+a,l=i*o,c=i*u,i=i*h,f=s*u,s=s*h,a=a*h,o=n*o,u=n*u,n=n*h,h=r.x,y=r.y,r=r.z;return e[0]=(1-(f+a))*h,e[1]=(c+n)*h,e[2]=(i-u)*h,e[3]=0,e[4]=(c-n)*y,e[5]=(1-(l+a))*y,e[6]=(s+o)*y,e[7]=0,e[8]=(i+u)*r,e[9]=(s-o)*r,e[10]=(1-(l+f))*r,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this},decompose:function(t,n,r){var e=this.elements,i=u.set(e[0],e[1],e[2]).length(),s=u.set(e[4],e[5],e[6]).length(),a=u.set(e[8],e[9],e[10]).length(),t=(this.determinant()<0&&(i=-i),t.x=e[12],t.y=e[13],t.z=e[14],l.copy(this),1/i),e=1/s,o=1/a;return l.elements[0]*=t,l.elements[1]*=t,l.elements[2]*=t,l.elements[4]*=e,l.elements[5]*=e,l.elements[6]*=e,l.elements[8]*=o,l.elements[9]*=o,l.elements[10]*=o,n.setFromRotationMatrix(l),r.x=i,r.y=s,r.z=a,this},makePerspective:function(t,n,r,e,i,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*i/(r-e),u=(n+t)/(n-t),r=(r+e)/(r-e),e=-(s+i)/(s-i),s=-2*s*i/(s-i);return a[0]=2*i/(n-t),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=o,a[9]=r,a[13]=0,a[2]=0,a[6]=0,a[10]=e,a[14]=s,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,n,r,e,i,s){var a=this.elements,o=1/(n-t),u=1/(r-e),h=1/(s-i),n=(n+t)*o,t=(r+e)*u,r=(s+i)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-n,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-t,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-r,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var n=this.elements,r=t.elements,e=0;e<16;e++)if(n[e]!==r[e])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var r=0;r<16;r++)this.elements[r]=t[r+n];return this},toArray:function(t,n){var r=this.elements;return(t=void 0===t?[]:t)[n=void 0===n?0:n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),l=new h;return n.Matrix4=h}),define("skylark-langx-numerics/euler",["skylark-langx-klass","./numerics","./maths","./quaternion","./vector3","./matrix4"],function(t,n,f,r,e,i){var s=new i,a=new r,o=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,n,r,e){return this._x=t,this._y=n,this._z=r,this._order=e||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,n,r){var e=f.clamp,t=t.elements,i=t[0],s=t[4],a=t[8],o=t[1],u=t[5],h=t[9],l=t[2],c=t[6],t=t[10];return"XYZ"===(n=n||this._order)?(this._y=Math.asin(e(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,t),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(c,u),this._z=0)):"YXZ"===n?(this._x=Math.asin(-e(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,t),this._z=Math.atan2(o,u)):(this._y=Math.atan2(-l,i),this._z=0)):"ZXY"===n?(this._x=Math.asin(e(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-l,t),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(o,i))):"ZYX"===n?(this._y=Math.asin(-e(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(c,t),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===n?(this._z=Math.asin(e(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(a,t))):"XZY"===n?(this._z=Math.asin(-e(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(c,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-h,t),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(t,n,r){return s.makeRotationFromQuaternion(t),this.setFromRotationMatrix(s,n,r)},setFromVector3:function(t,n){return this.set(t.x,t.y,t.z,n||this._order)},reorder:function(t){return a.setFromEuler(this),this.setFromQuaternion(a,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new e(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,n,r,e){this._x=t||0,this._y=n||0,this._z=r||0,this._order=e||o.DefaultOrder}});return o.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],o.DefaultOrder="XYZ",n.Euler=o}),define("skylark-langx-numerics/matrix3",["skylark-langx-klass","./numerics"],function(t,n){t=t({klassName:"Matrix3",isMatrix3:!0,set:function(t,n,r,e,i,s,a,o,u){var h=this.elements;return h[0]=t,h[1]=e,h[2]=a,h[3]=n,h[4]=i,h[5]=o,h[6]=r,h[7]=s,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var n=this.elements,t=t.elements;return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],this},extractBasis:function(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var t=t.elements,n=n.elements,r=this.elements,e=t[0],i=t[3],s=t[6],a=t[1],o=t[4],u=t[7],h=t[2],l=t[5],t=t[8],c=n[0],f=n[3],y=n[6],g=n[1],p=n[4],d=n[7],m=n[2],x=n[5],n=n[8];return r[0]=e*c+i*g+s*m,r[3]=e*f+i*p+s*x,r[6]=e*y+i*d+s*n,r[1]=a*c+o*g+u*m,r[4]=a*f+o*p+u*x,r[7]=a*y+o*d+u*n,r[2]=h*c+l*g+t*m,r[5]=h*f+l*p+t*x,r[8]=h*y+l*d+t*n,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this},determinant:function(){var t=this.elements,n=t[0],r=t[1],e=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],t=t[8];return n*s*t-n*a*u-r*i*t+r*a*o+e*i*u-e*s*o},getInverse:function(t,n){void 0!==n&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,t=this.elements,r=n[0],e=n[1],i=n[2],s=n[3],a=n[4],o=n[5],u=n[6],h=n[7],n=n[8],l=n*a-o*h,c=o*u-n*s,f=h*s-a*u,y=r*l+e*c+i*f;return 0==y?this.set(0,0,0,0,0,0,0,0,0):(t[0]=l*(l=1/y),t[1]=(i*h-n*e)*l,t[2]=(o*e-i*a)*l,t[3]=c*l,t[4]=(n*r-i*u)*l,t[5]=(i*s-o*r)*l,t[6]=f*l,t[7]=(e*u-h*r)*l,t[8]=(a*r-e*s)*l,this)},transpose:function(){var t=this.elements,n=t[1];return t[1]=t[3],t[3]=n,n=t[2],t[2]=t[6],t[6]=n,n=t[5],t[5]=t[7],t[7]=n,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this},setUvTransform:function(t,n,r,e,i,s,a){var o=Math.cos(i),i=Math.sin(i);this.set(r*o,r*i,-r*(o*s+i*a)+s+t,-e*i,e*o,-e*(-i*s+o*a)+a+n,0,0,1)},scale:function(t,n){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=n,r[4]*=n,r[7]*=n,this},rotate:function(t){var n=Math.cos(t),t=Math.sin(t),r=this.elements,e=r[0],i=r[3],s=r[6],a=r[1],o=r[4],u=r[7];return r[0]=n*e+t*a,r[3]=n*i+t*o,r[6]=n*s+t*u,r[1]=-t*e+n*a,r[4]=-t*i+n*o,r[7]=-t*s+n*u,this},translate:function(t,n){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this},equals:function(t){for(var n=this.elements,r=t.elements,e=0;e<9;e++)if(n[e]!==r[e])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var r=0;r<9;r++)this.elements[r]=t[r+n];return this},toArray:function(t,n){var r=this.elements;return(t=void 0===t?[]:t)[n=void 0===n?0:n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return n.Matrix3=t}),define("skylark-langx-numerics/transform",["skylark-langx-klass","./numerics"],function(t,n){t=t({klassName:"Transform",value:{get:function(){return this._.value}}});return n.Transform=t}),define("skylark-langx-numerics/matrix-transform",["./numerics","./transform"],function(t,n){n=n.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){(this._={}).matrix=t}});return t.MatrixTransform=n}),define("skylark-langx-numerics/plane",["skylark-langx-klass","./numerics","./matrix3","./vector3"],function(t,n,r,i){var s=new i,e=new i,a=new r,r=t({klassName:"Plane",set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,r,e){return this.normal.set(t,n,r),this.constant=e,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(t,n,r){r=s.subVectors(r,n).cross(e.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,n){return void 0===n&&(console.warn("mathsPlane: .projectPoint() target is now required"),n=new i),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,n){void 0===n&&(console.warn("mathsPlane: .intersectLine() target is now required"),n=new i);var r=t.delta(s),e=this.normal.dot(r);return 0===e?0===this.distanceToPoint(t.start)?n.copy(t.start):void 0:(e=-(t.start.dot(this.normal)+this.constant)/e)<0||1<e?void 0:n.copy(r).multiplyScalar(e).add(t.start)},intersectsLine:function(t){var n=this.distanceToPoint(t.start),t=this.distanceToPoint(t.end);return n<0&&0<t||t<0&&0<n},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),t=new i),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,n){n=n||a.getNormalMatrix(t),t=this.coplanarPoint(s).applyMatrix4(t),n=this.normal.applyMatrix3(n).normalize();return this.constant=-t.dot(n),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,n){this.normal=void 0!==t?t:new i(1,0,0),this.constant=void 0!==n?n:0}});return n.Plane=r}),define("skylark-langx-numerics/rotate-transform",["./numerics","./transform","./matrix-transform"],function(t,n,r){return t.RotateTransform=n.inherit({klassName:"RotateTransform",value:{get:function(){return r.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,n,r){var e=this._={};e.angle=t||0,e.centerX=n||0,e.centerY=r||0}})}),define("skylark-langx-numerics/scale-transform",["./numerics","./transform","./matrix-transform"],function(t,n,r){n=n.inherit({klassName:"ScaleTransform",value:{get:function(){return r.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,n,r,e){var i=this._={};i.scaleX=t||1,i.scaleY=n||1,i.centerX=r||0,i.centerY=e||0}});return t.ScaleTransform=n}),define("skylark-langx-numerics/skew-transform",["./numerics","./transform","./matrix-transform"],function(t,n,r){n=n.inherit({klassName:"SkewTransform",value:{get:function(){return r.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,n){var r=this._={};r.skewX=t||0,r.skewY=n||0}});return t.SkewTransform=n}),define("skylark-langx-numerics/vector2",["skylark-langx-klass","./numerics"],function(t,n){t=t({klassName:"Vector2",set:function(t,n){return this.x=t,this.y=n,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,n){return void 0!==n?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this},sub:function(t,n){return void 0!==n?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var n=this.x,r=this.y,t=t.elements;return this.x=t[0]*n+t[3]*r+t[6],this.y=t[1]*n+t[4]*r+t[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,t=this.y-t.y;return n*n+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,n){return this.x=t[n=void 0===n?0:n],this.y=t[n+1],this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.x,t[n+1]=this.y,t},rotateAround:function(t,n){var r=Math.cos(n),n=Math.sin(n),e=this.x-t.x,i=this.y-t.y;return this.x=e*r-i*n+t.x,this.y=e*n+i*r+t.y,this},_construct:function(t,n){this.x=t||0,this.y=n||0}});return n.Vector2=t}),define("skylark-langx-numerics/transform-matrix",["skylark-langx-klass","./numerics","./vector2"],function(t,n,e){function r(t){return i[t]||(i[t]=Math.PI*t/180)}var l=Math.PI/180,i={},a=t({klassName:"TransformMatrix",_multiplyPoint:function(t){var n=this._,r=t.x*n.m11+t.y*n.m21+n.dx,t=t.x*n.m12+t.y*n.m22+n.dy;return new e(r,t)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){var n,r,e,i,s,a;return this.isIdentity()?t.clone():(a=this.multiplyPoint(t.leftTop),n=this.multiplyPoint(t.leftBottom),r=this.multiplyPoint(t.right),t=this.multiplyPoint(t.rightBottom),e=Math.min(a.x,n.x,r.x,t.x),i=Math.min(a.y,n.y,r.y,t.y),s=Math.max(a.x,n.x,r.x,t.x),a=Math.max(a.y,n.y,r.y,t.y),new Rect(e,i,s-e,a-i))},prepend:function(t,n,r,e,i,s){var a,o,u=this.dx;return 1==t&&0==n&&0==r&&1==e||(a=this.m11,o=this.m21,this.m11=a*t+this.m12*r,this.m12=a*n+this.m12*e,this.m21=o*t+this.m22*r,this.m22=o*n+this.m22*e),this.dx=u*t+this.dy*r+i,this.dy=u*n+this.dy*e+s,this},append:function(t,n,r,e,i,s){var a=this.m11,o=this.m12,u=this.m21,h=this.m22;return this.m11=t*a+n*u,this.m12=t*o+n*h,this.m21=r*a+e*u,this.m22=r*o+e*h,this.dx=i*a+s*u+this.dx,this.dy=i*o+s*h+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,n,r,e,i,s,a,o,u){var h,i=i%360?(i=i*l,h=Math.cos(i),Math.sin(i)):(h=1,0);return(o||u)&&(this.dx-=o,this.dy-=u),s||a?(s*=l,a*=l,this.prepend(h*r,i*r,-i*e,h*e,0,0),this.prepend(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,n)):this.prepend(h*r,i*r,-i*e,h*e,t,n),this},appendTransform:function(t,n,r,e,i,s,a,o,u){var h,i=i%360?(i=i*l,h=Math.cos(i),Math.sin(i)):(h=1,0);return s||a?(s*=l,a*=l,this.append(Math.cos(a),Math.sin(a),-Math.sin(s),Math.cos(s),t,n),this.append(h*r,i*r,-i*e,h*e,0,0)):this.append(h*r,i*r,-i*e,h*e,t,n),(o||u)&&(this.dx-=o*this.m11+u*this.m21,this.dy-=o*this.m12+u*this.m22),this},rotate:function(t){var n=Math.cos(t),t=Math.sin(t),r=this.m11,e=this.m21,i=this.dx;return this.m11=r*n-this.m12*t,this.m12=r*t+this.m12*n,this.m21=e*n-this.m22*t,this.m22=e*t+this.m22*n,this.dx=i*n-this.dy*t,this.dy=i*t+this.dy*n,this},skew:function(t,n){return t*=l,n*=l,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,n){return this.m11*=t,this.m22*=n,this.dx*=t,this.dy*=n,this},translate:function(t,n){return this.dx+=t,this.dy+=n,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,n=this.m12,r=this.m21,e=this.m22,i=this.dx,s=t*e-n*r;return this.m11=e/s,this.m12=-n/s,this.m21=-r/s,this.m22=t/s,this.dx=(r*this.dy-e*i)/s,this.dy=-(t*this.dy-n*i)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){(t=null==t?{}:t).x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var n=Math.atan2(-this.m21,this.m22),r=Math.atan2(this.m12,this.m11);return n==r?(t.rotation=r/l,this.m11<0&&0<=this.m22&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/l,t.skewY=r/l),t},reinitialize:function(t,n,r,e,i,s,a,o,u){return this._initialize(t,n,r,e,i,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=u,this},appendProperties:function(t,n,r){return this.alpha*=t,this.shadow=n||this.shadow,this.compositeOperation=r||this.compositeOperation,this},prependProperties:function(t,n,r){return this.alpha*=t,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||r,this},multiply:function(t){var n=this.m11,r=this.m12,e=this.m21,i=this.m22,s=this.dx,a=this.dy;return this.m11=n*t.m11+e*t.m12,this.m12=r*t.m11+i*t.m12,this.m21=n*t.m21+e*t.m22,this.m22=r*t.m21+i*t.m22,this.dx=n*t.dx+e*t.dy+s,this.dy=r*t.dx+i*t.dy+a,this},clone:function(){var t=this._,t=new a(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},toString:function(){var t=this._;return"[TransformMatrix (m11="+t.m11+" m12="+t.m12+" m21="+t.m21+" m22="+t.m22+" dx="+t.dx+" dy="+t.dy+")]"},_construct:function(t,n,r,e,i,s){var a=this._={};a.m11=t||1,a.m12=n||0,a.m21=r||0,a.m22=e||1,a.dx=i||0,a.dy=s||0}});return Object.assign(a,{translate:function(t,n){return new a(1,0,0,1,t,n)},scale:function(t,n){return new a(t,0,0,n||t,0,0)},rotate:function(t){var n=Math.cos(t),t=Math.sin(t);return new a(n,t,-t,n,0,0)},rotateg:function(t){return this.rotate(r(t))},skewX:function(t){t=Math.tan(t);return new a(1,0,t,1)},skewXg:function(t){return this.skewX(r(t))},skewY:function(t){t=Math.tan(t);return new a(1,t,0,1)},skewYg:function(t){return this.skewY(r(t))},reflect:function(t,n){1==arguments.length&&(n=t.y,t=t.x);var r=t*t,e=n*n,i=r+e,s=2*t*n/i;return new a(2*r/i-1,s,s,2*e/i-1)},project:function(t,n){var r=t*t,e=n*n,i=r+e,t=t*n/i;return yx=t,yy=e/i,new a(r/i,yx,t,yy)},_sandwich:function(t,n,r){return this.translate(n,r).multiply(t).multiply(this.translate(-n,-r))},scaleAt:function(t,n,r,e){switch(arguments.length){case 4:return this._sandwich(this.scale(t,n),r,e);case 3:return"number"==typeof r?this._sandwich(this.scale(t),n,r):this._sandwich(this.scale(t,n),r.x,r.y)}return this._sandwich(this.scale(t),n.x,n.y)},rotateAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.rotate(t),n,r):this._sandwich(this.rotate(t),n.x,n.y)},rotategAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.rotateg(t),n,r):this._sandwich(this.rotateg(t),n.x,n.y)},skewXAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.skewX(t),n,r):this._sandwich(this.skewX(t),n.x,n.y)},skewXgAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.skewXg(t),n,r):this._sandwich(this.skewXg(t),n.x,n.y)},skewYAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.skewY(t),n,r):this._sandwich(this.skewY(t),n.x,n.y)},skewYgAt:function(t,n,r){return 2<arguments.length?this._sandwich(this.skewYg(t),n,r):this._sandwich(this.skewYg(t),n.x,n.y)}}),n.TransformMatrix=a}),define("skylark-langx-numerics/translate-transform",["./numerics","./transform","./matrix-transform"],function(t,n,r,e,i){n=n.inherit({klassName:"TranslateTransform",value:{get:function(){return r.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,n){var r=this._;r.x=t||0,r.y=n||0}});return t.TranslateTransform=n}),define("skylark-langx-numerics/vector4",["skylark-langx-klass","./numerics"],function(t,n){t=t({klassName:"Vector4",set:function(t,n,r,e){return this.x=t,this.y=n,this.z=r,this.w=e,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,n){return void 0!==n?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this},sub:function(t,n){return void 0!==n?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var n=this.x,r=this.y,e=this.z,i=this.w,t=t.elements;return this.x=t[0]*n+t[4]*r+t[8]*e+t[12]*i,this.y=t[1]*n+t[5]*r+t[9]*e+t[13]*i,this.z=t[2]*n+t[6]*r+t[10]*e+t[14]*i,this.w=t[3]*n+t[7]*r+t[11]*e+t[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this},setAxisAngleFromRotationMatrix:function(t){var n,r,e,i,s,a,o,u,h,l,t=t.elements,c=t[0],f=t[4],y=t[8],g=t[1],p=t[5],d=t[9],m=t[2],x=t[6],t=t[10];return Math.abs(f-g)<.01&&Math.abs(y-m)<.01&&Math.abs(d-x)<.01?Math.abs(f+g)<.1&&Math.abs(y+m)<.1&&Math.abs(d+x)<.1&&Math.abs(c+p+t-3)<.1?this.set(1,0,0,0):(i=Math.PI,a=(t+1)/2,o=(f+g)/4,u=(y+m)/4,h=(d+x)/4,(s=(p+1)/2)<(l=(c+1)/2)&&a<l?e=l<.01?(n=0,r=.707106781):(r=o/(n=Math.sqrt(l)),u/n):a<s?e=s<.01?(r=0,n=.707106781):(n=o/(r=Math.sqrt(s)),h/r):a<.01?(r=n=.707106781,e=0):(n=u/(e=Math.sqrt(a)),r=h/e),this.set(n,r,e,i)):(l=Math.sqrt((x-d)*(x-d)+(y-m)*(y-m)+(g-f)*(g-f)),Math.abs(l)<.001&&(l=1),this.x=(x-d)/l,this.y=(y-m)/l,this.z=(g-f)/l,this.w=Math.acos((c+p+t-1)/2)),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,n){return this.x=t[n=void 0===n?0:n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this},toArray:function(t,n){return(t=void 0===t?[]:t)[n=void 0===n?0:n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this},_construct:function(t,n,r,e){this.x=t||0,this.y=n||0,this.z=r||0,this.w=void 0!==e?e:1}});return n.Vector4=t}),define("skylark-langx-numerics/main",["./numerics","./euler","./maths","./matrix3","./matrix4","./matrix-transform","./plane","./quaternion","./rotate-transform","./scale-transform","./skew-transform","./transform","./transform-matrix","./translate-transform","./vector2","./vector3","./vector4"],function(t){return t}),define("skylark-langx-numerics",["skylark-langx-numerics/main"],function(t){return t}),define("skylark-langx/numerics",["skylark-langx-numerics"],function(t){return t}),define("skylark-langx/objects",["skylark-langx-objects"],function(t){return t}),define("skylark-langx-paths/paths",["skylark-langx-ns"],function(t){var n={_makeLong:function(t){return t},_removeDuplicateSeps:function(t){return t=t.replace(this._replaceRegex,this.sep)},sep:"/"};return n._replaceRegex=new RegExp("//+","g"),n.delimiter=":",t.attach("langx.paths",(n.posix=n).win32=n)}),define("skylark-langx-paths/normalize",["./paths"],function(a){return a.normalize=function(t){for(var n=(t=""===t?".":t).charAt(0)===a.sep,r=(t=a._removeDuplicateSeps(t)).split(a.sep),e=[],i=0;i<r.length;i++){var s=r[i];"."!==s&&(".."===s&&(n||!n&&0<e.length&&".."!==e[0])?e.pop():e.push(s))}return!n&&e.length<2&&(1===e.length?""===e[0]&&e.unshift("."):e.push(".")),t=e.join(a.sep),t=n&&t.charAt(0)!==a.sep?a.sep+t:t}}),define("skylark-langx-paths/basename",["./paths","./normalize"],function(e,i){return e.basename=function(t,n){var r;return void 0===n&&(n=""),""===t?t:""===(r=(t=(t=i(t)).split(e.sep))[t.length-1])&&1<t.length?t[t.length-2]:0<n.length&&r.substr(r.length-n.length)===n?r.substr(0,r.length-n.length):r}}),define("skylark-langx-paths/dirname",["./paths"],function(r){return r.dirname=function(t){var n=(t=r._removeDuplicateSeps(t)).charAt(0)===r.sep;return""===(t=t.split(r.sep)).pop()&&0<t.length&&t.pop(),1<t.length||1===t.length&&!n?t.join(r.sep):n?r.sep:"."}}),define("skylark-langx-paths/extname",["./paths","./normalize"],function(r,e){return r.extname=function(t){var n=(t=e(t)).split(r.sep);return".."===(t=""===(t=n.pop())&&0<n.length?n.pop():t)||-1===(n=t.lastIndexOf("."))||0===n?"":t.substr(n)}}),define("skylark-langx-paths/format",["./paths"],function(n){return n.format=function(t){if(null===t||"object"!=typeof t)throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);if("string"!=typeof(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);return(t.dir?t.dir+n.sep:"")+(t.base||"")}}),define("skylark-langx-paths/is-absolute",["./paths"],function(n){return n.isAbsolute=function(t){return 0<t.length&&t.charAt(0)===n.sep}}),define("skylark-langx-paths/join",["./paths","./normalize"],function(s,a){return s.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];for(var r=[],e=0;e<t.length;e++){var i=t[e];if("string"!=typeof i)throw new TypeError("Invalid argument type to segs.join: "+typeof i);""!==i&&r.push(i)}return a(r.join(s.sep))}}),define("skylark-langx-paths/path",["skylark-langx-types","skylark-langx-constructs","./paths"],function(n,t,r){var o=t.klass({_construct:function(){var t=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&n.isString(arguments[0])?this._parse(arguments[0]):n.isArray(arguments[0])&&(t.segments=arguments[0],t.hasLeading=arguments[1]||!1,t.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var t,n=this._.segments,r=0;r<n.length;r++)if("."==n[r]||".."==n[r]){t=!0;break}if(t){for(var e=[],r=0;r<n.length;r++)".."==n[r]?0==e.length?this.hasLeading||e.push(n[r]):".."==e[e.length-1]?e.push(".."):e.pop():"."==n[r]&&1!=n.length||e.push(n[r]);e.length!=n.length&&(this._.segments=e)}},_length:function(t){return this._.segments.length},_parse:function(t){var n=this._,r=(t=t||".").split("/");"/"==t.charAt(0)&&(n.hasLeading=!0,r.shift()),"/"==t.charAt(t.length-1)&&(n.hasTrailing=!0,r.pop()),n.segments=r,n.path=t,this._canonicalize()},append:function(t){return n.isString(t)?this.appendPathStr(t):this.appendPath(t)},appendPath:function(t){var n,r;return t.isAbsolute()?t:(r=this.segments,n=t.segments,r=r.concat(n),new o(r,this.hasLeading,t.hasTrailing))},appendPathStr:function(t){return t=new o(t||""),this.appendPath(t)},clone:function(){return new o(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(t){for(var n=this.segments,r=new o(t).segments;0<r.length&&0<n.length;)if(r.pop()!=n.pop())return!1;return!0},equals:function(t){var n=this._.segments,r=t._.segments;if(n.length!=r.length)return!1;for(var e=0;e<n.length;e++)if(r[e]!=n[e])return!1;return!0},firstSegment:function(t){return this._.segments[t||0]},getExtension:function(){var t=this._.extension,n=this._.path;return t=textension?t:this._.extension=n.substr(n.lastIndexOf(".")+1)},getSegments:function(){return this.segments},getParentPath:function(){var t,n=this._.parentPath;return n||((t=this.segments).pop(),n=this._.parentPath=new o(t,this.hasLeading)),n},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var t=this._.segments;return t[t.length-1]},matchingFirstSegments:function(t){for(var n=this.segments,r=t.segments,e=Math.min(n.length,r.length),i=0,s=0;s<e;s++){if(n[s]!=r[s])return i;i++}return i},normalize:function(){},removeFirstSegments:function(t){var n=this._.segments,r=this._.hasLeading;return hasTrailing=this._.hasTrailing,new o(n.slice(t,n.length),r,hasTrailing)},removeLastSegments:function(t){var n=this._.segments,r=this._.hasLeading;return hasTrailing=this._.hasTrailing,new o(n.slice(0,n.length-(t=t||1)),r,hasTrailing)},removeMatchingFirstSegments:function(t){t=this.matchingFirstSegments(t);return this.removeFirstSegments(t)},removeMatchingLastSegments:function(t){var n=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(n)},removeRelative:function(){var t=this.segments;return 0<t.length&&"."==t[1]?this.removeFirstSegments(1):this},relativeTo:function(t,n){"string"==typeof t&&(t=new o(t));var r=this.segments;if(this.isAbsolute())return this;var e=t.segments,t=this.matchingFirstSegments(t),e=e.length,i=(n&&(e-=1),e-t);if(0==i+r.length-t)return o.EMPTY;for(var s=[],a=0;a<i;a++)s.push("..");for(a=t;a<r.length;a++)s.push(r[a]);return new o(s,!1,this.hasTrailing)},segment:function(t){var n=this._.segments;return n.length<t?null:n[t]},startsWith:function(t){var n=this.matchingFirstSegments(t);return t._length()==n},toString:function(){var t=[],n=this._.segments;this.hasLeading&&t.push("/");for(var r=0;r<n.length;r++)0<r&&t.push("/"),t.push(n[r]);return this.hasTrailing&&t.push("/"),t.join("")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return o.EMPTY=new o(""),r.Path=o}),define("skylark-langx-paths/resolve",["./paths","./normalize"],function(a,o){return a.resolve=function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];for(var r=[],e=0;e<t.length;e++){var i=t[e];if("string"!=typeof i)throw new TypeError("Invalid argument type to paths.join: "+typeof i);""!==i&&(r=i.charAt(0)===a.sep?[]:r).push(i)}var s=o(r.join(a.sep));return 1<s.length&&s.charAt(s.length-1)===a.sep?s.substr(0,s.length-1):s}}),define("skylark-langx-paths/relative",["./paths","./resolve"],function(u,h){return u.relative=function(t,n){t=h(t),n=h(n);for(var r=t.split(u.sep),e=n.split(u.sep),i=(e.shift(),r.shift(),0),t=[],s=0;s<r.length;s++){var a=r[s];if(a!==e[s]){i=r.length-s;break}}t=e.slice(s),(i=1===r.length&&""===r[0]?0:i)>r.length&&(i=r.length);var o="";for(s=0;s<i;s++)o+="../";return o=1<(o+=t.join(u.sep)).length&&o.charAt(o.length-1)===u.sep?o.substr(0,o.length-1):o}}),define("skylark-langx-paths/main",["./paths","./basename","./dirname","./extname","./format","./is-absolute","./join","./normalize","./path","./relative","./resolve"],function(t){return t}),define("skylark-langx-paths",["skylark-langx-paths/main"],function(t){return t}),define("skylark-langx/paths",["skylark-langx-paths"],function(t){return t}),define("skylark-langx/Evented",["./emitter"],function(t){return t}),define("skylark-langx-strings/strings",["skylark-langx-ns"],function(t){return t.attach("langx.strings")}),define("skylark-langx-strings/base64",["./strings"],function(t){return t.base64={decode:function(t,n){n=null!=n&&n;var r,e,i,s,a,o,u="",h=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<t.length;)i=this._keyStr.indexOf(t.charAt(h++)),r=(15&(s=this._keyStr.indexOf(t.charAt(h++))))<<4|(a=this._keyStr.indexOf(t.charAt(h++)))>>2,e=(3&a)<<6|(o=this._keyStr.indexOf(t.charAt(h++))),u+=String.fromCharCode(i<<2|s>>4),64!=a&&(u+=String.fromCharCode(r)),64!=o&&(u+=String.fromCharCode(e));return u=n?u:function(t){var n,r="",e=0;for(c1=c2=0;e<t.length;)(n=t.charCodeAt(e))<128?(r+=String.fromCharCode(n),e++):191<n&&n<224?(c2=t.charCodeAt(e+1),r+=String.fromCharCode((31&n)<<6|63&c2),e+=2):(c2=t.charCodeAt(e+1),c3=t.charCodeAt(e+2),r+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),e+=3);return r}(u)},encode:function(t,n){var r,e,i,s,a,o,u="",h=0;for((n=null!=n&&n)||(t=function(t){t=t.replace(/\r\n/g,"\n");for(var n="",r=0;r<t.length;r++){var e=t.charCodeAt(r);e<128?n+=String.fromCharCode(e):n=127<e&&e<2048?(n+=String.fromCharCode(e>>6|192))+String.fromCharCode(63&e|128):(n=(n+=String.fromCharCode(e>>12|224))+String.fromCharCode(e>>6&63|128))+String.fromCharCode(63&e|128)}return n}(t));h<t.length;)i=(r=t.charCodeAt(h++))>>2,s=(3&r)<<4|(r=t.charCodeAt(h++))>>4,a=(15&r)<<2|(e=t.charCodeAt(h++))>>6,o=63&e,isNaN(r)?a=o=64:isNaN(e)&&(o=64),u=u+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o);return u}}}),define("skylark-langx-strings/camel-case",["./strings"],function(t){return t.camelCase=function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})}}),define("skylark-langx-strings/dasherize",["./strings"],function(t){return t.dasherize=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}}),define("skylark-langx-strings/deserialize-value",["./strings"],function(t){return t.deserializeValue=function(n){try{return n&&("true"==n||"false"!=n&&("null"==n?null:+n+""==n?+n:/^[\[\{]/.test(n)?JSON.parse(n):n))}catch(t){return n}}}),define("skylark-langx-strings/escape-html",["./strings"],function(t){var n=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function r(t){return n[t]}var e=/[&<>"'`=]/g;return t.escapeHTML=function(t){return null==t?"":t?t.toString().replace(e,r):String(t)}}),define("skylark-langx-strings/generate-uuid",["./strings"],function(t){return t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})}}),define("skylark-langx-strings/lower-first",["./strings"],function(t){return t.lowerFirst=function(t){return t.charAt(0).toLowerCase()+t.slice(1)}}),define("skylark-langx-strings/ltrim",["./strings"],function(t){return t.ltrim=function(t){return t.replace(/^\s+/,"")}}),define("skylark-langx-strings/rtrim",["./strings"],function(t){return t.rtrim=function(t){return t.replace(/\s+$/,"")}}),define("skylark-langx-strings/serialize-value",["./strings"],function(t){return t.serializeValue=function(t){return JSON.stringify(t)}}),define("skylark-langx-strings/slugify",["./strings"],function(t){return t.slugify=function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var n="ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;",r=0,e=n.length;r<e;r++)t=t.replace(new RegExp(n.charAt(r),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(r));return t=t.replace(/\s+/g,"-").replace(/-+/g,"-")}}),define("skylark-langx-strings/substitute",["./strings"],function(t){return t.substitute=function(t,i,s,a){function o(t,n){var e,i;return t.match(/\./)?(i=function(t,n){var r=t.pop();return r?n[r]?i(t,e=n[r]):null:e})(t.split(".").reverse(),n):n[t]}return a=a||window,s=s?proxy(a,s):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,n,r){var e=o(n,i);return r&&(e=o(r,a).call(a,e,n)),s(e,n).toString()})}}),define("skylark-langx-strings/template",["./strings"],function(t){function u(t){return"\\"+n[t]}var h=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},l=/\\|'|\r|\n|\u2028|\u2029/g;function c(s,t,n){!t&&n&&(t=n),t=Object.assign({},c.templateSettings,t);var n=RegExp([(t.escape||h).source,(t.interpolate||h).source,(t.evaluate||h).source].join("|")+"|$","g"),a=0,o="__p+='";s.replace(n,function(t,n,r,e,i){return o+=s.slice(a,i).replace(l,u),a=i+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":e&&(o+="';\n"+e+"\n__p+='"),t}),o+="';\n",o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(o=t.variable?o:"with(obj||{}){\n"+o+"}\n")+"return __p;\n";try{var r=new Function(t.variable||"obj","_",o)}catch(t){throw t.source=o,t}function e(t){return r.call(i,t,i)}var i=this,n=t.variable||"obj";return e.source="function("+n+"){\n"+o+"}",e}return c.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},t.template=c}),define("skylark-langx-strings/trim",["./strings"],function(t){return t.trim=function(t){return null==t?"":String.prototype.trim.call(t)}}),define("skylark-langx-strings/trim-null",["./strings"],function(t){const n=/\x00/g;return t.trimNull=function(t){return"string"!=typeof t?(warn("The argument for removeNullCharacters must be a string."),t):t.replace(n,"")}}),define("skylark-langx-strings/unique-id",["./strings"],function(t){var r=0;return t.uniqueId=function(t){var n=++r+"";return t?t+n:n}}),define("skylark-langx-strings/upper-first",["./strings"],function(t){return t.upperFirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}),define("skylark-langx-strings/words",["./strings"],function(t){var n="\\ud800-\\udfff",r="\\u2700-\\u27bf",e="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a=`[${s}]`,o=`[${r}]`,u=`[${e}]`,s=`[^${n}${s+"\\d"+r+e+i}]`,r="(?:\\ud83c[\\udde6-\\uddff]){2}",e="[\\ud800-\\udbff][\\udc00-\\udfff]",i=`[${i}]`,h=`(?:${u}|${s})`,s=`(?:${i}|${s})`,l="(?:['’](?:d|ll|m|re|s|t|ve))?",c="(?:['’](?:D|LL|M|RE|S|T|VE))?",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",n=y+f+`(?:\\u200d(?:${[`[^${n}]`,r,e].join("|")})${y+f})*`,y=`(?:${[o,r,e].join("|")})`+n;const g=RegExp([`${i}?${u}+${l}(?=${[a,i,"$"].join("|")})`,s+`+${c}(?=${[a,i+h,"$"].join("|")})`,i+`?${h}+`+l,i+"+"+c,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",y].join("|"),"g");const p=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),d=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;return t.words=function(t,n){return void 0===n?(p(t)?t.match(g):t.match(d))||[]:t.match(n)||[]}}),define("skylark-langx-strings/main",["./strings","./base64","./camel-case","./dasherize","./deserialize-value","./escape-html","./generate-uuid","./lower-first","./ltrim","./rtrim","./serialize-value","./slugify","./substitute","./template","./trim","./trim-null","./unique-id","./upper-first","./words"],function(t){return t}),define("skylark-langx-strings",["skylark-langx-strings/main"],function(t){return t}),define("skylark-langx/strings",["skylark-langx-strings"],function(t){return t}),define("skylark-langx/stateful",["./Evented","./strings","./objects"],function(t,n,r){var f=r.isEqual,e=r.mixin,i=r.result,s=r.isEmptyObject,y=r.clone,a=n.uniqueId;return t.inherit({_construct:function(t,n){var t=t||{},r=(n=n||{},this.cid=a(this.cidPrefix),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(t=this.parse(t,n)||{}),i(this,"defaults")),t=e({},r,t);this.set(t,n),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return y(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,n,r){if(null!=t){var e;if("object"==typeof t?(e=t,r=n):(e={})[t]=n,!this._validate(e,r=r||{}))return!1;var i,s=r.unset,t=r.silent,a=[],o=this._changing,u=(this._changing=!0,o||(this._previousAttributes=y(this.attributes),this.changed={}),this.attributes),h=this.changed,l=this._previousAttributes;for(i in e)n=e[i],f(u[i],n)||a.push(i),f(l[i],n)?delete h[i]:h[i]=n,s?delete u[i]:u[i]=n;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!t){a.length&&(this._pending=r);for(var c=0;c<a.length;c++)this.trigger("change:"+a[c],this,u[a[c]],r)}if(!o){if(!t)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);this._pending=!1,this._changing=!1}}return this},unset:function(t,n){return this.set(t,void 0,e({},n,{unset:!0}))},clear:function(t){var n,r={};for(n in this.attributes)r[n]=void 0;return this.set(r,e({},t,{unset:!0}))},hasChanged:function(t){return null==t?!s(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&y(this.changed);var n,r=this._changing?this._previousAttributes:this.attributes,e={};for(n in t){var i=t[n];f(r[n],i)||(e[n]=i)}return!s(e)&&e},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return y(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e({},t,{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e({},this.attributes,t);t=this.validationError=this.validate(t,n)||null;return!t||(this.trigger("invalid",this,t,e(n,{validationError:t})),!1)}})}),define("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(t,n){var i=new n.Emitter;return t.attach("langx.topic",{publish:function(t,n,r){var e=[].slice.call(arguments,1);return i.trigger({type:t,data:e})},subscribe:function(t,n,r){function e(t){n.apply(r,t.data)}return i.on(t,e),{remove:function(){i.off(t,e)}}}})}),define("skylark-langx-topic/main",["./topic"],function(t){return t}),define("skylark-langx-topic",["skylark-langx-topic/main"],function(t){return t}),define("skylark-langx/topic",["skylark-langx-topic"],function(t){return t}),define("skylark-langx/types",["skylark-langx-types"],function(t){return t}),define("skylark-langx-urls/urls",["skylark-langx-ns"],function(t){return t.attach("langx.urls",{})}),define("skylark-langx-urls/create_object_url",["./urls"],function(t){"use strict";const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return t.createObjectURL=function(r,t,n=!1){if(!n&&URL.createObjectURL)return n=new Blob([r],{type:t}),URL.createObjectURL(n);let e=`data:${t};base64,`;for(let t=0,n=r.length;t<n;t+=3){var i=255&r[t],s=255&r[t+1],a=255&r[t+2],o=i>>2,i=(3&i)<<4|s>>4,s=t+1<n?(15&s)<<2|a>>6:64,a=t+2<n?63&a:64;e+=u[o]+u[i]+u[s]+u[a]}return e}}),define("skylark-langx-urls/create_valid_absolute_url",["./urls"],function(t){"use strict";return t.createValidAbsoluteUrl=function(t,n){if(t)try{var r=n?new URL(t,n):new URL(t);if(function(t){if(t)switch(t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return 1;default:return}}(r))return r}catch(t){}return null}}),define("skylark-langx-urls/get-absolute-url",["./urls"],function(t){"use strict";return t.getAbsoluteUrl=function(t){var n;return t.match(/^https?:\/\//)||((n=document.createElement("div")).innerHTML=`<a href="${t}">x</a>`,t=n.firstChild.href),t}}),define("skylark-langx-urls/get-file-extension",["./urls"],function(t){"use strict";return t.getFileExtension=function(t){if("string"==typeof t){t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(t)return t.pop().toLowerCase()}return""}}),define("skylark-langx-urls/get-file-name",["./urls"],function(t){"use strict";return t.getFileName=function(t){var n=t.indexOf("#"),r=t.indexOf("?"),n=Math.min(0<n?n:t.length,0<r?r:t.length);return t.substring(t.lastIndexOf("/",n)+1,n)}}),define("skylark-langx-urls/get-query",["./urls"],function(t){"use strict";return t.getQuery=function(t){for(var n={},r=t.split("&"),e=r.length,i=[],s=0;s<e;s++){i=r[s].split("=",2);try{i[0]=decodeURIComponent(i[0]),i[1]=decodeURIComponent(i[1])}catch(t){}void 0===n[i[0]]?n[i[0]]=i[1]:n[i[0]]+=","+i[1]}return n}}),define("skylark-langx-urls/parse-url",["./urls"],function(t){"use strict";return t.parseUrl=function(t){var n=["protocol","hostname","port","pathname","search","hash","host"];let r=document.createElement("a");r.href=t;var e=""===r.host&&"file:"!==r.protocol;let i;e&&((i=document.createElement("div")).innerHTML=`<a href="${t}"></a>`,r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(i));var s={};for(let t=0;t<n.length;t++)s[n[t]]=r[n[t]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=window.location.protocol),e&&document.body.removeChild(i),s}}),define("skylark-langx-urls/is-cross-origin",["./urls","./parse-url"],function(t,r){"use strict";return t.isCrossOrigin=function(t,n=window.location){t=r(t);return(":"===t.protocol?n:t).protocol+t.host!==n.protocol+n.host}}),define("skylark-langx-urls/is_same_origin",["./urls"],function(t){"use strict";return t.isSameOrigin=function(t,n){let r;try{if(!(r=new URL(t)).origin||"null"===r.origin)return!1}catch(t){return!1}return t=new URL(n,r),r.origin===t.origin}}),define("skylark-langx-urls/main",["./urls","./create_object_url","./create_valid_absolute_url","./get-absolute-url","./get-file-extension","./get-file-name","./get-query","./is-cross-origin","./is_same_origin","./parse-url"],function(t){return t}),define("skylark-langx-urls",["skylark-langx-urls/main"],function(t){return t}),define("skylark-langx/urls",["skylark-langx-urls"],function(t){return t}),define("skylark-langx/langx",["./skylark","./arrays","./array-store","./aspect","./async","./binary","./chars","./constructs","./datetimes","./deferred","./emitter","./evented","./events","./funcs","./globals","./hoster","./klass","./maths","./numerics","./objects","./paths","./stateful","./strings","./topic","./types","./urls"],function(t,n,r,e,i,s,a,o,u,h,l,c,f,y,g,p,d,m,x,k,v,b,w,_,M,z){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var A=k.mixin,j=(k.safeMixin,M.isFunction);var S=1;t=t.attach("langx");return A(t,{createEvent:f.createEvent,funcArg:function(t,n,r,e){return j(n)?n.call(t,r,e):n},getQueryParams:function(t){var t=(t=t||window.location.href).split("?"),n={};return 1<t.length&&t[1].split("&").forEach(function(t){t=t.split("=");n[t[0]]=t[1]}),n},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=S++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),A(t,n,e,u,y,x,k,w,M,{ArrayStore:r,async:i,Deferred:h,Emitter:l,Evented:c,hoster:p,klass:d,Stateful:b,topic:_}),t}),define("skylark-langx/main",["./langx"],function(t){return t}),define("skylark-langx",["skylark-langx/main"],function(t){return t});
},this,define,require);
//# sourceMappingURL=sourcemaps/skylark-langx-all.js.map
