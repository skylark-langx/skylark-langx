/**
 * skylark-langx - A simple JavaScript language extension library, including class support, Evented class, Deferred class and some commonly used tool functions.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.5
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(t,n){var r=n.define,require=n.require,i="function"==typeof r&&r.amd,e=!i&&"undefined"!=typeof exports;if(!i&&!r){var s={};r=n.define=function(t,n,r){"function"==typeof r?(s[t]={factory:r,deps:n.map(function(n){return function(t,n){if("."!==t[0])return t;var r=n.split("/"),i=t.split("/");r.pop();for(var e=0;e<i.length;e++)"."!=i[e]&&(".."==i[e]?r.pop():r.push(i[e]));return r.join("/")}(n,t)}),resolved:!1,exports:null},require(t)):s[t]={factory:null,resolved:!0,exports:r}},require=n.require=function(t){if(!s.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var module=s[t];if(!module.resolved){var r=[];module.deps.forEach(function(t){r.push(require(t))}),module.exports=module.factory.apply(n,r)||null,module.resolved=!0}return module.exports}}if(!r)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,require){t("skylark-langx-ns/_attach",[],function(){return function(t,n,r){"string"==typeof n&&(n=n.split("."));for(var i=n.length,e=t,s=0,a=n[s++];s<i;)e=e[a]=e[a]||{},a=n[s++];return e[a]=r||{},e[a]}}),t("skylark-langx-ns/ns",["./_attach"],function(t){var n={attach:function(r,i){return t(n,r,i)}};return n}),t("skylark-langx-ns/main",["./ns"],function(t){return t}),t("skylark-langx-ns",["skylark-langx-ns/main"],function(t){return t}),t("skylark-langx/skylark",["skylark-langx-ns"],function(t){return t}),t("skylark-langx-types/types",["skylark-langx-ns"],function(t){var n,r=Array.isArray,i={}.toString,e=(n={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(t){n["[object "+t+"]"]=t.toLowerCase()}),function(t){return null==t?String(t):n[i.call(t)]||"object"}),s=r||function(t){return object&&object.constructor===Array};function a(t){var n;for(n in t)if(null!==t[n])return!1;return!0}function o(t){return"function"==e(t)}function h(t){return t&&t.nodeType}function u(t){return"number"==typeof t}function c(t){var n=typeof t;return"function"===n||"object"===n&&!!t}function l(t){return"string"==typeof t}function f(t){return t&&t==t.window}function y(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}var m=1/0,x=1.7976931348623157e308,p=NaN,d=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,k=/^0o[0-7]+$/i,_=parseInt;function w(t){if(!t)return 0===t?t:0;if((t=M(t))===m||t===-m){var n=t<0?-1:1;return n*x}return t==t?t:0}function M(t){if("number"==typeof t)return t;if(y(t))return p;if(c(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=c(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(d,"");var r=v.test(t);return r||k.test(t)?_(t.slice(2),r?2:8):g.test(t)?p:+t}return t.attach("langx.types",{isArray:s,isArrayLike:function(t){return!l(t)&&!h(t)&&"number"==typeof t.length&&!o(t)},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===i.call(t)},isDefined:function(t){return void 0!==t},isDocument:function(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE},isElement:function(t){return!(!t||1!==t.nodeType)},isEmpty:a,isEmptyObject:a,isFunction:o,isHtmlNode:h,isNaN:function(t){return isNaN(t)},isNull:function(t){return null===t},isNumber:u,isNumeric:u,isObject:c,isPlainObject:function(t){return c(t)&&!f(t)&&Object.getPrototypeOf(t)==Object.prototype},isString:l,isSameOrigin:function(t){if(t){var n=location.protocol+"//"+location.hostname;return location.port&&(n+=":"+location.port),t.startsWith(n)}},isSymbol:y,isUndefined:function(t){return void 0===t},isWindow:f,type:e,toFinite:w,toNumber:M,toInteger:function(t){var n=w(t),r=n%1;return n==n?r?n-r:n:0}})}),t("skylark-langx-types/main",["./types"],function(t){return t}),t("skylark-langx-types",["skylark-langx-types/main"],function(t){return t}),t("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(t,n){var r,i,e=Object.prototype.hasOwnProperty,s=Array.prototype.slice,a=n.isBoolean,o=(n.isFunction,n.isObject),h=n.isPlainObject,u=n.isArray,c=n.isArrayLike,l=n.isString,f=n.toInteger;function y(t){if(!o(t))return[];var n=[];for(var r in t)n.push(r);return n}function m(t,n){if(!u(n))return null!=t&&e.call(t,n);for(var r=n.length,i=0;i<r;i++){var s=n[i];if(null==t||!e.call(t,s))return!1;t=t[s]}return!!r}function x(t,n,r,i){for(var e in n)i&&void 0!==t[e]||(r&&h(n[e])?(h(t[e])||(t[e]={}),x(t[e],n[e],r,i)):void 0!==n[e]&&(t[e]=n[e]));return t}function p(t){var n=s.call(arguments,0),r=n.shift(),i=!1;return a(n[n.length-1])&&(i=n.pop()),{target:r,sources:n,deep:i}}function d(){var t=p.apply(this,arguments);return t.sources.forEach(function(n){x(t.target,n,t.deep,!1)}),t.target}function g(t){for(var n=y(t),r=n.length,i=Array(r),e=0;e<r;e++)i[e]=t[n[e]];return i}return t.attach("langx.objects",{allKeys:y,attach:t.attach,clone:function t(n,r){var i;if(void 0===n||null===n)i=n;else if(r&&n.clone)i=n.clone();else if(u(n)){i=[];for(var e=0;e<n.length;e++)i.push(t(n[e]))}else if(h(n))for(var s in i={},n)i[s]=t(n[s]);else i=n;return i},defaults:(r=y,i=!0,function(t){var n=arguments.length;if(i&&(t=Object(t)),n<2||null==t)return t;for(var e=1;e<n;e++)for(var s=arguments[e],a=r(s),o=a.length,h=0;h<o;h++){var u=a[h];i&&void 0!==t[u]||(t[u]=s[u])}return t}),each:function(t,n,r){var i,e,s,a;if(t)if(void 0===(i=t.length)){for(e in t)if(t.hasOwnProperty(e)&&(a=t[e],!1===(r?n.call(a,a,e):n.call(a,e,a))))break}else for(s=0;s<i&&(a=t[s],!1!==(r?n.call(a,a,s):n.call(a,s,a)));s++);return this},extend:function(t){var n,r=s.call(arguments,1);"boolean"==typeof t&&(n=t,t=r.shift());0==r.length&&(r=[t],t=this);return r.forEach(function(r){d(t,r,n)}),t},has:m,includes:function(t,n,r,i){t=c(t)?t:g(t),r=r&&!i?f(r):0;var e=t.length;r<0&&(r=nativeMax(e+r,0));return l(t)?r<=e&&t.indexOf(n,r)>-1:!!e&&baseIndexOf(t,n,r)>-1},isMatch:function(t,n){var r=r(n),i=r.length;if(null==t)return!i;for(var e=Object(t),s=0;s<i;s++){var a=r[s];if(n[a]!==e[a]||!(a in e))return!1}return!0},keys:function(t){if(o(t))return[];var n=[];for(var r in t)m(t,r)&&n.push(r);return n},mixin:d,omit:function(t,n,r){if(!t)return null;for(var i=d({},t),e=1;e<arguments.length;e++){var s=arguments[e];s in t&&delete i[s]}return i},pick:function(t,n,r){if(!t)return null;for(var i={},e=1;e<arguments.length;e++){var s=arguments[e];s in t&&(i[s]=t[s])}return i},removeItem:function(t,n){if(u(t)){var r=t.indexOf(n);-1!=r&&t.splice(r,1)}else if(h(t))for(var i in t)if(t[i]==n){delete t[i];break}return this},safeMixin:function(){var t=p.apply(this,arguments);return t.sources.forEach(function(n){x(t.target,n,t.deep,!0)}),t.target},scall:function(t,n,r,i){if(t&&t[n]){var e=s.call(arguments,2);return t[n].apply(t,e)}},values:g})}),t("skylark-langx-objects/isEqual",["skylark-langx-types","./objects"],function(t,n){var r,i,e=t.isFunction,s="undefined"!=typeof Symbol?Symbol.prototype:null;return r=function(t,n,r,e){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var s=typeof t;return("function"===s||"object"===s||"object"==typeof n)&&i(t,n,r,e)},i=function(t,n,i,a){var o=toString.call(t);if(o!==toString.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return s.valueOf.call(t)===s.valueOf.call(n)}var h="[object Array]"===o;if(!h){if("object"!=typeof t||"object"!=typeof n)return!1;var u=t.constructor,c=n.constructor;if(u!==c&&!(e(u)&&u instanceof u&&e(c)&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1}i=i||[],a=a||[];for(var l=i.length;l--;)if(i[l]===t)return a[l]===n;if(i.push(t),a.push(n),h){if((l=t.length)!==n.length)return!1;for(;l--;)if(!r(t[l],n[l],i,a))return!1}else{var f,y=Object.keys(t);if(l=y.length,Object.keys(n).length!==l)return!1;for(;l--;)if(f=y[l],void 0===n[f]||!r(t[f],n[f],i,a))return!1}return i.pop(),a.pop(),!0},n.isEqual=function(t,n){return r(t,n)}}),t("skylark-langx-objects/result",["skylark-langx-types","./objects"],function(t,n){var r=t.isArray,i=t.isFunction;return n.result=function(t,n,e){r(n)||(n=n.split("."));var s=n.length;if(!s)return i(e)?e.call(t):e;for(var a=0;a<s;a++){var o=null==t?void 0:t[n[a]];void 0===o&&(o=e,a=s),t=i(o)?o.call(t):o}return t}}),t("skylark-langx-objects/main",["./objects","./isEqual","./result"],function(t){return t}),t("skylark-langx-objects",["skylark-langx-objects/main"],function(t){return t}),t("skylark-langx-arrays/arrays",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects"],function(t,n,r){var i=Array.prototype.filter,e=Array.prototype.find,s=n.isArrayLike;function a(t,n,r,i){for(var e=t.length,s=r+(i?1:-1);i?s--:++s<e;)if(n(t[s],s,t))return s;return-1}function o(t){return t!=t}function h(t){if(s(t)){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(s(i))for(var e=0;e<i.length;e++)n.push(i[e]);else n.push(i)}return n}return t}function u(t,n,r){return s(t)?(r||[]).concat(Array.prototype.slice.call(t,n||0)):[t]}return t.attach("langx.arrays",{baseFindIndex:a,baseIndexOf:function(t,n,r){if(n!=n)return a(t,o,r);var i=r-1,e=t.length;for(;++i<e;)if(t[i]===n)return i;return-1},compact:function(t){return i.call(t,function(t){return null!=t})},first:function(t,n){return n?t.slice(0,n):t[0]},filter:function(t,n){return i.call(t,n)},find:function(t,n){return e.call(t,n)},flatten:h,grep:function(t,n){var i=[];return r.each(t,function(t,r){n(r,t)&&i.push(r)}),i},inArray:function(t,n){if(!n)return-1;var r;if(n.indexOf)return n.indexOf(t);r=n.length;for(;r--;)if(n[r]===t)return r;return-1},indexOf:function(t,n){return t.indexOf(n)},makeArray:u,toArray:u,last:function(t){return t[t.length-1]},merge:function(t,n){var r=n.length,i=t.length,e=0;if("number"==typeof r)for(;e<r;e++)t[i++]=n[e];else for(;void 0!==n[e];)t[i++]=n[e++];return t.length=i,t},forEach:function(t,n){if(t.forEach)return t.forEach(n);for(var r=0;r<t.length;r++)n(t[r],r)},map:function(t,n){var r,i,e,a=[];if(s(t))for(i=0;i<t.length;i++)null!=(r=n.call(t[i],t[i],i))&&a.push(r);else for(e in t)null!=(r=n.call(t[e],t[e],e))&&a.push(r);return h(a)},reduce:function(t,n,r){return Array.prototype.reduce.call(t,n,r)},uniq:function(t){return i.call(t,function(n,r){return t.indexOf(n)==r})}})}),t("skylark-langx-arrays/main",["./arrays"],function(t){return t}),t("skylark-langx-arrays",["skylark-langx-arrays/main"],function(t){return t}),t("skylark-langx/arrays",["skylark-langx-arrays"],function(t){return t}),t("skylark-langx-constructs/constructs",["skylark-langx-ns"],function(t){return t.attach("langx.constructs",{})}),t("skylark-langx-constructs/inherit",["./constructs"],function(t){return t.inherit=function(t,n){if("function"!=typeof n&&n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&Object.setPrototypeOf(t,n)}}),t("skylark-langx-constructs/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","./constructs","./inherit"],function(t,n,r,i,e,s){var a=i.uniq,o=r.has,h=r.mixin,u=n.isArray,c=n.isDefined,l=function(){function t(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function r(i,e,l,f){u(e)&&(f=l,l=e,e=null),e=e||Object,c(l)&&!u(l)&&(f=l,l=!1);var y=e;l&&(l=function(t,n){var r=[];return n.forEach(function(t){if(o(t,"__mixins__"))throw new Error("nested mixins");for(var n=[];t;)n.unshift(t),t=t.superclass;r=r.concat(n)}),(r=(r=a(r)).filter(function(n){for(var r=t;r;){if(n===r)return!1;if(o(r,"__mixins__"))for(var i=r.__mixins__,e=0;e<i.length;e++)if(i[e]===n)return!1;r=r.superclass}return!0})).length>0&&r}(y,l)),l&&(y=function(t,n){for(var r=t,i=0;i<n.length;i++){var e=new Function;s(e,r),e.superclass=null,h(e.prototype,n[i].prototype),e.prototype.__mixin__=n[i],r=e}return r}(y,l));var m=i.klassName||"",x=new Function("return function "+m+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return s(x,y),x.superclass=e,x._constructor||(x._constructor=t),l&&(x.__mixins__=l),x.partial||(x.partial=function(t,r){return function(t,r,i){var e=t.prototype,s=t.superclass.prototype,a=i&&i.noOverrided;i&&i.overrides;for(var o in r)if("constructor"!==o){var h=r[o];"function"==typeof r[o]?e[o]=h._constructor||a||"function"!=typeof s[o]?h:function(t,n,r){return function(){var t=this.overrided;this.overrided=r;var i=n.apply(this,arguments);return this.overrided=t,i}}(0,h,s[o]):n.isPlainObject(h)&&null!==h&&h.get?Object.defineProperty(e,o,h):e[o]=h}return t}(this,t,r)}),x.inherit||(x.inherit=function(t,n,i){return r(t,this,n,i)}),x.partial(i,f),x}}();return e.klass=l}),t("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-constructs/klass"],function(t,n){return t.attach("langx.klass",n)}),t("skylark-langx-klass/main",["./klass"],function(t){return t}),t("skylark-langx-klass",["skylark-langx-klass/main"],function(t){return t}),t("skylark-langx/klass",["skylark-langx-klass"],function(t){return t}),t("skylark-langx/ArrayStore",["./klass"],function(t){var n=function(t){if(!t)return t;var r=!!t.then;function i(i){t[i]=function(){var e=arguments,s=Deferred.when(t,function(t){return n(Array.prototype[i].apply(t,e))});if("forEach"!==i||r)return s}}return r&&(t=Object.delegate(t)),i("forEach"),i("filter"),i("map"),null==t.total&&(t.total=Deferred.when(t,function(t){return t.length})),t},r=t({klassName:"ArrayStore",queryEngine:function(t,n){switch(typeof t){default:throw new Error("Can not query with a "+typeof t);case"object":case"undefined":var r=t;t=function(t){for(var n in r){var i=r[n];if(i&&i.test){if(!i.test(t[n],t))return!1}else if(i!=t[n])return!1}return!0};break;case"string":if(!this[t])throw new Error("No filter function "+t+" was found in store");t=this[t];case"function":}function i(r){var i=function(t,n,r){var i,e=0,s=t&&t.length||0,a=[];s&&"string"==typeof t&&(t=t.split(""));"string"==typeof n&&(n=cache[n]||buildFn(n));if(r)for(;e<s;++e)i=t[e],n.call(r,i,e,t)&&a.push(i);else for(;e<s;++e)i=t[e],n(i,e,t)&&a.push(i);return a}(r,t),e=n&&n.sort;if(e&&i.sort("function"==typeof e?e:function(t,n){for(var r,i=0;r=e[i];i++){var s=t[r.attribute],a=n[r.attribute];if(s=null!=s?s.valueOf():s,a=null!=a?a.valueOf():a,s!=a)return!!r.descending==(null==s||s>a)?-1:1}return 0}),n&&(n.start||n.count)){var s=i.length;(i=i.slice(n.start||0,(n.start||0)+(n.count||1/0))).total=s}return i}return i.matches=t,i},idProperty:"id",get:function(t){return this.data[this.index[t]]},getIdentity:function(t){return t[this.idProperty]},put:function(t,n){var r=this.data,i=this.index,e=this.idProperty,s=t[e]=n&&"id"in n?n.id:e in t?t[e]:Math.random();if(s in i){if(n&&!1===n.overwrite)throw new Error("Object already exists");r[i[s]]=t}else i[s]=r.push(t)-1;return s},add:function(t,n){return(n=n||{}).overwrite=!1,this.put(t,n)},remove:function(t){var n=this.index,r=this.data;if(t in n)return r.splice(n[t],1),this.setData(r),!0},query:function(t,r){return n(this.queryEngine(t,r)(this.data))},setData:function(t){t.items?(this.idProperty=t.identifier||this.idProperty,t=this.data=t.items):this.data=t,this.index={};for(var n=0,r=t.length;n<r;n++)this.index[t[n][this.idProperty]]=n},init:function(t){for(var n in t)this[n]=t[n];this.setData(this.data||[])}});return r}),t("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(t){var n,r=0;function i(t){return function(i,e,s,a){var o,h=i[e];h&&h.target==i||(i[e]=o=function(){for(var t=r,i=arguments,e=o.before;e;)i=e.advice.apply(this,i)||i,e=e.next;if(o.around)var s=o.around.advice(this,i);for(var a=o.after;a&&a.id<t;){if(a.receiveArguments){var h=a.advice.apply(this,i);s=h===n?s:h}else s=a.advice.call(this,s,i);a=a.next}return s},h&&(o.around={advice:function(t,n){return h.apply(t,n)}}),o.target=i);var u=function(t,n,i,e){var s,a=t[n],o="around"==n;if(o){var h=i(function(){return a.advice(this,arguments)});s={remove:function(){h&&(h=t=i=null)},advice:function(t,n){return h?h.apply(t,n):a.advice(t,n)}}}else s={remove:function(){if(s.advice){var r=s.previous,e=s.next;e||r?(r?r.next=e:t[n]=e,e&&(e.previous=r)):delete t[n],t=i=s.advice=null}},id:r++,advice:i,receiveArguments:e};if(a&&!o)if("after"==n){for(;a.next&&(a=a.next););a.next=s,s.previous=a}else"before"==n&&(t[n]=s,s.next=a,a.previous=s);else t[n]=s;return s}(o||h,t,s,a);return s=null,u}}return t.attach("langx.aspect",{after:i("after"),around:i("around"),before:i("before")})}),t("skylark-langx-aspect/main",["./aspect"],function(t){return t}),t("skylark-langx-aspect",["skylark-langx-aspect/main"],function(t){return t}),t("skylark-langx/aspect",["skylark-langx-aspect"],function(t){return t}),t("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(t,n,r){return t.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),t("skylark-langx-funcs/defer",["skylark-langx-types","./funcs"],function(t,n){return n.defer=function(n,r,i,e){var s={cancel:null},a=n;t.isNumber(r)||t.isFunction(r)||(e=i,i=r,r=0);i&&(a=function(){n.apply(e,i)});if(t.isFunction(r)){var o=!1;r(function(){o||a()}),s.cancel=function(){o=!0}}else{var h;0==r&&requestAnimationFrame?(h=requestAnimationFrame(a),s.cancel=function(){return cancelAnimationFrame(h)}):(h=setTimeoutout(a,r),s.cancel=function(){return clearTimeout(h)})}return s}}),t("skylark-langx-funcs/debounce",["./funcs","./defer"],function(t,n){return t.debounce=function(t,r,i){var e,s,a=function(){var a=this,h=arguments;return o(),e=setTimeout(function(){e=null,i?s=n(t,h,a):t.apply(a,h)},r),{cancel:o}},o=a.cancel=function(){e&&clearTimeout(e),s&&s.cancel(),e=void 0,s=void 0};return a}}),t("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(t,n){var r=t.mixin,i=function(){function t(){}return function(n,i){t.prototype=n;var e=new t;return t.prototype=null,i&&r(e,i),e}}();return n.delegate=i}),t("skylark-langx-funcs/loop",["./funcs"],function(t){function n(t){this.callback=t,this.running=!1,this.id=-1}return n.prototype.start=function(){if(!this.running){this.running=!0;var t=this;!function n(){t.callback();t.running&&(t.id=requestAnimationFrame(n))}()}},n.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},t.loop=function(t){return new n(t)}}),t("skylark-langx-funcs/negate",["./funcs"],function(t){return t.negate=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(...n){return!t.apply(this,n)}}}),t("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(t,n){var r=Array.prototype.slice,i=t.isFunction,e=t.isString;return n.bind=n.proxy=function t(n,s){var a=2 in arguments&&r.call(arguments,2);if(i(n)){return function(){return n.apply(s,a?a.concat(r.call(arguments)):arguments)}}if(e(s))return a?(a.unshift(n[s],n),t.apply(null,a)):t(n[s],n);throw new TypeError("expected function")}}),t("skylark-langx-funcs/template",["skylark-langx-objects","./funcs","./proxy"],function(t,n,r){Array.prototype.slice;var i={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g;function o(n,o,h){var u;h=t.defaults({},h,i);var c=RegExp([(h.escape||e).source,(h.interpolate||e).source,(h.evaluate||e).source].join("|")+"|$","g"),l=0,f="__p+='";n.replace(c,function(t,r,i,e,o){return f+=n.slice(l,o).replace(a,function(t){return"\\"+s[t]}),r&&(f+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),i&&(f+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),e&&(f+="';\n"+e+"\n__p+='"),l=o+t.length,t}),f+="';\n",h.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{u=new Function(h.variable||"obj","_",f)}catch(t){throw t.source=f,t}if(o)return u(o,this);var y=r(function(t){return u.call(this,t,this)},this),m=h.variable||"obj";return y.source="function("+m+"){\n"+f+"}",y}return o.templateSettings=n.templateSettings=i,n.template=o}),t("skylark-langx-funcs/throttle",["./funcs"],function(t){return t.throttle=function(t,n){let r=window.performance.now();return function(...i){const e=window.performance.now();e-r>=n&&(t(...i),r=e)}}}),t("skylark-langx-funcs/main",["./funcs","./debounce","./defer","./delegate","./loop","./negate","./proxy","./template","./throttle"],function(t){return t}),t("skylark-langx-funcs",["skylark-langx-funcs/main"],function(t){return t}),t("skylark-langx-async/Deferred",["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(t,n,r){"use strict";var i=Array.prototype.slice,e=n.proxy,s=t.makeArray,a=r.result,o=r.mixin;o(Promise.prototype,{always:function(t){return this.then(t,t),this},done:function(){for(var t=0;t<arguments.length;t++)this.then(arguments[t]);return this},fail:function(t){return this.catch(t),this}});var h=function(){var t=this;this.promise=u(new Promise(function(n,r){t._resolve=n,t._reject=r}))};function u(t){if(t.isResolved)return t;var n=!0,r=!1,i=!1,e=t.then(function(t){return i=!0,n=!1,t},function(t){throw r=!0,n=!1,t});e.isResolved=function(){return i},e.isPending=function(){return n},e.isRejected=function(){return r},e.state=function(){return i?"resolved":r?"rejected":"pending"};var s=[],a=[];return e.then=function(t,n,r){return r&&this.progress(r),u(Promise.prototype.then.call(this,t&&function(n){return n&&void 0!==n.__ctx__?t.apply(n.__ctx__,n):t(n)},n&&function(t){return t&&void 0!==t.__ctx__?n.apply(t.__ctx__,t):n(t)}))},e.progress=function(t){return s.forEach(function(n){t(n)}),a.push(t),this},e.pipe=e.then,e.notify=function(t){try{return s.push(t),a.forEach(function(n){return n(t)})}catch(t){this.reject(t)}return this},e}return h.prototype.resolve=function(t){var n=i.call(arguments);return this.resolveWith(null,n)},h.prototype.resolveWith=function(t,n){return(n=n?s(n):[]).__ctx__=t,this._resolve(n),this._resolved=!0,this},h.prototype.notify=function(t){var n=a(this,"promise");return n.notify(t),this},h.prototype.reject=function(t){var n=i.call(arguments);return this.rejectWith(null,n)},h.prototype.rejectWith=function(t,n){return(n=n?s(n):[]).__ctx__=t,this._reject(n),this._rejected=!0,this},h.prototype.isResolved=function(){var t=a(this,"promise");return t.isResolved()},h.prototype.isRejected=function(){var t=a(this,"promise");return t.isRejected()},h.prototype.state=function(){var t=a(this,"promise");return t.state()},h.prototype.then=function(t,n,r){var i=a(this,"promise");return i.then(t,n,r)},h.prototype.progress=function(t){var n=a(this,"promise");return n.progress(t)},h.prototype.catch=function(t){var n=a(this,"promise");return n.catch(t)},h.prototype.always=function(){var t=a(this,"promise");return t.always.apply(t,arguments),this},h.prototype.done=function(){var t=a(this,"promise");return t.done.apply(t,arguments),this},h.prototype.fail=function(t){var n=a(this,"promise");return n.fail(t),this},h.all=function(t){var n=new h;return Promise.all(t).then(n.resolve.bind(n),n.reject.bind(n)),a(n,"promise")},h.first=function(t){return u(Promise.race(t))},h.when=function(t,n,r,i){var s=t&&"function"==typeof t.then,a=s&&t instanceof Promise;if(!s)return arguments.length>1?n?n(t):t:(new h).resolve(t);if(!a){var o=new h(t.cancel);t.then(e(o.resolve,o),e(o.reject,o),o.notify),t=o.promise}return n||r||i?t.then(n,r,i):t},h.reject=function(t){var n=new h;return n.reject(t),n.promise},h.immediate=h.resolve=function(t){var n=new h;return n.resolve.apply(n,arguments),n.promise},h.promise=function(t){var n=new h;return t(n.resolve.bind(n),n.reject.bind(n),n.progress.bind(n)),n.promise},h}),t("skylark-langx-async/async",["skylark-langx-ns","skylark-langx-objects","./Deferred"],function(t,n,r){var i=n.each,e={Deferred:r,parallel:function(t,n,e){var s=[];return e=e||null,n=n||[],i(t,function(t,r){s.push(r.apply(e,n))}),r.all(s)},series:function(t,n,e){var s=[],a=new r,o=a.promise;return e=e||null,n=n||[],a.resolve(),i(t,function(t,r){o=o.then(function(){return r.apply(e,n)}),s.push(o)}),r.all(s)},waterful:function(t,n,e){var s=new r,a=s.promise;return e=e||null,n=n||[],s.resolveWith(e,n),i(t,function(t,n){a=a.then(n)}),a}};return t.attach("langx.async",e)}),t("skylark-langx-async/main",["./async"],function(t){return t}),t("skylark-langx-async",["skylark-langx-async/main"],function(t){return t}),t("skylark-langx/async",["skylark-langx-async"],function(t){return t}),t("skylark-langx-binary/binary",["skylark-langx-ns"],function(t){"use strict";return t.attach("langx.binary",{fromBase64:function(t){for(var n,r,i,e,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=t.length/4*3,o=new ArrayBuffer(a),h=new Uint8Array(o),u=0,c=0;u<a;u+=3)n=s.indexOf(t.charAt(c++)),r=s.indexOf(t.charAt(c++)),i=s.indexOf(t.charAt(c++)),e=s.indexOf(t.charAt(c++)),h[u]=n<<2|r>>4,64!==i&&(h[u+1]=(15&r)<<4|i>>2),64!==e&&(h[u+2]=(3&i)<<6|e);return o},fromBinaryString:function(t){for(var n=t.length,r=new ArrayBuffer(n),i=new Uint8Array(r),e=0;e<n;e++)i[e]=t.charCodeAt(e);return r},fromBuffer:function(t){for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i++)r[i]=t[i];return n}})}),t("skylark-langx-binary/main",["./binary"],function(t){return t}),t("skylark-langx-binary",["skylark-langx-binary/main"],function(t){return t}),t("skylark-langx/binary",["skylark-langx-binary"],function(t){return t}),t("skylark-langx-constructs/main",["./constructs","./inherit","./klass"],function(t){return t}),t("skylark-langx-constructs",["skylark-langx-constructs/main"],function(t){return t}),t("skylark-langx/constructs",["skylark-langx-constructs"],function(t){return t}),t("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(t){return t.attach("langx.datetimes",{parseMilliSeconds:function(t){var n=t.split(" "),r=parseInt(n[0]);if(isNaN(r))return 0;switch(n[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*r;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*r;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*r;case"days":case"day":case"DD":case"dd":case"d":return 864e5*r;case"months":case"month":case"MM":case"M":return 24192e5*r;case"weeks":case"week":case"W":case"w":return 6048e5*r;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*r;default:return 0}}})}),t("skylark-langx-datetimes/main",["./datetimes"],function(t){return t}),t("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(t){return t}),t("skylark-langx/datetimes",["skylark-langx-datetimes"],function(t){return t}),t("skylark-langx/Deferred",["skylark-langx-async"],function(t){return t.Deferred}),t("skylark-langx-events/events",["skylark-langx-ns"],function(t){return t.attach("langx.events",{})}),t("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(t){var n={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(n.isNode=!0,n.isBrowser=!1),n.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var r=null;if(Object.defineProperty(n,"document",function(){if(!r){var t="undefined"==typeof window?require("html-element"):window;r=t.document}return r}),void 0===n.global.CustomEvent&&(n.global.CustomEvent=function(t,n){this.type=t,this.props=n}),n.isBrowser){var i=function(t){t=t.toLowerCase();var n=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:n[1]||"",version:n[2]||"0"}}(navigator.userAgent),e=n.browser={};i.browser&&(e[i.browser]=!0,e.version=i.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0)}return n.detects={},t.attach("langx.hoster",n)}),t("skylark-langx-hoster/detects/mobile",["../hoster"],function(t){var n=/iPhone/i,r=/iPod/i,i=/iPad/i,e=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,o=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,h=/Silk/i,u=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,l=/BlackBerry/i,f=/BB10/i,y=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,x=/Mobile(?:.+)Firefox\b/i,p=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};return t.detects.mobile=function(t){var d={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?d.userAgent=t:t&&t.userAgent&&(d={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):d={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var g=d.userAgent,v=g.split("[FBAN");void 0!==v[1]&&(g=v[0]);void 0!==(v=g.split("Twitter"))[1]&&(g=v[0]);var k=function(t){return function(n){return n.test(t)}}(g),_={apple:{phone:k(n)&&!k(u),ipod:k(r),tablet:!k(n)&&(k(i)||p(d))&&!k(u),universal:k(e),device:(k(n)||k(r)||k(i)||k(e)||p(d))&&!k(u)},amazon:{phone:k(o),tablet:!k(o)&&k(h),device:k(o)||k(h)},android:{phone:!k(u)&&k(o)||!k(u)&&k(s),tablet:!k(u)&&!k(o)&&!k(s)&&(k(h)||k(a)),device:!k(u)&&(k(o)||k(h)||k(s)||k(a))||k(/\bokhttp\b/i)},windows:{phone:k(u),tablet:k(c),device:k(u)||k(c)},other:{blackberry:k(l),blackberry10:k(f),opera:k(y),firefox:k(x),chrome:k(m),device:k(l)||k(f)||k(y)||k(x)||k(m)},any:!1,phone:!1,tablet:!1};return _.any=_.apple.device||_.android.device||_.windows.device||_.other.device,_.phone=_.apple.phone||_.android.phone||_.windows.phone,_.tablet=_.apple.tablet||_.android.tablet||_.windows.tablet,_}}),t("skylark-langx-hoster/isMobile",["./hoster","./detects/mobile"],function(t,n){return void 0==t.isMobile&&(t.isMobile=n()),t.isMobile}),t("skylark-langx-hoster/main",["./hoster","./isMobile"],function(t){return t}),t("skylark-langx-hoster",["skylark-langx-hoster/main"],function(t){return t}),t("skylark-langx-events/Event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(t,n,r,i){var e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function s(r,i){return!i&&r.isDefaultPrevented||(i||(i=r),t.each(e,function(t,e){var s=i[t];r[t]=function(){return this[e]=n.returnTrue,s&&s.apply(i,arguments)},r[e]=n.returnFalse})),r}class a extends CustomEvent{constructor(n,r){super(n,r),t.safeMixin(this,r),s(this)}}return a.compatible=s,i.Event=a}),t("skylark-langx-events/Listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event"],function(t,n,r,i,e,s){Array.prototype.slice;var a=r.compact,o=(t.isDefined,t.isPlainObject,t.isFunction,t.isBoolean),h=t.isString,u=t.isEmptyObject,c=(n.mixin,n.safeMixin,i({listenTo:function(n,r,i,e){if(!n)return this;if(o(i)&&(e=i,i=null),t.isPlainObject(r)){var s=r;for(var a in s)this.listenTo(n,a,s[a],e);return this}i||(i="handleEvent"),h(i)&&(i=this[i]),e?n.one(r,i,this):n.on(r,i,this);for(var u,c=this._listeningTo||(this._listeningTo=[]),l=0;l<c.length;l++)if(c[l].obj==n){u=c[l];break}u||c.push(u={obj:n,events:{}});var f=u.events,y=f[r]=f[r]||[];return-1==y.indexOf(i)&&y.push(i),this},listenToOnce:function(t,n,r){return this.listenTo(t,n,r,1)},unlistenTo:function(t,n,r){var i=this._listeningTo;if(!i)return this;h(r)&&(r=this[r]);for(var e=0;e<i.length;e++){var s=i[e];if(!t||t==s.obj){var o=s.events;for(var c in o)if(!n||n==c){var l=o[c];if(l){for(var f=0;f<l.length;f++)r&&r!=l[e]||(s.obj.off(c,l[e],this),l[e]=null);l=o[c]=a(l),u(l)&&(o[c]=null)}}u(o)&&(i[e]=null)}}return i=this._listeningTo=a(i),u(i)&&(this._listeningTo=null),this}}));return e.Listener=c}),t("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./Event","./Listener"],function(t,n,r,i,e,s,a){var o=Array.prototype.slice,h=r.compact,u=t.isDefined,c=t.isPlainObject,l=t.isFunction,f=t.isString,y=(t.isEmptyObject,n.mixin);n.safeMixin;function m(t){var n=(""+t).split(".");return{name:n[0],ns:n.slice(1).join(" ")}}var x=a.inherit({_prepareArgs:function(t,n){return n=u(n)?[t].concat(n):[t]},on:function(t,n,r,i,e,s){var a=this,o=this._hub||(this._hub={});if(c(t))return e=i,each(t,function(t,i){a.on(t,n,r,i,e,s)}),this;if(f(n)||l(i)||(e=i,i=r,r=n,n=void 0),l(r)&&(e=i,i=r,r=null),!i)throw new Error("No callback function");if(!l(i))throw new Error("The callback  is not afunction");return f(t)&&(t=t.split(/\s/)),t.forEach(function(t){var a=m(t),h=a.name,u=a.ns;(o[h]||(o[h]=[])).push({fn:i,selector:n,data:r,ctx:e,ns:u,one:s})}),this},one:function(t,n,r,i,e){return this.on(t,n,r,i,e,1)},emit:function(t){if(!this._hub)return this;var n=this;f(t)&&(t=new s(t)),Object.defineProperty(t,"target",{value:this});var r=o.call(arguments,1);return r=this._prepareArgs(t,r),[t.type||t.name,"all"].forEach(function(i){var e=m(i),s=e.name,a=e.ns,o=n._hub[s];if(o){for(var u=o.length,l=!1,f=0;f<u;f++){if(t.isImmediatePropagationStopped&&t.isImmediatePropagationStopped())return this;var x=o[f];(!a||x.ns&&x.ns.startsWith(a))&&(x.data&&(t.data=y({},x.data,t.data)),2==r.length&&c(r[1])&&(t.data=t.data||{},y(t.data,r[1])),x.fn.apply(x.ctx,r),x.one&&(o[f]=null,l=!0))}l&&(n._hub[i]=h(o))}}),this},listened:function(t){var n=(this._hub||(this._events={}))[t]||[];return n.length>0},off:function(t,n){if(t){var r=this._hub||(this._hub={});return f(t)&&(t=t.split(/\s/)),t.forEach(function(t){var i=m(t),e=i.name,s=i.ns,a=r[e];if(a){var o=[];if(n||s)for(var h=0,u=a.length;h<u;h++)n&&a[h].fn!==n&&a[h].fn._!==n?o.push(a[h]):!s||a[h].ns&&0==a[h].ns.indexOf(s)||o.push(a[h]);o.length?r[e]=o:delete r[e]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)}});return e.Emitter=x}),t("skylark-langx-events/createEvent",["./events","./Event"],function(t,n){return t.createEvent=function(t,r){return new n(t,r)}}),t("skylark-langx-events/main",["./events","./Event","./Listener","./Emitter","./createEvent"],function(t){return t}),t("skylark-langx-events",["skylark-langx-events/main"],function(t){return t}),t("skylark-langx/Emitter",["skylark-langx-events"],function(t){return t.Emitter}),t("skylark-langx/Evented",["./Emitter"],function(t){return t}),t("skylark-langx/events",["skylark-langx-events"],function(t){return t}),t("skylark-langx/funcs",["skylark-langx-funcs"],function(t){return t}),t("skylark-langx-globals/globals",["skylark-langx-ns"],function(t){var n=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();return t.attach("langx.globals",n)}),t("skylark-langx-globals/console",["./globals"],function(t){return t.console=console}),t("skylark-langx-globals/document",["./globals"],function(t){var n;"undefined"!=typeof global?global:"undefined"!=typeof window&&window;return n="undefined"!=typeof document?document:require("min-document"),t.document=n}),t("skylark-langx-globals/window",["./globals"],function(t){var n="undefined"!=typeof window?window:{};return t.window=n}),t("skylark-langx-globals/main",["./globals","./console","./document","./window"],function(t){return t}),t("skylark-langx-globals",["skylark-langx-globals/main"],function(t){return t}),t("skylark-langx/globals",["skylark-langx-globals"],function(t){return t}),t("skylark-langx/hoster",["skylark-langx-hoster"],function(t){return t}),t("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(t,n){for(var r=[],i=0;i<256;i++)r[i]=(i<16?"0":"")+i.toString(16);var e={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,i,e){return i+(t-n)*(e-i)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*e.DEG2RAD},radToDeg:function(t){return t*e.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,r,i,e){var s=Math.cos,a=Math.sin,o=s(r/2),h=a(r/2),u=s((n+i)/2),c=a((n+i)/2),l=s((n-i)/2),f=a((n-i)/2),y=s((i-n)/2),m=a((i-n)/2);"XYX"===e?t.set(o*c,h*l,h*f,o*u):"YZY"===e?t.set(h*f,o*c,h*l,o*u):"ZXZ"===e?t.set(h*l,h*f,o*c,o*u):"XZX"===e?t.set(o*c,h*m,h*y,o*u):"YXY"===e?t.set(h*y,o*c,h*m,o*u):"ZYZ"===e?t.set(h*m,h*y,o*c,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return t.attach("langx.maths",e)}),t("skylark-langx-maths/main",["./maths"],function(t){return t}),t("skylark-langx-maths",["skylark-langx-maths/main"],function(t){return t}),t("skylark-langx/maths",["skylark-langx-maths"],function(t){return t}),t("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(t,n){return t.attach("langx.numerics",{toFinite:n.toFinite,toNumber:n.toNumber,toInteger:n.toInteger})}),t("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(t,n,r){for(var i=[],e=0;e<256;e++)i[e]=(e<16?"0":"")+e.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(t,n,r){return Math.max(n,Math.min(r,t))},euclideanModulo:function(t,n){return(t%n+n)%n},mapLinear:function(t,n,r,i,e){return i+(t-n)*(e-i)/(r-n)},lerp:function(t,n,r){return(1-r)*t+r*n},smoothstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*(3-2*t)},smootherstep:function(t,n,r){return t<=n?0:t>=r?1:(t=(t-n)/(r-n))*t*t*(t*(6*t-15)+10)},randInt:function(t,n){return t+Math.floor(Math.random()*(n-t+1))},randFloat:function(t,n){return t+Math.random()*(n-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,n,r,i,e){var s=Math.cos,a=Math.sin,o=s(r/2),h=a(r/2),u=s((n+i)/2),c=a((n+i)/2),l=s((n-i)/2),f=a((n-i)/2),y=s((i-n)/2),m=a((i-n)/2);"XYX"===e?t.set(o*c,h*l,h*f,o*u):"YZY"===e?t.set(h*f,o*c,h*l,o*u):"ZXZ"===e?t.set(h*l,h*f,o*c,o*u):"XZX"===e?t.set(o*c,h*m,h*y,o*u):"YXY"===e?t.set(h*y,o*c,h*m,o*u):"ZYZ"===e?t.set(h*m,h*y,o*c,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return r.maths=s}),t("skylark-langx-numerics/Quaternion",["skylark-langx-klass","./numerics","./maths"],function(t,n,r){var i=t({klassName:"Quaternion",x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},set:function(t,n,r,i){return this._x=t,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,n){if(!t||!t.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=t._x,i=t._y,e=t._z,s=t.order,a=Math.cos,o=Math.sin,h=a(r/2),u=a(i/2),c=a(e/2),l=o(r/2),f=o(i/2),y=o(e/2);return"XYZ"===s?(this._x=l*u*c+h*f*y,this._y=h*f*c-l*u*y,this._z=h*u*y+l*f*c,this._w=h*u*c-l*f*y):"YXZ"===s?(this._x=l*u*c+h*f*y,this._y=h*f*c-l*u*y,this._z=h*u*y-l*f*c,this._w=h*u*c+l*f*y):"ZXY"===s?(this._x=l*u*c-h*f*y,this._y=h*f*c+l*u*y,this._z=h*u*y+l*f*c,this._w=h*u*c-l*f*y):"ZYX"===s?(this._x=l*u*c-h*f*y,this._y=h*f*c+l*u*y,this._z=h*u*y-l*f*c,this._w=h*u*c+l*f*y):"YZX"===s?(this._x=l*u*c+h*f*y,this._y=h*f*c+l*u*y,this._z=h*u*y-l*f*c,this._w=h*u*c-l*f*y):"XZY"===s&&(this._x=l*u*c-h*f*y,this._y=h*f*c-l*u*y,this._z=h*u*y+l*f*c,this._w=h*u*c+l*f*y),!1!==n&&this._onChangeCallback(),this},setFromAxisAngle:function(t,n){var r=n/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var n,r=t.elements,i=r[0],e=r[4],s=r[8],a=r[1],o=r[5],h=r[9],u=r[2],c=r[6],l=r[10],f=i+o+l;return f>0?(n=.5/Math.sqrt(f+1),this._w=.25/n,this._x=(c-h)*n,this._y=(s-u)*n,this._z=(a-e)*n):i>o&&i>l?(n=2*Math.sqrt(1+i-o-l),this._w=(c-h)/n,this._x=.25*n,this._y=(e+a)/n,this._z=(s+u)/n):o>l?(n=2*Math.sqrt(1+o-i-l),this._w=(s-u)/n,this._x=(e+a)/n,this._y=.25*n,this._z=(h+c)/n):(n=2*Math.sqrt(1+l-i-o),this._w=(a-e)/n,this._x=(s+u)/n,this._y=(h+c)/n,this._z=.25*n),this._onChangeCallback(),this},setFromUnitVectors:function(t,n){var r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(r.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,n){var r=this.angleTo(t);if(0===r)return this;var i=Math.min(1,n/r);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,n){return void 0!==n?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,n){var r=t._x,i=t._y,e=t._z,s=t._w,a=n._x,o=n._y,h=n._z,u=n._w;return this._x=r*u+s*a+i*h-e*o,this._y=i*u+s*o+e*a-r*h,this._z=e*u+s*h+r*o-i*a,this._w=s*u-r*a-i*o-e*h,this._onChangeCallback(),this},slerp:function(t,n){if(0===n)return this;if(1===n)return this.copy(t);var r=this._x,i=this._y,e=this._z,s=this._w,a=s*t._w+r*t._x+i*t._y+e*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=r,this._y=i,this._z=e,this;var o=1-a*a;if(o<=Number.EPSILON){var h=1-n;return this._w=h*s+n*this._w,this._x=h*r+n*this._x,this._y=h*i+n*this._y,this._z=h*e+n*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),c=Math.atan2(u,a),l=Math.sin((1-n)*c)/u,f=Math.sin(n*c)/u;return this._w=s*l+this._w*f,this._x=r*l+this._x*f,this._y=i*l+this._y*f,this._z=e*l+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,n){return void 0===n&&(n=0),this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t},fromBufferAttribute:function(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,n,r,i){this._x=t||0,this._y=n||0,this._z=r||0,this._w=void 0!==i?i:1}});return Object.assign(i,{slerp:function(t,n,r,i){return r.copy(t).slerp(n,i)},slerpFlat:function(t,n,r,i,e,s,a){var o=r[i+0],h=r[i+1],u=r[i+2],c=r[i+3],l=e[s+0],f=e[s+1],y=e[s+2],m=e[s+3];if(c!==m||o!==l||h!==f||u!==y){var x=1-a,p=o*l+h*f+u*y+c*m,d=p>=0?1:-1,g=1-p*p;if(g>Number.EPSILON){var v=Math.sqrt(g),k=Math.atan2(v,p*d);x=Math.sin(x*k)/v,a=Math.sin(a*k)/v}var _=a*d;if(o=o*x+l*_,h=h*x+f*_,u=u*x+y*_,c=c*x+m*_,x===1-a){var w=1/Math.sqrt(o*o+h*h+u*u+c*c);o*=w,h*=w,u*=w,c*=w}}t[n]=o,t[n+1]=h,t[n+2]=u,t[n+3]=c}}),Object.assign(i.prototype,{}),n.Quaternion=i}),t("skylark-langx-numerics/Vector3",["skylark-langx-klass","./numerics","./maths","./Quaternion"],function(t,n,r,i){var e=new i,s=t({klassName:"Vector3",set:function(t,n,r){return this.x=t,this.y=n,this.z=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return void 0!==n?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this},sub:function(t,n){return void 0!==n?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function(t,n){return void 0!==n?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))},applyAxisAngle:function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))},applyMatrix3:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements;return this.x=e[0]*n+e[3]*r+e[6]*i,this.y=e[1]*n+e[4]*r+e[7]*i,this.z=e[2]*n+e[5]*r+e[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements,s=1/(e[3]*n+e[7]*r+e[11]*i+e[15]);return this.x=(e[0]*n+e[4]*r+e[8]*i+e[12])*s,this.y=(e[1]*n+e[5]*r+e[9]*i+e[13])*s,this.z=(e[2]*n+e[6]*r+e[10]*i+e[14])*s,this},applyQuaternion:function(t){var n=this.x,r=this.y,i=this.z,e=t.x,s=t.y,a=t.z,o=t.w,h=o*n+s*i-a*r,u=o*r+a*n-e*i,c=o*i+e*r-s*n,l=-e*n-s*r-a*i;return this.x=h*o+l*-e+u*-a-c*-s,this.y=u*o+l*-s+c*-e-h*-a,this.z=c*o+l*-a+h*-s-u*-e,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var n=this.x,r=this.y,i=this.z,e=t.elements;return this.x=e[0]*n+e[4]*r+e[8]*i,this.y=e[1]*n+e[5]*r+e[9]*i,this.z=e[2]*n+e[6]*r+e[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},cross:function(t,n){return void 0!==n?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)},crossVectors:function(t,n){var r=t.x,i=t.y,e=t.z,s=n.x,a=n.y,o=n.z;return this.x=i*o-e*a,this.y=e*s-r*o,this.z=r*a-i*s,this},projectOnVector:function(t){var n=t.lengthSq();if(0===n)return this.set(0,0,0);var r=t.dot(this)/n;return this.copy(t).multiplyScalar(r)},projectOnPlane:function(t){return a.copy(this).projectOnVector(t),this.sub(a)},reflect:function(t){return this.sub(a.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var n=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===n)return Math.PI/2;var r=this.dot(t)/n;return Math.acos(MathUtils.clamp(r,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return n*n+r*r+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,n,r){var i=Math.sin(n)*t;return this.x=i*Math.sin(r),this.y=Math.cos(n)*t,this.z=i*Math.cos(r),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(t){var n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=i,this},setFromMatrixColumn:function(t,n){return this.fromArray(t.elements,4*n)},setFromMatrix3Column:function(t,n){return this.fromArray(t.elements,3*n)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this},_construct:function(t,n,r){this.x=t||0,this.y=n||0,this.z=r||0}}),a=new s;return n.Vector3=s}),t("skylark-langx-numerics/Matrix4",["skylark-langx-klass","./numerics","./Vector3"],function(t,n,r){var i=new r,e=new r(0,0,0),s=new r(1,1,1),a=new r,o=new r,h=new r,u=t({set:function(t,n,r,i,e,s,a,o,h,u,c,l,f,y,m,x){var p=this.elements;return p[0]=t,p[4]=n,p[8]=r,p[12]=i,p[1]=e,p[5]=s,p[9]=a,p[13]=o,p[2]=h,p[6]=u,p[10]=c,p[14]=l,p[3]=f,p[7]=y,p[11]=m,p[15]=x,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(t){var n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},copyPosition:function(t){var n=this.elements,r=t.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this},extractBasis:function(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this},extractRotation:function(t){var n=this.elements,r=t.elements,e=1/i.setFromMatrixColumn(t,0).length(),s=1/i.setFromMatrixColumn(t,1).length(),a=1/i.setFromMatrixColumn(t,2).length();return n[0]=r[0]*e,n[1]=r[1]*e,n[2]=r[2]*e,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=this.elements,r=t.x,i=t.y,e=t.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),h=Math.sin(i),u=Math.cos(e),c=Math.sin(e);if("XYZ"===t.order){var l=s*u,f=s*c,y=a*u,m=a*c;n[0]=o*u,n[4]=-o*c,n[8]=h,n[1]=f+y*h,n[5]=l-m*h,n[9]=-a*o,n[2]=m-l*h,n[6]=y+f*h,n[10]=s*o}else if("YXZ"===t.order){var x=o*u,p=o*c,d=h*u,g=h*c;n[0]=x+g*a,n[4]=d*a-p,n[8]=s*h,n[1]=s*c,n[5]=s*u,n[9]=-a,n[2]=p*a-d,n[6]=g+x*a,n[10]=s*o}else if("ZXY"===t.order){var x=o*u,p=o*c,d=h*u,g=h*c;n[0]=x-g*a,n[4]=-s*c,n[8]=d+p*a,n[1]=p+d*a,n[5]=s*u,n[9]=g-x*a,n[2]=-s*h,n[6]=a,n[10]=s*o}else if("ZYX"===t.order){var l=s*u,f=s*c,y=a*u,m=a*c;n[0]=o*u,n[4]=y*h-f,n[8]=l*h+m,n[1]=o*c,n[5]=m*h+l,n[9]=f*h-y,n[2]=-h,n[6]=a*o,n[10]=s*o}else if("YZX"===t.order){var v=s*o,k=s*h,_=a*o,w=a*h;n[0]=o*u,n[4]=w-v*c,n[8]=_*c+k,n[1]=c,n[5]=s*u,n[9]=-a*u,n[2]=-h*u,n[6]=k*c+_,n[10]=v-w*c}else if("XZY"===t.order){var v=s*o,k=s*h,_=a*o,w=a*h;n[0]=o*u,n[4]=-c,n[8]=h*u,n[1]=v*c+w,n[5]=s*u,n[9]=k*c-_,n[2]=_*c-k,n[6]=a*u,n[10]=w*c+v}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(e,t,s)},lookAt:function(t,n,r){var i=this.elements;return h.subVectors(t,n),0===h.lengthSq()&&(h.z=1),h.normalize(),a.crossVectors(r,h),0===a.lengthSq()&&(1===Math.abs(r.z)?h.x+=1e-4:h.z+=1e-4,h.normalize(),a.crossVectors(r,h)),a.normalize(),o.crossVectors(h,a),i[0]=a.x,i[4]=o.x,i[8]=h.x,i[1]=a.y,i[5]=o.y,i[9]=h.y,i[2]=a.z,i[6]=o.z,i[10]=h.z,this},multiply:function(t,n){return void 0!==n?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var r=t.elements,i=n.elements,e=this.elements,s=r[0],a=r[4],o=r[8],h=r[12],u=r[1],c=r[5],l=r[9],f=r[13],y=r[2],m=r[6],x=r[10],p=r[14],d=r[3],g=r[7],v=r[11],k=r[15],_=i[0],w=i[4],M=i[8],b=i[12],z=i[1],A=i[5],S=i[9],C=i[13],E=i[2],j=i[6],T=i[10],P=i[14],O=i[3],F=i[7],V=i[11],Y=i[15];return e[0]=s*_+a*z+o*E+h*O,e[4]=s*w+a*A+o*j+h*F,e[8]=s*M+a*S+o*T+h*V,e[12]=s*b+a*C+o*P+h*Y,e[1]=u*_+c*z+l*E+f*O,e[5]=u*w+c*A+l*j+f*F,e[9]=u*M+c*S+l*T+f*V,e[13]=u*b+c*C+l*P+f*Y,e[2]=y*_+m*z+x*E+p*O,e[6]=y*w+m*A+x*j+p*F,e[10]=y*M+m*S+x*T+p*V,e[14]=y*b+m*C+x*P+p*Y,e[3]=d*_+g*z+v*E+k*O,e[7]=d*w+g*A+v*j+k*F,e[11]=d*M+g*S+v*T+k*V,e[15]=d*b+g*C+v*P+k*Y,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this},determinant:function(){var t=this.elements,n=t[0],r=t[4],i=t[8],e=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],c=t[6],l=t[10],f=t[14],y=t[3],m=t[7],x=t[11],p=t[15];return y*(+e*o*c-i*h*c-e*a*l+r*h*l+i*a*f-r*o*f)+m*(+n*o*f-n*h*l+e*s*l-i*s*f+i*h*u-e*o*u)+x*(+n*h*c-n*a*f-e*s*c+r*s*f+e*a*u-r*h*u)+p*(-i*a*u-n*o*c+n*a*l+i*s*c-r*s*l+r*o*u)},transpose:function(){var t,n=this.elements;return t=n[1],n[1]=n[4],n[4]=t,t=n[2],n[2]=n[8],n[8]=t,t=n[6],n[6]=n[9],n[9]=t,t=n[3],n[3]=n[12],n[12]=t,t=n[7],n[7]=n[13],n[13]=t,t=n[11],n[11]=n[14],n[14]=t,this},setPosition:function(t,n,r){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=n,i[14]=r),this},getInverse:function(t,n){void 0!==n&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var r=this.elements,i=t.elements,e=i[0],s=i[1],a=i[2],o=i[3],h=i[4],u=i[5],c=i[6],l=i[7],f=i[8],y=i[9],m=i[10],x=i[11],p=i[12],d=i[13],g=i[14],v=i[15],k=y*g*l-d*m*l+d*c*x-u*g*x-y*c*v+u*m*v,_=p*m*l-f*g*l-p*c*x+h*g*x+f*c*v-h*m*v,w=f*d*l-p*y*l+p*u*x-h*d*x-f*u*v+h*y*v,M=p*y*c-f*d*c-p*u*m+h*d*m+f*u*g-h*y*g,b=e*k+s*_+a*w+o*M;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var z=1/b;return r[0]=k*z,r[1]=(d*m*o-y*g*o-d*a*x+s*g*x+y*a*v-s*m*v)*z,r[2]=(u*g*o-d*c*o+d*a*l-s*g*l-u*a*v+s*c*v)*z,r[3]=(y*c*o-u*m*o-y*a*l+s*m*l+u*a*x-s*c*x)*z,r[4]=_*z,r[5]=(f*g*o-p*m*o+p*a*x-e*g*x-f*a*v+e*m*v)*z,r[6]=(p*c*o-h*g*o-p*a*l+e*g*l+h*a*v-e*c*v)*z,r[7]=(h*m*o-f*c*o+f*a*l-e*m*l-h*a*x+e*c*x)*z,r[8]=w*z,r[9]=(p*y*o-f*d*o-p*s*x+e*d*x+f*s*v-e*y*v)*z,r[10]=(h*d*o-p*u*o+p*s*l-e*d*l-h*s*v+e*u*v)*z,r[11]=(f*u*o-h*y*o-f*s*l+e*y*l+h*s*x-e*u*x)*z,r[12]=M*z,r[13]=(f*d*a-p*y*a+p*s*m-e*d*m-f*s*g+e*y*g)*z,r[14]=(p*u*a-h*d*a-p*s*c+e*d*c+h*s*g-e*u*g)*z,r[15]=(h*y*a-f*u*a+f*s*c-e*y*c-h*s*m+e*u*m)*z,this},scale:function(t){var n=this.elements,r=t.x,i=t.y,e=t.z;return n[0]*=r,n[4]*=i,n[8]*=e,n[1]*=r,n[5]*=i,n[9]*=e,n[2]*=r,n[6]*=i,n[10]*=e,n[3]*=r,n[7]*=i,n[11]*=e,this},getMaxScaleOnAxis:function(){var t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,i))},makeTranslation:function(t,n,r){return this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this},makeRotationX:function(t){var n=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this},makeRotationY:function(t){var n=Math.cos(t),r=Math.sin(t);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this},makeRotationZ:function(t){var n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,n){var r=Math.cos(n),i=Math.sin(n),e=1-r,s=t.x,a=t.y,o=t.z,h=e*s,u=e*a;return this.set(h*s+r,h*a-i*o,h*o+i*a,0,h*a+i*o,u*a+r,u*o-i*s,0,h*o-i*a,u*o+i*s,e*o*o+r,0,0,0,0,1),this},makeScale:function(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(t,n,r){return this.set(1,n,r,0,t,1,r,0,t,n,1,0,0,0,0,1),this},compose:function(t,n,r){var i=this.elements,e=n._x,s=n._y,a=n._z,o=n._w,h=e+e,u=s+s,c=a+a,l=e*h,f=e*u,y=e*c,m=s*u,x=s*c,p=a*c,d=o*h,g=o*u,v=o*c,k=r.x,_=r.y,w=r.z;return i[0]=(1-(m+p))*k,i[1]=(f+v)*k,i[2]=(y-g)*k,i[3]=0,i[4]=(f-v)*_,i[5]=(1-(l+p))*_,i[6]=(x+d)*_,i[7]=0,i[8]=(y+g)*w,i[9]=(x-d)*w,i[10]=(1-(l+m))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,n,r){var e=this.elements,s=i.set(e[0],e[1],e[2]).length(),a=i.set(e[4],e[5],e[6]).length(),o=i.set(e[8],e[9],e[10]).length(),h=this.determinant();h<0&&(s=-s),t.x=e[12],t.y=e[13],t.z=e[14],c.copy(this);var u=1/s,l=1/a,f=1/o;return c.elements[0]*=u,c.elements[1]*=u,c.elements[2]*=u,c.elements[4]*=l,c.elements[5]*=l,c.elements[6]*=l,c.elements[8]*=f,c.elements[9]*=f,c.elements[10]*=f,n.setFromRotationMatrix(c),r.x=s,r.y=a,r.z=o,this},makePerspective:function(t,n,r,i,e,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*e/(n-t),h=2*e/(r-i),u=(n+t)/(n-t),c=(r+i)/(r-i),l=-(s+e)/(s-e),f=-2*s*e/(s-e);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,n,r,i,e,s){var a=this.elements,o=1/(n-t),h=1/(r-i),u=1/(s-e),c=(n+t)*o,l=(r+i)*h,f=(s+e)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var n=this.elements,r=t.elements,i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var r=0;r<16;r++)this.elements[r]=t[r+n];return this},toArray:function(t,n){void 0===t&&(t=[]),void 0===n&&(n=0);var r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),c=new u;return n.Matrix4=u}),t("skylark-langx-numerics/Euler",["skylark-langx-klass","./numerics","./maths","./Quaternion","./Vector3","./Matrix4"],function(t,n,r,i,e,s){var a=new s,o=new i,h=t({x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},isEuler:!0,set:function(t,n,r,i){return this._x=t,this._y=n,this._z=r,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,n,i){var e=r.clamp,s=t.elements,a=s[0],o=s[4],h=s[8],u=s[1],c=s[5],l=s[9],f=s[2],y=s[6],m=s[10];return"XYZ"===(n=n||this._order)?(this._y=Math.asin(e(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-l,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(y,c),this._z=0)):"YXZ"===n?(this._x=Math.asin(-e(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(h,m),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===n?(this._x=Math.asin(e(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===n?(this._y=Math.asin(-e(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(y,m),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===n?(this._z=Math.asin(e(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(h,m))):"XZY"===n?(this._z=Math.asin(-e(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(y,c),this._y=Math.atan2(h,a)):(this._x=Math.atan2(-l,m),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,!1!==i&&this._onChangeCallback(),this},setFromQuaternion:function(t,n,r){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,n,r)},setFromVector3:function(t,n){return this.set(t.x,t.y,t.z,n||this._order)},reorder:function(t){return o.setFromEuler(this),this.setFromQuaternion(o,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new e(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){},_construct:function(t,n,r,i){this._x=t||0,this._y=n||0,this._z=r||0,this._order=i||h.DefaultOrder}});return h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],h.DefaultOrder="XYZ",n.Euler=h}),t("skylark-langx-numerics/Matrix3",["skylark-langx-klass","./numerics"],function(t,n){var r=t({klassName:"Matrix3",isMatrix3:!0,set:function(t,n,r,i,e,s,a,o,h){var u=this.elements;return u[0]=t,u[1]=i,u[2]=a,u[3]=n,u[4]=e,u[5]=o,u[6]=r,u[7]=s,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this},extractBasis:function(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,n){var r=t.elements,i=n.elements,e=this.elements,s=r[0],a=r[3],o=r[6],h=r[1],u=r[4],c=r[7],l=r[2],f=r[5],y=r[8],m=i[0],x=i[3],p=i[6],d=i[1],g=i[4],v=i[7],k=i[2],_=i[5],w=i[8];return e[0]=s*m+a*d+o*k,e[3]=s*x+a*g+o*_,e[6]=s*p+a*v+o*w,e[1]=h*m+u*d+c*k,e[4]=h*x+u*g+c*_,e[7]=h*p+u*v+c*w,e[2]=l*m+f*d+y*k,e[5]=l*x+f*g+y*_,e[8]=l*p+f*v+y*w,this},multiplyScalar:function(t){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this},determinant:function(){var t=this.elements,n=t[0],r=t[1],i=t[2],e=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return n*s*u-n*a*h-r*e*u+r*a*o+i*e*h-i*s*o},getInverse:function(t,n){void 0!==n&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var r=t.elements,i=this.elements,e=r[0],s=r[1],a=r[2],o=r[3],h=r[4],u=r[5],c=r[6],l=r[7],f=r[8],y=f*h-u*l,m=u*c-f*o,x=l*o-h*c,p=e*y+s*m+a*x;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);var d=1/p;return i[0]=y*d,i[1]=(a*l-f*s)*d,i[2]=(u*s-a*h)*d,i[3]=m*d,i[4]=(f*e-a*c)*d,i[5]=(a*o-u*e)*d,i[6]=x*d,i[7]=(s*c-l*e)*d,i[8]=(h*e-s*o)*d,this},transpose:function(){var t,n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this},setUvTransform:function(t,n,r,i,e,s,a){var o=Math.cos(e),h=Math.sin(e);this.set(r*o,r*h,-r*(o*s+h*a)+s+t,-i*h,i*o,-i*(-h*s+o*a)+a+n,0,0,1)},scale:function(t,n){var r=this.elements;return r[0]*=t,r[3]*=t,r[6]*=t,r[1]*=n,r[4]*=n,r[7]*=n,this},rotate:function(t){var n=Math.cos(t),r=Math.sin(t),i=this.elements,e=i[0],s=i[3],a=i[6],o=i[1],h=i[4],u=i[7];return i[0]=n*e+r*o,i[3]=n*s+r*h,i[6]=n*a+r*u,i[1]=-r*e+n*o,i[4]=-r*s+n*h,i[7]=-r*a+n*u,this},translate:function(t,n){var r=this.elements;return r[0]+=t*r[2],r[3]+=t*r[5],r[6]+=t*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this},equals:function(t){for(var n=this.elements,r=t.elements,i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0},fromArray:function(t,n){void 0===n&&(n=0);for(var r=0;r<9;r++)this.elements[r]=t[r+n];return this},toArray:function(t,n){void 0===t&&(t=[]),void 0===n&&(n=0);var r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return n.Matrix3=r}),t("skylark-langx-numerics/Transform",["skylark-langx-klass","./numerics"],function(t,n){var r=t({klassName:"Transform",value:{get:function(){return this._.value}}});return n.Transform=r}),t("skylark-langx-numerics/MatrixTransform",["./numerics","./Transform"],function(t,n){var r=n.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t){var n=this._={};n.matrix=t}});return t.MatrixTransform=r}),t("skylark-langx-numerics/Plane",["skylark-langx-klass","./numerics","./Matrix3","./Vector3"],function(t,n,r,i){var e=new i,s=new i,a=new r,o=t({klassName:"Plane",set:function(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function(t,n,r,i){return this.normal.set(t,n,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(t,n,r){var i=e.subVectors(r,n).cross(s.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,n){return void 0===n&&(console.warn("mathsPlane: .projectPoint() target is now required"),n=new i),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,n){void 0===n&&(console.warn("mathsPlane: .intersectLine() target is now required"),n=new i);var r=t.delta(e),s=this.normal.dot(r);if(0===s)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/s;return a<0||a>1?void 0:n.copy(r).multiplyScalar(a).add(t.start)},intersectsLine:function(t){var n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),t=new i),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,n){var r=n||a.getNormalMatrix(t),i=this.coplanarPoint(e).applyMatrix4(t),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant},_construct:function(t,n){this.normal=void 0!==t?t:new i(1,0,0),this.constant=void 0!==n?n:0}});return n.Plane=o}),t("skylark-langx-numerics/RotateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,n,r){var i=t.RotateTransform=n.inherit({klassName:"RotateTransform",value:{get:function(){return r.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,n,r){var i=this._={};i.angle=t||0,i.centerX=n||0,i.centerY=r||0}});return i}),t("skylark-langx-numerics/ScaleTransform",["./numerics","./Transform","./MatrixTransform"],function(t,n,r){var i=n.inherit({klassName:"ScaleTransform",value:{get:function(){return r.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,n,r,i){var e=this._={};e.scaleX=t||1,e.scaleY=n||1,e.centerX=r||0,e.centerY=i||0}});return t.ScaleTransform=i}),t("skylark-langx-numerics/SkewTransform",["./numerics","./Transform","./MatrixTransform"],function(t,n,r){var i=n.inherit({klassName:"SkewTransform",value:{get:function(){return r.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(t){},transformBounds:function(t){},_construct:function(t,n){var r=this._={};r.skewX=t||0,r.skewY=n||0}});return t.SkewTransform=i}),t("skylark-langx-numerics/Vector2",["skylark-langx-klass","./numerics"],function(t,n){var r=t({klassName:"Vector2",set:function(t,n){return this.x=t,this.y=n,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,n){return void 0!==n?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this},sub:function(t,n){return void 0!==n?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var n=this.x,r=this.y,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,r=this.y-t.y;return n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t},rotateAround:function(t,n){var r=Math.cos(n),i=Math.sin(n),e=this.x-t.x,s=this.y-t.y;return this.x=e*r-s*i+t.x,this.y=e*i+s*r+t.y,this},_construct:function(t,n){this.x=t||0,this.y=n||0}});return n.Vector2=r}),t("skylark-langx-numerics/TransformMatrix",["skylark-langx-klass","./numerics","./Vector2"],function(t,n,r){var i=Math.PI/180,e={},s=function(t){return e[t]||(e[t]=Math.PI*t/180)},a=t({klassName:"TransformMatrix",_multiplyPoint:function(t){var n=this._,i=t.x*n.m11+t.y*n.m21+n.dx,e=t.x*n.m12+t.y*n.m22+n.dy;return new r(i,e)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(t){return this._multiplyPoint(t)},multiplyRectangle:function(t){if(this.isIdentity())return t.clone();var n=this.multiplyPoint(t.leftTop),r=this.multiplyPoint(t.leftBottom),i=this.multiplyPoint(t.right),e=this.multiplyPoint(t.rightBottom),s=Math.min(n.x,r.x,i.x,e.x),a=Math.min(n.y,r.y,i.y,e.y),o=Math.max(n.x,r.x,i.x,e.x),h=Math.max(n.y,r.y,i.y,e.y);return new Rect(s,a,o-s,h-a)},prepend:function(t,n,r,i,e,s){var a=this.dx;if(1!=t||0!=n||0!=r||1!=i){var o=this.m11,h=this.m21;this.m11=o*t+this.m12*r,this.m12=o*n+this.m12*i,this.m21=h*t+this.m22*r,this.m22=h*n+this.m22*i}return this.dx=a*t+this.dy*r+e,this.dy=a*n+this.dy*i+s,this},append:function(t,n,r,i,e,s){var a=this.m11,o=this.m12,h=this.m21,u=this.m22;return this.m11=t*a+n*h,this.m12=t*o+n*u,this.m21=r*a+i*h,this.m22=r*o+i*u,this.dx=e*a+s*h+this.dx,this.dy=e*o+s*u+this.dy,this},prependMatrix:function(t){return this.prepend(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},appendMatrix:function(t){return this.append(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},prependTransform:function(t,n,r,e,s,a,o,h,u){if(s%360)var c=s*i,l=Math.cos(c),f=Math.sin(c);else l=1,f=0;return(h||u)&&(this.dx-=h,this.dy-=u),a||o?(a*=i,o*=i,this.prepend(l*r,f*r,-f*e,l*e,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,n)):this.prepend(l*r,f*r,-f*e,l*e,t,n),this},appendTransform:function(t,n,r,e,s,a,o,h,u){if(s%360)var c=s*i,l=Math.cos(c),f=Math.sin(c);else l=1,f=0;return a||o?(a*=i,o*=i,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,n),this.append(l*r,f*r,-f*e,l*e,0,0)):this.append(l*r,f*r,-f*e,l*e,t,n),(h||u)&&(this.dx-=h*this.m11+u*this.m21,this.dy-=h*this.m12+u*this.m22),this},rotate:function(t){var n=Math.cos(t),r=Math.sin(t),i=this.m11,e=this.m21,s=this.dx;return this.m11=i*n-this.m12*r,this.m12=i*r+this.m12*n,this.m21=e*n-this.m22*r,this.m22=e*r+this.m22*n,this.dx=s*n-this.dy*r,this.dy=s*r+this.dy*n,this},skew:function(t,n){return t*=i,n*=i,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},scale:function(t,n){return this.m11*=t,this.m22*=n,this.dx*=t,this.dy*=n,this},translate:function(t,n){return this.dx+=t,this.dy+=n,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var t=this.m11,n=this.m12,r=this.m21,i=this.m22,e=this.dx,s=t*i-n*r;return this.m11=i/s,this.m12=-n/s,this.m21=-r/s,this.m22=t/s,this.dx=(r*this.dy-i*e)/s,this.dy=-(t*this.dy-n*e)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(t){null==t&&(t={}),t.x=this.dx,t.y=this.dy,t.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),t.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var n=Math.atan2(-this.m21,this.m22),r=Math.atan2(this.m12,this.m11);return n==r?(t.rotation=r/i,this.m11<0&&this.m22>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/i,t.skewY=r/i),t},reinitialize:function(t,n,r,i,e,s,a,o,h){return this._initialize(t,n,r,i,e,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=h,this},appendProperties:function(t,n,r){return this.alpha*=t,this.shadow=n||this.shadow,this.compositeOperation=r||this.compositeOperation,this},prependProperties:function(t,n,r){return this.alpha*=t,this.shadow=this.shadow||n,this.compositeOperation=this.compositeOperation||r,this},multiply:function(t){var n=this.m11,r=this.m12,i=this.m21,e=this.m22,s=this.dx,a=this.dy,o=t;return this.m11=n*o.m11+i*o.m12,this.m12=r*o.m11+e*o.m12,this.m21=n*o.m21+i*o.m22,this.m22=r*o.m21+e*o.m22,this.dx=n*o.dx+i*o.dy+s,this.dy=r*o.dx+e*o.dy+a,this},clone:function(){var t=this._,n=new a(t.m11,t.m12,t.m21,t.m22,t.dx,t.dy);return n.shadow=this.shadow,n.alpha=this.alpha,n.compositeOperation=this.compositeOperation,n},toString:function(){var t=this._;return"[TransformMatrix (m11="+t.m11+" m12="+t.m12+" m21="+t.m21+" m22="+t.m22+" dx="+t.dx+" dy="+t.dy+")]"},_construct:function(t,n,r,i,e,s){var a=this._={};a.m11=t||1,a.m12=n||0,a.m21=r||0,a.m22=i||1,a.dx=e||0,a.dy=s||0}});return Object.assign(a,{translate:function(t,n){return new a(1,0,0,1,t,n)},scale:function(t,n){return new a(t,0,0,n||t,0,0)},rotate:function(t){var n=Math.cos(t),r=Math.sin(t);return new a(n,r,-r,n,0,0)},rotateg:function(t){return this.rotate(s(t))},skewX:function(t){var n=Math.tan(t);return new a(1,0,n,1)},skewXg:function(t){return this.skewX(s(t))},skewY:function(t){var n=Math.tan(t);return new a(1,n,0,1)},skewYg:function(t){return this.skewY(s(t))},reflect:function(t,n){1==arguments.length&&(n=t.y,t=t.x);var r=t*t,i=n*n,e=r+i,s=2*r/e-1,o=2*t*n/e,h=o,u=2*i/e-1;return new a(s,h,o,u)},project:function(t,n){var r=t*t,i=n*n,e=r+i,s=r/e,o=t*n/e;return yx=o,yy=i/e,new a(s,yx,o,yy)},_sandwich:function(t,n,r){return this.translate(n,r).multiply(t).multiply(this.translate(-n,-r))},scaleAt:function(t,n,r,i){switch(arguments.length){case 4:return this._sandwich(this.scale(t,n),r,i);case 3:return"number"==typeof r?this._sandwich(this.scale(t),n,r):this._sandwich(this.scale(t,n),r.x,r.y)}return this._sandwich(this.scale(t),n.x,n.y)},rotateAt:function(t,n,r){return arguments.length>2?this._sandwich(this.rotate(t),n,r):this._sandwich(this.rotate(t),n.x,n.y)},rotategAt:function(t,n,r){return arguments.length>2?this._sandwich(this.rotateg(t),n,r):this._sandwich(this.rotateg(t),n.x,n.y)},skewXAt:function(t,n,r){return arguments.length>2?this._sandwich(this.skewX(t),n,r):this._sandwich(this.skewX(t),n.x,n.y)},skewXgAt:function(t,n,r){return arguments.length>2?this._sandwich(this.skewXg(t),n,r):this._sandwich(this.skewXg(t),n.x,n.y)},skewYAt:function(t,n,r){return arguments.length>2?this._sandwich(this.skewY(t),n,r):this._sandwich(this.skewY(t),n.x,n.y)},skewYgAt:function(t,n,r){return arguments.length>2?this._sandwich(this.skewYg(t),n,r):this._sandwich(this.skewYg(t),n.x,n.y)}}),n.TransformMatrix=a}),t("skylark-langx-numerics/TranslateTransform",["./numerics","./Transform","./MatrixTransform"],function(t,n,r,i,e){var s=n.inherit({klassName:"TranslateTransform",value:{get:function(){return r.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(t){},transformBounds:function(t){},init:function(t,n){var r=this._;r.x=t||0,r.y=n||0}});return t.TranslateTransform=s}),t("skylark-langx-numerics/Vector4",["skylark-langx-klass","./numerics"],function(t,n){var r=t({klassName:"Vector4",set:function(t,n,r,i){return this.x=t,this.y=n,this.z=r,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,n){return void 0!==n?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this},addScaledVector:function(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this},sub:function(t,n){return void 0!==n?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var n=this.x,r=this.y,i=this.z,e=this.w,s=t.elements;return this.x=s[0]*n+s[4]*r+s[8]*i+s[12]*e,this.y=s[1]*n+s[5]*r+s[9]*i+s[13]*e,this.z=s[2]*n+s[6]*r+s[10]*i+s[14]*e,this.w=s[3]*n+s[7]*r+s[11]*i+s[15]*e,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this},setAxisAngleFromRotationMatrix:function(t){var n,r,i,e,s=t.elements,a=s[0],o=s[4],h=s[8],u=s[1],c=s[5],l=s[9],f=s[2],y=s[6],m=s[10];if(Math.abs(o-u)<.01&&Math.abs(h-f)<.01&&Math.abs(l-y)<.01){if(Math.abs(o+u)<.1&&Math.abs(h+f)<.1&&Math.abs(l+y)<.1&&Math.abs(a+c+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;var x=(a+1)/2,p=(c+1)/2,d=(m+1)/2,g=(o+u)/4,v=(h+f)/4,k=(l+y)/4;return x>p&&x>d?x<.01?(r=0,i=.707106781,e=.707106781):(r=Math.sqrt(x),i=g/r,e=v/r):p>d?p<.01?(r=.707106781,i=0,e=.707106781):(i=Math.sqrt(p),r=g/i,e=k/i):d<.01?(r=.707106781,i=.707106781,e=0):(e=Math.sqrt(d),r=v/e,i=k/e),this.set(r,i,e,n),this}var _=Math.sqrt((y-l)*(y-l)+(h-f)*(h-f)+(u-o)*(u-o));return Math.abs(_)<.001&&(_=1),this.x=(y-l)/_,this.y=(h-f)/_,this.z=(u-o)/_,this.w=Math.acos((a+c+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this},clampScalar:function(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this},clampLength:function(t,n){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this},lerpVectors:function(t,n,r){return this.subVectors(n,t).multiplyScalar(r).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,n){return void 0===n&&(n=0),this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this},toArray:function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t},fromBufferAttribute:function(t,n,r){return void 0!==r&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this},_construct:function(t,n,r,i){this.x=t||0,this.y=n||0,this.z=r||0,this.w=void 0!==i?i:1}});return n.Vector4=r}),t("skylark-langx-numerics/main",["./numerics","./Euler","./maths","./Matrix3","./Matrix4","./MatrixTransform","./Plane","./Quaternion","./RotateTransform","./ScaleTransform","./SkewTransform","./Transform","./TransformMatrix","./TranslateTransform","./Vector2","./Vector3","./Vector4"],function(t){return t}),t("skylark-langx-numerics",["skylark-langx-numerics/main"],function(t){return t}),t("skylark-langx/numerics",["skylark-langx-numerics"],function(t){return t}),t("skylark-langx/objects",["skylark-langx-objects"],function(t){return t}),t("skylark-langx-strings/strings",["skylark-langx-ns"],function(t){var n=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function r(t){return n[t]}var i=/[&<>"'`=]/g;var e=0;function s(t,n){var r,i,e,s,a,o,h,u=arguments.callee;return u.cache[t]||(u.cache[t]=(r=t,i=/^[\w\-]+$/.test(t)?u.get(t):(r="template(string)",t),e=1,s=("try { "+(u.variable?"var "+u.variable+" = this.stash;":"with (this.stash) { ")+"this.ret += '"+i.replace(/<%/g,"").replace(/%>/g,"").replace(/'(?![^\x11\x13]+?\x13)/g,"\\x27").replace(/^\s*|\s*$/g,"").replace(/\n|\r\n/g,function(){return"';\nthis.line = "+ ++e+"; this.ret += '\\n"}).replace(/\x11=raw(.+?)\x13/g,"' + ($1) + '").replace(/\x11=(.+?)\x13/g,"' + this.escapeHTML($1) + '").replace(/\x11(.+?)\x13/g,"'; $1; this.ret += '")+"'; "+(u.variable?"":"}")+"return this.ret;} catch (e) { throw 'TemplateError: ' + e + ' (on "+r+"' + ' line ' + this.line + ')'; } //@ sourceURL="+r+"\n").replace(/this\.ret \+= '';/g,""),a=new Function(s),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#x22;","'":"&#x27;"},h=function(t){return(""+t).replace(/[&<>\'\"]/g,function(t){return o[t]})},function(t){return a.call(u.context={escapeHTML:h,line:1,ret:"",stash:t})})),n?u.cache[t](n):u.cache[t]}return s.cache={},s.get=function(t){return document.getElementById(t).innerHTML},t.attach("langx.strings",{camelCase:function(t){return t.replace(/-([\da-z])/g,function(t){return t.toUpperCase().replace("-","")})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},deserializeValue:function(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?JSON.parse(t):t):t}catch(n){return t}},escapeHTML:function(t){if(null==t)return"";if(!t)return String(t);return t.toString().replace(i,r)},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0,r="x"===t?n:3&n|8;return r.toString(16)})},ltrim:function(t){return t.replace(/^\s+/,"")},lowerFirst:function(t){return t.charAt(0).toLowerCase()+t.slice(1)},rtrim:function(t){return t.replace(/\s+$/,"")},serializeValue:function(t){return JSON.stringify(t)},substitute:function(t,n,r,i){function e(t,n){if(t.match(/\./)){var r,i=function(t,n){var e=t.pop();return e?n[e]?i(t,r=n[e]):null:r};return i(t.split(".").reverse(),n)}return n[t]}return i=i||window,r=r?proxy(i,r):function(t){return t},t.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(t,s,a){var o=e(s,n);return a&&(o=e(a,i).call(i,o,s)),r(o,s).toString()})},slugify:function(t){t=(t=t.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var n="ÁÄÂÀÃÅČÇĆĎÉĚËÈÊẼĔȆÍÌÎÏŇÑÓÖÒÔÕØŘŔŠŤÚŮÜÙÛÝŸŽáäâàãåčçćďéěëèêẽĕȇíìîïňñóöòôõøðřŕšťúůüùûýÿžþÞĐđßÆa·/_,:;",r=0,i=n.length;r<i;r++)t=t.replace(new RegExp(n.charAt(r),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(r));return t=t.replace(/\s+/g,"-").replace(/-+/g,"-")},trim:function(t){return null==t?"":String.prototype.trim.call(t)},uniqueId:function(t){var n=++e+"";return t?t+n:n},upperFirst:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}),t("skylark-langx-strings/base64",["./strings"],function(t){return t.base64={decode:function(t,n){n=null!=n&&n;var r,i,e,s,a,o,h,u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;c<t.length;)s=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),o=this._keyStr.indexOf(t.charAt(c++)),h=this._keyStr.indexOf(t.charAt(c++)),r=s<<2|a>>4,i=(15&a)<<4|o>>2,e=(3&o)<<6|h,u+=String.fromCharCode(r),64!=o&&(u+=String.fromCharCode(i)),64!=h&&(u+=String.fromCharCode(e));n||(u=function(t){var n="",r=0,i=c1=c2=0;for(;r<t.length;)(i=t.charCodeAt(r))<128?(n+=String.fromCharCode(i),r++):i>191&&i<224?(c2=t.charCodeAt(r+1),n+=String.fromCharCode((31&i)<<6|63&c2),r+=2):(c2=t.charCodeAt(r+1),c3=t.charCodeAt(r+2),n+=String.fromCharCode((15&i)<<12|(63&c2)<<6|63&c3),r+=3);return n}(u));return u},encode:function(t,n){var r,i,e,s,a,o,h,u="",c=0;(n=null!=n&&n)||(t=function(t){t=t.replace(/\r\n/g,"\n");for(var n="",r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?n+=String.fromCharCode(i):i>127&&i<2048?(n+=String.fromCharCode(i>>6|192),n+=String.fromCharCode(63&i|128)):(n+=String.fromCharCode(i>>12|224),n+=String.fromCharCode(i>>6&63|128),n+=String.fromCharCode(63&i|128))}return n}(t));for(;c<t.length;)r=t.charCodeAt(c++),i=t.charCodeAt(c++),e=t.charCodeAt(c++),s=r>>2,a=(3&r)<<4|i>>4,o=(15&i)<<2|e>>6,h=63&e,isNaN(i)?o=h=64:isNaN(e)&&(h=64),u=u+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(h);return u}}}),t("skylark-langx-strings/main",["./strings","./base64"],function(t){return t}),t("skylark-langx-strings",["skylark-langx-strings/main"],function(t){return t}),t("skylark-langx/strings",["skylark-langx-strings"],function(t){return t}),t("skylark-langx/Stateful",["./Evented","./strings","./objects"],function(t,n,r){var i=r.isEqual,e=r.mixin,s=r.result,a=r.isEmptyObject,o=r.clone,h=n.uniqueId,u=t.inherit({_construct:function(t,n){var r=t||{};n||(n={}),this.cid=h(this.cidPrefix),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(r=this.parse(r,n)||{});var i=s(this,"defaults");r=e({},i,r),this.set(r,n),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(t){return o(this.attributes)},get:function(t){return this.attributes[t]},has:function(t){return null!=this.get(t)},set:function(t,n,r){if(null==t)return this;var e;if("object"==typeof t?(e=t,r=n):(e={})[t]=n,r||(r={}),!this._validate(e,r))return!1;var s=r.unset,a=r.silent,h=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=o(this.attributes),this.changed={});var c=this.attributes,l=this.changed,f=this._previousAttributes;for(var y in e)n=e[y],i(c[y],n)||h.push(y),i(f[y],n)?delete l[y]:l[y]=n,s?delete c[y]:c[y]=n;if(this.idAttribute in e&&(this.id=this.get(this.idAttribute)),!a){h.length&&(this._pending=r);for(var m=0;m<h.length;m++)this.trigger("change:"+h[m],this,c[h[m]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e({},n,{unset:!0}))},clear:function(t){var n={};for(var r in this.attributes)n[r]=void 0;return this.set(n,e({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a(this.changed):void 0!==this.changed[t]},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o(this.changed);var n=this._changing?this._previousAttributes:this.attributes,r={};for(var e in t){var s=t[e];i(n[e],s)||(r[e]=s)}return!a(r)&&r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e({},t,{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e({},this.attributes,t);var r=this.validationError=this.validate(t,n)||null;return!r||(this.trigger("invalid",this,r,e(n,{validationError:r})),!1)}});return u}),t("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(t,n){var r=new n.Emitter;return t.attach("langx.topic",{publish:function(t,n,i){var e=[].slice.call(arguments,1);return r.trigger({type:t,data:e})},subscribe:function(t,n,i){var e=function(t){n.apply(i,t.data)};return r.on(t,e),{remove:function(){r.off(t,e)}}}})}),t("skylark-langx-topic/main",["./topic"],function(t){return t}),t("skylark-langx-topic",["skylark-langx-topic/main"],function(t){return t}),t("skylark-langx/topic",["skylark-langx-topic"],function(t){return t}),t("skylark-langx/types",["skylark-langx-types"],function(t){return t}),t("skylark-langx/langx",["./skylark","./arrays","./ArrayStore","./aspect","./async","./binary","./constructs","./datetimes","./Deferred","./Emitter","./Evented","./events","./funcs","./globals","./hoster","./klass","./maths","./numerics","./objects","./Stateful","./strings","./topic","./types"],function(t,n,r,i,e,s,a,o,h,u,c,l,f,y,m,x,p,d,g,v,k,_,w){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var M=g.mixin,b=(g.safeMixin,w.isFunction);var z=1;function A(){return A}return M(A,{createEvent:u.createEvent,funcArg:function(t,n,r,i){return b(n)?n.call(t,r,i):n},getQueryParams:function(t){var n=(t=t||window.location.href).split("?"),r={};n.length>1&&n[1].split("&").forEach(function(t){var n=t.split("=");r[n[0]]=n[1]});return r},toPixel:function(t){return parseFloat(t)||0},uid:function(t){return t._uid||(t._uid=z++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),M(A,n,i,o,f,d,g,k,w,{ArrayStore:r,async:e,Deferred:h,Emitter:u,Evented:c,hoster:m,klass:x,Stateful:v,topic:_}),t.langx=A}),t("skylark-langx/main",["./langx"],function(t){return t}),t("skylark-langx",["skylark-langx/main"],function(t){return t})}(r,require),!i){var a=require("skylark-langx-ns");e?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-langx-all.js.map
